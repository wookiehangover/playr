/*
 * popcorn.js version c17e937
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(p,d){function k(a){y.put.call(this,a)}function c(a){this.parent=a;this.byStart=[{start:-1,end:-1}];this.byEnd=[{start:-1,end:-1}];this.animating=[];this.endIndex=this.startIndex=0;this.previousUpdateTime=-1;Object.defineProperty(this,"count",{get:function(){return this.byStart.length}})}function b(a,e){return function(){if(j.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(n){j.plugin.errors.push({plugin:e,thrown:n,source:a.toString()});this.emit("pluginerror",
j.plugin.errors)}}}if(d.addEventListener){var f=Array.prototype,h=Object.prototype,i=f.forEach,m=f.slice,t=h.hasOwnProperty,l=h.toString,o=p.Popcorn,q=[],s=false,w={events:{hash:{},apis:{}}},F=function(){return p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||p.oRequestAnimationFrame||p.msRequestAnimationFrame||function(a){p.setTimeout(a,16)}}(),y={put:function(a){Object.getOwnPropertyNames(a).forEach(function(e){this[e]=a[e]},this)}},j=function(a,e){return new j.p.init(a,
e||null)};j.version="c17e937";j.isSupported=true;j.instances=[];j.p=j.prototype={init:function(a,e){var n,g=this;if(typeof a==="function")if(d.readyState==="complete")a(d,j);else{q.push(a);if(!s){s=true;var x=function(){d.removeEventListener("DOMContentLoaded",x,false);for(var z=0,C=q.length;z<C;z++)q[z].call(d,j);q=null};d.addEventListener("DOMContentLoaded",x,false)}}else{if(typeof a==="string")try{n=d.querySelector(a)}catch(v){throw Error("Popcorn.js Error: Invalid media element selector: "+a);
}this.media=n||a;n=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[n]=this.media;this.options=j.extend({},e)||{};this.id=this.options.id||j.guid(n);if(j.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:j.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new c(this)};j.instances.push(this);var B=function(){if(g.media.currentTime<
0)g.media.currentTime=0;g.media.removeEventListener("loadedmetadata",B,false);var z,C,H,u,r;z=g.media.duration;z=z!=z?Number.MAX_VALUE:z+1;j.addTrackEvent(g,{start:z,end:z});if(g.options.frameAnimation){g.data.timeUpdate=function(){j.timeUpdate(g,{});j.forEach(j.manifest,function(A,M){if(C=g.data.running[M]){u=C.length;for(var J=0;J<u;J++){H=C[J];(r=H._natives)&&r.frame&&r.frame.call(g,{},H,g.currentTime())}}});g.emit("timeupdate");!g.isDestroyed&&F(g.data.timeUpdate)};!g.isDestroyed&&F(g.data.timeUpdate)}else{g.data.timeUpdate=
function(A){j.timeUpdate(g,A)};g.isDestroyed||g.media.addEventListener("timeupdate",g.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return g.media.error}});g.media.readyState>=1?B():g.media.addEventListener("loadedmetadata",B,false);return this}}};j.p.init.prototype=j.p;j.byId=function(a){for(var e=j.instances,n=e.length,g=0;g<n;g++)if(e[g].id===a)return e[g];return null};j.forEach=function(a,e,n){if(!a||!e)return{};n=n||this;var g,x;if(i&&a.forEach===i)return a.forEach(e,
n);if(l.call(a)==="[object NodeList]"){g=0;for(x=a.length;g<x;g++)e.call(n,a[g],g,a);return a}for(g in a)t.call(a,g)&&e.call(n,a[g],g,a);return a};j.extend=function(a){var e=m.call(arguments,1);j.forEach(e,function(n){for(var g in n)a[g]=n[g]});return a};j.extend(j,{noConflict:function(a){if(a)p.Popcorn=o;return j},error:function(a){throw Error(a);},guid:function(a){j.guid.counter++;return(a?a:"")+(+new Date+j.guid.counter)},sizeOf:function(a){var e=0,n;for(n in a)e++;return e},isArray:Array.isArray||
function(a){return l.call(a)==="[object Array]"},nop:function(){},position:function(a){if(!a.parentNode)return null;a=a.getBoundingClientRect();var e={},n=d.documentElement,g=d.body,x,v,B;x=n.clientTop||g.clientTop||0;v=n.clientLeft||g.clientLeft||0;B=p.pageYOffset&&n.scrollTop||g.scrollTop;n=p.pageXOffset&&n.scrollLeft||g.scrollLeft;x=Math.ceil(a.top+B-x);v=Math.ceil(a.left+n-v);for(var z in a)e[z]=Math.round(a[z]);return j.extend({},e,{top:x,left:v})},disable:function(a,e){if(!a.data.disabled[e]){a.data.disabled[e]=
true;if(e in j.registryByName&&a.data.running[e])for(var n=a.data.running[e].length-1,g;n>=0;n--){g=a.data.running[e][n];g._natives.end.call(a,null,g);a.emit("trackend",j.extend({},g,{plugin:g.type,type:"trackend"}))}return a}},enable:function(a,e){if(a.data.disabled[e]){a.data.disabled[e]=false;if(e in j.registryByName&&a.data.running[e])for(var n=a.data.running[e].length-1,g;n>=0;n--){g=a.data.running[e][n];g._natives.start.call(a,null,g);a.emit("trackstart",j.extend({},g,{plugin:g.type,type:"trackstart",
track:g}))}return a}},destroy:function(a){var e=a.data.events,n=a.data.trackEvents,g,x,v,B;for(x in e){g=e[x];for(v in g)delete g[v];e[x]=null}for(B in j.registryByName)j.removePlugin(a,B);n.byStart.length=0;n.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}j.instances.splice(j.instances.indexOf(a),1)}});j.guid.counter=1;j.extend(j.p,function(){var a={};j.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(e){a[e]=function(n){var g;if(typeof this.media[e]==="function"){if(n!=null&&/play|pause/.test(e))this.media.currentTime=j.util.toSeconds(n);this.media[e]();return this}if(n!=null){g=this.media[e];this.media[e]=n;g!==n&&this.emit("attrchange",{attribute:e,previousValue:g,currentValue:n});return this}return this.media[e]}});return a}());j.forEach("enable disable".split(" "),function(a){j.p[a]=function(e){return j[a](this,e)}});j.extend(j.p,{roundTime:function(){return Math.round(this.media.currentTime)},
exec:function(a,e,n){var g=arguments.length,x="trackadded",v,B;try{B=j.util.toSeconds(a)}catch(z){}if(typeof B==="number")a=B;if(typeof a==="number"&&g===2){n=e;e=a;a=j.guid("cue")}else if(g===1)e=-1;else if(v=this.getTrackEvent(a)){this.data.trackEvents.remove(a);k.end(this,v);j.removeTrackEvent.ref(this,a);x="cuechange";if(typeof a==="string"&&g===2){if(typeof e==="number")n=v._natives.start;if(typeof e==="function"){n=e;e=v.start}}}else if(g>=2){if(typeof e==="string"){try{B=j.util.toSeconds(e)}catch(C){}e=
B}if(typeof e==="number")n=n||j.nop();if(typeof e==="function"){n=e;e=-1}}g={id:a,start:e,end:e+1,_running:false,_natives:{start:n||j.nop,end:j.nop,type:"cue"}};if(v)g=j.extend(v,g);if(x==="cuechange"){g._id=g.id||g._id||j.guid(g._natives.type);this.data.trackEvents.add(g);k.start(this,g);this.timeUpdate(this,null,true);j.addTrackEvent.ref(this,g);this.emit(x,j.extend({},g,{id:a,type:x,previousValue:{time:v.start,fn:v._natives.start},currentValue:{time:e,fn:n||j.nop},track:v}))}else j.addTrackEvent(this,
g);return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return j.position(this.media)},toggle:function(a){return j[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,e){if(j.isArray(a)){j.forEach(a,function(n){for(var g in n)this.defaults(g,
n[g])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});j.extend(this.options.defaults[a],e);return this}});j.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};
j.Events.Natives=j.Events.UIEvents+" "+j.Events.MouseEvents+" "+j.Events.Events;w.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(a,e){for(var n=w.events.apiTypes,g=a.Natives.split(/\s+/g),x=0,v=g.length;x<v;x++)e.hash[g[x]]=true;n.forEach(function(B){e.apis[B]={};for(var z=a[B].split(/\s+/g),C=z.length,H=0;H<C;H++)e.apis[B][z[H]]=true})})(j.Events,w.events);j.events={isNative:function(a){return!!w.events.hash[a]},getInterface:function(a){if(!j.events.isNative(a))return false;var e=
w.events,n=e.apiTypes;e=e.apis;for(var g=0,x=n.length,v,B;g<x;g++){B=n[g];if(e[B][a]){v=B;break}}return v},all:j.Events.Natives.split(/\s+/g),fn:{trigger:function(a,e){var n,g=this.data.events[a];if(g){if(n=j.events.getInterface(a)){n=d.createEvent(n);n.initEvent(a,true,true,p,1);this.media.dispatchEvent(n);return this}for(n=g.slice();n.length;)n.shift().call(this,e)}return this},listen:function(a,e){var n=this,g=true,x=j.events.hooks[a],v,B;if(typeof e!=="function")throw Error("Popcorn.js Error: Listener is not a function");
if(!this.data.events[a]){this.data.events[a]=[];g=false}if(x){x.add&&x.add.call(this,{},e);if(x.bind)a=x.bind;if(x.handler){B=e;e=function(z){x.handler.call(n,z,B)}}g=true;if(!this.data.events[a]){this.data.events[a]=[];g=false}}this.data.events[a].push(e);!g&&j.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(z){if(n.data.events[a])for(v=n.data.events[a].slice();v.length;)v.shift().call(n,z)},false);return this},unlisten:function(a,e){var n,g=this.data.events[a];if(g){if(typeof e===
"string"){for(n=0;n<g.length;n++)g[n].name===e&&g.splice(n--,1);return this}else if(typeof e==="function"){for(;n!==-1;){n=g.indexOf(e);n!==-1&&g.splice(n,1)}return this}this.data.events[a]=null;return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,e){var n=false;if(this.media.readyState){setTimeout(function(){e.call(this,a)}.bind(this),0);n=true}this.data.hooks.canplayall={fired:n}},handler:function(a,e){if(!this.data.hooks.canplayall.fired){e.call(this,a);this.data.hooks.canplayall.fired=
true}}}}};j.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){j.p[a[0]]=j.p[a[1]]=j.events.fn[a[0]]});k.start=function(a,e){if(e.end>a.media.currentTime&&e.start<=a.media.currentTime&&!e._running){e._running=true;a.data.running[e._natives.type].push(e);if(!a.data.disabled[e._natives.type]){e._natives.start.call(a,null,e);a.emit("trackstart",j.extend({},e,{plugin:e._natives.type,type:"trackstart",track:e}))}}};k.end=function(a,e){var n;if((e.end<=a.media.currentTime||e.start>
a.media.currentTime)&&e._running){n=a.data.running[e._natives.type];e._running=false;n.splice(n.indexOf(e),1);if(!a.data.disabled[e._natives.type]){e._natives.end.call(a,null,e);a.emit("trackend",j.extend({},e,{plugin:e._natives.type,type:"trackend",track:e}))}}};c.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(e){var n,g;if(!a)return true;for(n in a){g=a[n];if(e[n]&&e[n]===g||e._natives[n]&&e._natives[n]===g)return true}return false})};c.prototype.add=function(a){var e=
this.byStart,n=this.byEnd,g;a&&a._id&&this.parent.data.history.push(a._id);a.start=j.util.toSeconds(a.start,this.parent.options.framerate);a.end=j.util.toSeconds(a.end,this.parent.options.framerate);for(g=e.length-1;g>=0;g--)if(a.start>=e[g].start){e.splice(g+1,0,a);break}for(e=n.length-1;e>=0;e--)if(a.end>n[e].end){n.splice(e+1,0,a);break}g<=this.parent.data.trackEvents.startIndex&&a.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++;e<=this.parent.data.trackEvents.endIndex&&
a.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++};c.prototype.remove=function(a){if(a instanceof k)a=a.id;if(typeof a==="object"){this.where(a).forEach(function(u){this.removeTrackEvent(u._id)},this.parent);return this}var e,n,g;g=this.byStart.length;for(var x=0,v=0,B=[],z=[],C=[],H=[];--g>-1;){e=this.byStart[x];n=this.byEnd[x];if(!e._id){B.push(e);z.push(n)}if(e._id){e._id!==a&&B.push(e);n._id!==a&&z.push(n);if(e._id===a)v=x}x++}g=this.animating.length;
x=0;if(g)for(;--g>-1;){e=this.animating[x];e._id||C.push(e);e._id&&e._id!==a&&C.push(e);x++}v<=this.startIndex&&this.startIndex--;v<=this.endIndex&&this.endIndex--;this.byStart=B;this.byEnd=z;this.animating=C;g=this.parent.data.history.length;for(x=0;x<g;x++)this.parent.data.history[x]!==a&&H.push(this.parent.data.history[x]);this.parent.data.history=H};j.addTrackEvent=function(a,e){if(!(e instanceof k)){if((e=new k(e))&&e._natives&&e._natives.type&&a.options.defaults&&a.options.defaults[e._natives.type])e=
j.extend({},a.options.defaults[e._natives.type],e);if(e._natives){e._id=e.id||e._id||j.guid(e._natives.type);if(e._natives._setup){e._natives._setup.call(a,e);a.emit("tracksetup",j.extend({},e,{plugin:e._natives.type,type:"tracksetup",track:e}))}}a.data.trackEvents.add(e);k.start(a,e);this.timeUpdate(a,null,true);e._id&&j.addTrackEvent.ref(a,e);a.emit("trackadded",j.extend({},e,e._natives?{plugin:e._natives.type}:{},{type:"trackadded",track:e}))}};j.addTrackEvent.ref=function(a,e){a.data.trackRefs[e._id]=
e;return a};j.removeTrackEvent=function(a,e){var n=a.getTrackEvent(e);if(n){n._natives._teardown&&n._natives._teardown.call(a,n);a.data.trackEvents.remove(e);j.removeTrackEvent.ref(a,e);n._natives&&a.emit("trackremoved",j.extend({},n,{plugin:n._natives.type,type:"trackremoved",track:n}))}};j.removeTrackEvent.ref=function(a,e){delete a.data.trackRefs[e];return a};j.getTrackEvents=function(a){var e=[];a=a.data.trackEvents.byStart;for(var n=a.length,g=0,x;g<n;g++){x=a[g];x._id&&e.push(x)}return e};j.getTrackEvents.ref=
function(a){return a.data.trackRefs};j.getTrackEvent=function(a,e){return a.data.trackRefs[e]};j.getTrackEvent.ref=function(a,e){return a.data.trackRefs[e]};j.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};j.timeUpdate=function(a,e){var n=a.media.currentTime,g=a.data.trackEvents.previousUpdateTime,x=a.data.trackEvents,v=x.endIndex,B=x.startIndex,z=x.byStart.length,C=x.byEnd.length,H=j.registryByName,u,r,A;if(g<=n){for(;x.byEnd[v]&&x.byEnd[v].end<=n;){u=x.byEnd[v];
r=(g=u._natives)&&g.type;if(!g||H[r]||a[r]){if(u._running===true){u._running=false;A=a.data.running[r];A.splice(A.indexOf(u),1);if(!a.data.disabled[r]){g.end.call(a,e,u);a.emit("trackend",j.extend({},u,{plugin:r,type:"trackend",track:u}))}}v++}else{j.removeTrackEvent(a,u._id);return}}for(;x.byStart[B]&&x.byStart[B].start<=n;){u=x.byStart[B];r=(g=u._natives)&&g.type;if(!g||H[r]||a[r]){if(u.end>n&&u._running===false){u._running=true;a.data.running[r].push(u);if(!a.data.disabled[r]){g.start.call(a,e,
u);a.emit("trackstart",j.extend({},u,{plugin:r,type:"trackstart",track:u}))}}B++}else{j.removeTrackEvent(a,u._id);return}}}else if(g>n){for(;x.byStart[B]&&x.byStart[B].start>n;){u=x.byStart[B];r=(g=u._natives)&&g.type;if(!g||H[r]||a[r]){if(u._running===true){u._running=false;A=a.data.running[r];A.splice(A.indexOf(u),1);if(!a.data.disabled[r]){g.end.call(a,e,u);a.emit("trackend",j.extend({},u,{plugin:r,type:"trackend",track:u}))}}B--}else{j.removeTrackEvent(a,u._id);return}}for(;x.byEnd[v]&&x.byEnd[v].end>
n;){u=x.byEnd[v];r=(g=u._natives)&&g.type;if(!g||H[r]||a[r]){if(u.start<=n&&u._running===false){u._running=true;a.data.running[r].push(u);if(!a.data.disabled[r]){g.start.call(a,e,u);a.emit("trackstart",j.extend({},u,{plugin:r,type:"trackstart",track:u}))}}v--}else{j.removeTrackEvent(a,u._id);return}}}x.endIndex=v;x.startIndex=B;x.previousUpdateTime=n;x.byStart.length<z&&x.startIndex--;x.byEnd.length<C&&x.endIndex--};j.extend(j.p,{getTrackEvents:function(){return j.getTrackEvents.call(null,this)},
getTrackEvent:function(a){return j.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return j.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){j.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){j.removePlugin.call(null,this,a);return this},timeUpdate:function(a){j.timeUpdate.call(null,this,a);return this},destroy:function(){j.destroy.call(null,this);return this}});j.manifest={};j.registry=[];j.registryByName={};j.plugin=function(a,e,n){if(j.protect.natives.indexOf(a.toLowerCase())>=
0)j.error("'"+a+"' is a protected function name");else{var g=typeof e==="function",x=["start","end","type","manifest"],v=["_setup","_teardown","start","end","frame"],B={},z=function(u,r){u=u||j.nop;r=r||j.nop;return function(){u.apply(this,arguments);r.apply(this,arguments)}};j.manifest[a]=n=n||e.manifest||{};v.forEach(function(u){e[u]=b(e[u]||j.nop,a)});var C=function(u,r){if(!r)return this;if(r.ranges&&j.isArray(r.ranges)){j.forEach(r.ranges,function(D){D=j.extend({},r,D);delete D.ranges;this[a](D)},
this);return this}var A=r._natives={},M="",J;j.extend(A,u);r._natives.type=r._natives.plugin=a;r._running=false;A.start=A.start||A["in"];A.end=A.end||A.out;if(r.once)A.end=z(A.end,function(){this.removeTrackEvent(r._id)});A._teardown=z(function(){var D=m.call(arguments),N=this.data.running[A.type];D.unshift(null);D[1]._running&&N.splice(N.indexOf(r),1)&&A.end.apply(this,D);D[1]._running=false;this.emit("trackend",j.extend({},r,{plugin:A.type,type:"trackend",track:j.getTrackEvent(this,r.id||r._id)}))},
A._teardown);A._teardown=z(A._teardown,function(){this.emit("trackteardown",j.extend({},r,{plugin:a,type:"trackteardown",track:j.getTrackEvent(this,r.id||r._id)}))});r.compose=r.compose||[];if(typeof r.compose==="string")r.compose=r.compose.split(" ");r.effect=r.effect||[];if(typeof r.effect==="string")r.effect=r.effect.split(" ");r.compose=r.compose.concat(r.effect);r.compose.forEach(function(D){M=j.compositions[D]||{};v.forEach(function(N){A[N]=z(A[N],M[N])})});r._natives.manifest=n;if(!("start"in
r))r.start=r["in"]||0;if(!r.end&&r.end!==0)r.end=r.out||Number.MAX_VALUE;if(!t.call(r,"toString"))r.toString=function(){var D=["start: "+r.start,"end: "+r.end,"id: "+(r.id||r._id)];r.target!=null&&D.push("target: "+r.target);return a+" ( "+D.join(", ")+" )"};if(!r.target){J="options"in n&&n.options;r.target=J&&"target"in J&&J.target}if(!r._id&&r._natives)r._id=j.guid(r._natives.type);if(r instanceof k){if(r._natives){r._id=r.id||r._id||j.guid(r._natives.type);if(r._natives._setup){r._natives._setup.call(this,
r);this.emit("tracksetup",j.extend({},r,{plugin:r._natives.type,type:"tracksetup",track:r}))}}this.data.trackEvents.add(r);k.start(this,r);this.timeUpdate(this,null,true);r._id&&j.addTrackEvent.ref(this,r)}else j.addTrackEvent(this,r);j.forEach(u,function(D,N){x.indexOf(N)===-1&&this.on(N,D)},this);return this};j.p[a]=B[a]=function(u,r){var A,M;if(u&&!r)r=u;else if(A=this.getTrackEvent(u)){M=r;var J={},D;for(D in A)if(t.call(M,D)&&t.call(A,D))J[D]=A[D];if(A._natives._update){this.data.trackEvents.remove(A);
if(t.call(r,"start"))A.start=r.start;if(t.call(r,"end"))A.end=r.end;k.end(this,A);g&&e.call(this,A);A._natives._update.call(this,A,r);this.data.trackEvents.add(A);k.start(this,A)}else{j.extend(A,r);this.data.trackEvents.remove(u);A._natives._teardown&&A._natives._teardown.call(this,A);j.removeTrackEvent.ref(this,u);if(g)C.call(this,e.call(this,A),A);else{A._id=A.id||A._id||j.guid(A._natives.type);if(A._natives&&A._natives._setup){A._natives._setup.call(this,A);this.emit("tracksetup",j.extend({},A,
{plugin:A._natives.type,type:"tracksetup",track:A}))}this.data.trackEvents.add(A);k.start(this,A);this.timeUpdate(this,null,true);j.addTrackEvent.ref(this,A)}this.emit("trackchange",{id:A.id,type:"trackchange",previousValue:J,currentValue:A,track:A});return this}A._natives.type!=="cue"&&this.emit("trackchange",{id:A.id,type:"trackchange",previousValue:J,currentValue:M,track:A});return this}else r.id=u;this.data.running[a]=this.data.running[a]||[];A=j.extend({},this.options.defaults&&this.options.defaults[a]||
{},r);C.call(this,g?e.call(this,A):e,A);return this};n&&j.extend(e,{manifest:n});var H={fn:B[a],definition:e,base:e,parents:[],name:a};j.registry.push(j.extend(B,H,{type:a}));j.registryByName[a]=H;return B}};j.plugin.errors=[];j.plugin.debug=j.version==="c17e937";j.removePlugin=function(a,e){if(!e){e=a;a=j.p;if(j.protect.natives.indexOf(e.toLowerCase())>=0){j.error("'"+e+"' is a protected function name");return}var n=j.registry.length,g;for(g=0;g<n;g++)if(j.registry[g].name===e){j.registry.splice(g,
1);delete j.registryByName[e];delete j.manifest[e];delete a[e];return}}n=a.data.trackEvents.byStart;g=a.data.trackEvents.byEnd;var x=a.data.trackEvents.animating,v,B;v=0;for(B=n.length;v<B;v++){if(n[v]&&n[v]._natives&&n[v]._natives.type===e){n[v]._natives._teardown&&n[v]._natives._teardown.call(a,n[v]);n.splice(v,1);v--;B--;if(a.data.trackEvents.startIndex<=v){a.data.trackEvents.startIndex--;a.data.trackEvents.endIndex--}}g[v]&&g[v]._natives&&g[v]._natives.type===e&&g.splice(v,1)}v=0;for(B=x.length;v<
B;v++)if(x[v]&&x[v]._natives&&x[v]._natives.type===e){x.splice(v,1);v--;B--}};j.compositions={};j.compose=function(a,e,n){j.manifest[a]=n||e.manifest||{};j.compositions[a]=e};j.plugin.effect=j.effect=j.compose;var L=/^(?:\.|#|\[)/;j.dom={debug:false,find:function(a,e){var n=null;e=e||d;if(a){if(!L.test(a)){n=d.getElementById(a);if(n!==null)return n}try{n=e.querySelector(a)}catch(g){if(j.dom.debug)throw Error(g);}}return n}};var E=/\?/,K={url:"",data:"",dataType:"",success:j.nop,type:"GET",async:true,
xhr:function(){return new p.XMLHttpRequest}};j.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script"))j.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=j.extend({},K,a);a.ajax=a.xhr();if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(E.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return j.xhr.httpData(a)}}};j.xhr.httpData=function(a){var e,n=null,g,x=null;a.ajax.onreadystatechange=
function(){if(a.ajax.readyState===4){try{n=JSON.parse(a.ajax.responseText)}catch(v){}e={xml:a.ajax.responseXML,text:a.ajax.responseText,json:n};if(!e.xml||!e.xml.documentElement){e.xml=null;try{g=new DOMParser;x=g.parseFromString(a.ajax.responseText,"text/xml");if(!x.getElementsByTagName("parsererror").length)e.xml=x}catch(B){}}if(a.dataType)e=e[a.dataType];a.success.call(a.ajax,e)}};return e};j.xhr.getJSONP=function(a,e,n){var g=d.head||d.getElementsByTagName("head")[0]||d.documentElement,x=d.createElement("script"),
v=false,B=[];B=/(=)\?(?=&|$)|\?\?/;var z,C;if(!n){C=a.match(/(callback=[^&]*)/);if(C!==null&&C.length){B=C[1].split("=")[1];if(B==="?")B="jsonp";z=j.guid(B);a=a.replace(/(callback=[^&]*)/,"callback="+z)}else{z=j.guid("jsonp");if(B.test(a))a=a.replace(B,"$1"+z);B=a.split(/\?(.+)?/);a=B[0]+"?";if(B[1])a+=B[1]+"&";a+="callback="+z}window[z]=function(H){e&&e(H);v=true}}x.addEventListener("load",function(){n&&e&&e();v&&delete window[z];g.removeChild(x)},false);x.src=a;g.insertBefore(x,g.firstChild)};j.getJSONP=
j.xhr.getJSONP;j.getScript=j.xhr.getScript=function(a,e){return j.xhr.getJSONP(a,e,true)};j.util={toSeconds:function(a,e){var n=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,g,x,v;if(typeof a==="number")return a;typeof a==="string"&&!n.test(a)&&j.error("Invalid time format");n=a.split(":");g=n.length-1;x=n[g];if(x.indexOf(";")>-1){x=x.split(";");v=0;if(e&&typeof e==="number")v=parseFloat(x[1],10)/e;n[g]=parseInt(x[0],10)+v}g=n[0];return{1:parseFloat(g,10),2:parseInt(g,10)*60+parseFloat(n[1],10),3:parseInt(g,
10)*3600+parseInt(n[1],10)*60+parseFloat(n[2],10)}[n.length||1]}};j.p.cue=j.p.exec;j.protect={natives:function(a){return Object.keys?Object.keys(a):function(e){var n,g=[];for(n in e)t.call(e,n)&&g.push(n);return g}(a)}(j.p).map(function(a){return a.toLowerCase()})};j.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(a,e){var n=j.p[e];j.p[e]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+e+"', "+(a==null?"do not use.":"use '"+a+"' instead."));
j.p[e]=n}return j.p[a].apply(this,[].slice.call(arguments))}});p.Popcorn=j}else{p.Popcorn={isSupported:false};for(f="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);f.length;)p.Popcorn[f.shift()]=function(){}}})(window,window.document);(function(p,d){function k(f){f=typeof f==="string"?f:[f.language,f.region].join("-");var h=f.split("-");return{iso6391:f,language:h[0]||"",region:h[1]||""}}var c=p.navigator,b=k(c.userLanguage||c.language);d.locale={get:function(){return b},set:function(f){b=k(f);d.locale.broadcast();return b},broadcast:function(f){var h=d.instances,i=h.length,m=0,t;for(f=f||"locale:changed";m<i;m++){t=h[m];f in t.data.events&&t.trigger(f)}}}})(this,this.Popcorn);(function(p){var d=Object.prototype.hasOwnProperty;p.parsers={};p.parser=function(k,c,b){if(p.protect.natives.indexOf(k.toLowerCase())>=0)p.error("'"+k+"' is a protected function name");else{if(typeof c==="function"&&!b){b=c;c=""}if(!(typeof b!=="function"||typeof c!=="string")){var f={};f[k]=function(h,i){if(!h)return this;var m=this;p.xhr({url:h,dataType:c,success:function(t){var l,o,q=0;t=b(t).data||[];if(l=t.length){for(;q<l;q++){o=t[q];for(var s in o)d.call(o,s)&&m[s]&&m[s](o[s])}i&&i()}}});
return this};p.extend(p.p,f);return f}}}})(Popcorn);(function(p){var d=function(k,c){k=k||p.nop;c=c||p.nop;return function(){k.apply(this,arguments);c.apply(this,arguments)}};p.player=function(k,c){if(!p[k]){c=c||{};var b=function(f,h,i){i=i||{};var m=new Date/1E3,t=m,l=0,o=0,q=1,s=false,w={},F=typeof f==="string"?p.dom.find(f):f,y={};Object.prototype.__defineGetter__||(y=F||document.createElement("div"));for(var j in F)if(!(j in y))if(typeof F[j]==="object")y[j]=F[j];else if(typeof F[j]==="function")y[j]=function(E){return"length"in F[E]&&!F[E].call?
F[E]:function(){return F[E].apply(F,arguments)}}(j);else p.player.defineProperty(y,j,{get:function(E){return function(){return F[E]}}(j),set:p.nop,configurable:true});var L=function(){m=new Date/1E3;if(!y.paused){y.currentTime+=m-t;y.dispatchEvent("timeupdate");setTimeout(L,10)}t=m};y.play=function(){this.paused=false;if(y.readyState>=4){t=new Date/1E3;y.dispatchEvent("play");L()}};y.pause=function(){this.paused=true;y.dispatchEvent("pause")};p.player.defineProperty(y,"currentTime",{get:function(){return l},
set:function(E){l=+E;y.dispatchEvent("timeupdate");return l},configurable:true});p.player.defineProperty(y,"volume",{get:function(){return q},set:function(E){q=+E;y.dispatchEvent("volumechange");return q},configurable:true});p.player.defineProperty(y,"muted",{get:function(){return s},set:function(E){s=+E;y.dispatchEvent("volumechange");return s},configurable:true});p.player.defineProperty(y,"readyState",{get:function(){return o},set:function(E){return o=E},configurable:true});y.addEventListener=function(E,
K){w[E]||(w[E]=[]);w[E].push(K);return K};y.removeEventListener=function(E,K){var a,e=w[E];if(e){for(a=w[E].length-1;a>=0;a--)K===e[a]&&e.splice(a,1);return K}};y.dispatchEvent=function(E){var K,a=E.type;if(!a){a=E;if(E=p.events.getInterface(a)){K=document.createEvent(E);K.initEvent(a,true,true,window,1)}}if(w[a])for(E=w[a].length-1;E>=0;E--)w[a][E].call(this,K,this)};y.src=h||"";y.duration=0;y.paused=true;y.ended=0;i&&i.events&&p.forEach(i.events,function(E,K){y.addEventListener(K,E,false)});if(c._canPlayType(F.nodeName,
h)!==false)if(c._setup)c._setup.call(y,i);else{y.readyState=4;y.dispatchEvent("loadedmetadata");y.dispatchEvent("loadeddata");y.dispatchEvent("canplaythrough")}else setTimeout(function(){y.dispatchEvent("error")},0);f=new p.p.init(y,i);if(c._teardown)f.destroy=d(f.destroy,function(){c._teardown.call(y,i)});return f};b.canPlayType=c._canPlayType=c._canPlayType||p.nop;p[k]=p.player.registry[k]=b}};p.player.registry={};p.player.defineProperty=Object.defineProperty||function(k,c,b){k.__defineGetter__(c,
b.get||p.nop);k.__defineSetter__(c,b.set||p.nop)};p.player.playerQueue=function(){var k=[],c=false;return{next:function(){c=false;k.shift();k[0]&&k[0]()},add:function(b){k.push(function(){c=true;b&&b()});!c&&k[0]()}}};p.smart=function(k,c,b){var f=typeof k==="string"?p.dom.find(k):k,h,i,m,t,l,o="HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(f){c=typeof c==="string"?[c]:c;k=0;for(l=c.length;k<l;k++){h=c[k];for(i=0;i<o.length;i++)if((t=p[o[i]])&&t._canPlaySrc(h)===
"probably"){m=t(f);c=p(m,b);setTimeout(function(){m.src=h},0);return c}for(var q in p.player.registry)if(p.player.registry.hasOwnProperty(q))if(p.player.registry[q].canPlayType(f.nodeName,h))return p[q](f,h,b)}q=p.guid("popcorn-video-");o='<video id="'+q+'" preload=auto autobuffer>';k=0;for(l=c.length;k<l;k++)o+='<source src="'+c[k]+'">';o+="</video>";f.innerHTML=o;b&&b.events&&b.events.error&&f.addEventListener("error",b.events.error,false);return p("#"+q,b)}else p.error("Specified target `"+k+"` was not found.")}})(Popcorn);(function(p,d){var k=p.document,c=p.location,b=/:\/\//,f=c.href.replace(c.href.split("/").slice(-1)[0],""),h=function(m,t,l){m=m||0;t=(t||m||0)+1;l=l||1;t=Math.ceil((t-m)/l)||0;var o=0,q=[];for(q.length=t;o<t;){q[o++]=m;m+=l}return q};d.sequence=function(m,t){return new d.sequence.init(m,t)};d.sequence.init=function(m,t){this.parent=k.getElementById(m);this.seqId=d.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=
this.cycling=false;this.times={last:0};this.events={};var l=this,o=0;d.forEach(t,function(q,s){var w=k.createElement("video");w.preload="auto";w.controls=true;w.style.display=s&&"none"||"";w.id=l.seqId+"-"+s;l.queue.push(w);var F=q["in"],y=q.out;l.inOuts.ofVideos.push({"in":F!==undefined&&F||1,out:y!==undefined&&y||0});l.inOuts.ofVideos[s].out=l.inOuts.ofVideos[s].out||l.inOuts.ofVideos[s]["in"]+2;w.src=!b.test(q.src)?f+q.src:q.src;w.setAttribute("data-sequence-owner",m);w.setAttribute("data-sequence-guid",
l.seqId);w.setAttribute("data-sequence-id",s);w.setAttribute("data-sequence-clip",[l.inOuts.ofVideos[s]["in"],l.inOuts.ofVideos[s].out].join(":"));l.parent.appendChild(w);l.playlist.push(d("#"+w.id))});l.inOuts.ofVideos.forEach(function(q){q={"in":o,out:o+(q.out-q["in"])};l.inOuts.ofClips.push(q);o=q.out+1});d.forEach(this.queue,function(q,s){function w(){if(!s){l.dims.width=q.videoWidth;l.dims.height=q.videoHeight}q.currentTime=l.inOuts.ofVideos[s]["in"]-0.5;q.removeEventListener("canplaythrough",
w,false);return true}q.addEventListener("canplaythrough",w,false);q.addEventListener("play",function(){l.playing=true},false);q.addEventListener("pause",function(){l.playing=false},false);q.addEventListener("timeupdate",function(F){F=F.srcElement||F.target;F=+(F.dataset&&F.dataset.sequenceId||F.getAttribute("data-sequence-id"));var y=Math.floor(q.currentTime);if(l.times.last!==y&&F===l.active){l.times.last=y;y===l.inOuts.ofVideos[F].out&&d.sequence.cycle.call(l,F)}},false)});return this};d.sequence.init.prototype=
d.sequence.prototype;d.sequence.cycle=function(m){this.queue||d.error("Popcorn.sequence.cycle is not a public method");var t=this.queue,l=this.inOuts.ofVideos,o=t[m],q=0,s;if(t[m+1])q=m+1;if(t[m+1]){t=t[q];l=l[q];d.extend(t,{width:this.dims.width,height:this.dims.height});s=this.playlist[q];o.pause();this.active=q;this.times.last=l["in"]-1;s.currentTime(l["in"]);s[q?"play":"pause"]();this.trigger("cycle",{position:{previous:m,current:q}});if(q){o.style.display="none";t.style.display=""}this.cycling=
false}else this.playlist[m].pause();return this};var i=["timeupdate","play","pause"];d.extend(d.sequence.prototype,{eq:function(m){return this.playlist[m]},remove:function(){this.parent.innerHTML=null},clip:function(m){return this.inOuts.ofVideos[m]},duration:function(){for(var m=0,t=this.inOuts.ofClips,l=0;l<t.length;l++)m+=t[l].out-t[l]["in"]+1;return m-1},play:function(){this.playlist[this.active].play();return this},exec:function(m,t){var l=this.active;this.inOuts.ofClips.forEach(function(o,q){if(m>=
o["in"]&&m<=o.out)l=q});m+=this.inOuts.ofVideos[l]["in"]-this.inOuts.ofClips[l]["in"];d.addTrackEvent(this.playlist[l],{start:m-1,end:m,_running:false,_natives:{start:t||d.nop,end:d.nop,type:"exec"}});return this},listen:function(m,t){var l=this,o=this.playlist,q=o.length,s=0;if(!t)t=d.nop;if(d.Events.Natives.indexOf(m)>-1)d.forEach(o,function(w){w.listen(m,function(F){F.active=l;if(i.indexOf(m)>-1)t.call(w,F);else++s===q&&t.call(w,F)})});else{this.events[m]||(this.events[m]={});o=t.name||d.guid("__"+
m);this.events[m][o]=t}return this},unlisten:function(){},trigger:function(m,t){var l=this;if(!(d.Events.Natives.indexOf(m)>-1)){this.events[m]&&d.forEach(this.events[m],function(o){o.call(l,{type:m},t)});return this}}});d.forEach(d.manifest,function(m,t){d.sequence.prototype[t]=function(l){var o={},q=[],s,w,F,y,j;for(s=0;s<this.inOuts.ofClips.length;s++){q=this.inOuts.ofClips[s];w=h(q["in"],q.out);F=w.indexOf(l.start);y=w.indexOf(l.end);if(F>-1)o[s]=d.extend({},q,{start:w[F],clipIdx:F});if(y>-1)o[s]=
d.extend({},q,{end:w[y],clipIdx:y})}s=Object.keys(o).map(function(E){return+E});q=h(s[0],s[1]);for(s=0;s<q.length;s++){F={};y=q[s];var L=o[y];if(L){j=this.inOuts.ofVideos[y];w=L.clipIdx;j=h(j["in"],j.out);if(L.start){F.start=j[w];F.end=j[j.length-1]}if(L.end){F.start=j[0];F.end=j[w]}}else{F.start=this.inOuts.ofVideos[y]["in"];F.end=this.inOuts.ofVideos[y].out}this.playlist[y][t](d.extend({},l,F))}return this}})})(this,Popcorn);(function(p){document.addEventListener("DOMContentLoaded",function(){var d=document.querySelectorAll("[data-timeline-sources]");p.forEach(d,function(k,c){var b=d[c],f,h,i;if(!b.id)b.id=p.guid("__popcorn");if(b.nodeType&&b.nodeType===1){i=p("#"+b.id);f=(b.getAttribute("data-timeline-sources")||"").split(",");f[0]&&p.forEach(f,function(m){h=m.split("!");if(h.length===1){h=m.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");h[0]="parse"+h[1].toUpperCase();h[1]=m}f[0]&&i[h[0]]&&i[h[0]](h[1])});i.autoplay()&&
i.play()}})},false)})(Popcorn);(function(p,d){function k(f){var h=k.options;f=h.parser[h.strictMode?"strict":"loose"].exec(f);for(var i={},m=14;m--;)i[h.key[m]]=f[m]||"";i[h.q.name]={};i[h.key[12]].replace(h.q.parser,function(t,l,o){if(l)i[h.q.name][l]=o});return i}function c(){}k.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var b={length:0,start:p.nop,end:p.nop};MediaError=MediaError||function(){function f(h,i){this.code=h||null;this.message=i||""}f.MEDIA_ERR_NONE_ACTIVE=0;f.MEDIA_ERR_ABORTED=1;f.MEDIA_ERR_NETWORK=2;f.MEDIA_ERR_DECODE=3;f.MEDIA_ERR_NONE_SUPPORTED=4;return f}();c.prototype={_util:{type:"HTML5",TIMEUPDATE_MS:250,
MIN_WIDTH:300,MIN_HEIGHT:150,isAttributeSet:function(f){return typeof f==="string"||f===true},parseUri:k},addEventListener:function(f,h,i){d.addEventListener(this._eventNamespace+f,h,i)},removeEventListener:function(f,h,i){d.removeEventListener(this._eventNamespace+f,h,i)},dispatchEvent:function(f){var h=d.createEvent("CustomEvent");h.initCustomEvent(this._eventNamespace+f,false,false,{type:f,target:this.parentNode,data:null});d.dispatchEvent(h)},load:p.nop,canPlayType:function(){return""},getBoundingClientRect:function(){return this.parentNode.getBoundingClientRect()},
NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};c.prototype.constructor=c;Object.defineProperties(c.prototype,{currentSrc:{get:function(){return this.src!==undefined?this.src:""}},preload:{get:function(){return"auto"},set:p.nop},controls:{get:function(){return true},set:p.nop},poster:{get:function(){return""},set:p.nop},crossorigin:{get:function(){return""}},played:{get:function(){return b}},
seekable:{get:function(){return b}},buffered:{get:function(){return b}},defaultMuted:{get:function(){return false}},defaultPlaybackRate:{get:function(){return 1}},style:{get:function(){return this.parentNode.style}},id:{get:function(){return this.parentNode.id}}});p._MediaElementProto=c})(Popcorn,window.document);(function(p,d){function k(){return"maybe"}function c(b,f){var h=typeof b==="string"?d.querySelector(b):b,i=d.createElement(f);h.appendChild(i);i._canPlaySrc=k;return i}p.HTMLVideoElement=function(b){return c(b,"video")};p.HTMLVideoElement._canPlaySrc=k;p.HTMLAudioElement=function(b){return c(b,"audio")};p.HTMLAudioElement._canPlaySrc=k})(Popcorn,window.document);(function(p,d){function k(h){this.currentTime=h.currentTime||0;this.duration=h.duration||NaN;this.playInterval=null;this.paused=true;this.ended=h.endedCallback||p.nop}function c(h){function i(E){j.unshift(E)}function m(E){if(w){y.seeking=true;o.dispatchEvent("seeking");F.seekTo(E);y.seeking=false;o.dispatchEvent("timeupdate");o.dispatchEvent("seeked");o.dispatchEvent("canplay");o.dispatchEvent("canplaythrough")}else i(function(){m(E)})}function t(){o.dispatchEvent("timeupdate")}function l(){if(y.loop){m(0);
o.play()}else{y.ended=true;clearInterval(L);o.dispatchEvent("timeupdate");o.dispatchEvent("ended")}}var o=this,q=typeof h==="string"?d.querySelector(h):h,s=d.createElement("div"),w=false,F,y={src:b,networkState:o.NETWORK_EMPTY,readyState:o.HAVE_NOTHING,autoplay:b,preload:b,controls:b,loop:false,poster:b,volume:1,muted:false,width:q.width|0?q.width:o._util.MIN_WIDTH,height:q.height|0?q.height:o._util.MIN_HEIGHT,seeking:false,ended:false,paused:1,error:null},j=[],L;o._eventNamespace=p.guid("HTMLNullVideoElement::");
o.parentNode=q;o._util.type="NullVideo";o.play=function(){if(w){F.play();if(y.paused){if(y.paused===1){y.paused=false;o.dispatchEvent("play");o.dispatchEvent("playing")}else{y.ended&&m(0);if(y.paused){y.paused=false;y.loop||o.dispatchEvent("play");o.dispatchEvent("playing")}}L=setInterval(t,o._util.TIMEUPDATE_MS)}}else i(function(){o.play()})};o.pause=function(){if(w){F.pause();if(!y.paused){y.paused=true;clearInterval(L);o.dispatchEvent("pause")}}else i(function(){o.pause()})};Object.defineProperties(o,
{src:{get:function(){return y.src},set:function(E){if(E&&E!==y.src)if(o._canPlaySrc(E)){y.src=E;if(w)if(w&&F){F.pause();F=null;q.removeChild(s);s=d.createElement("div")}s.width=y.width;s.height=y.height;q.appendChild(s);E=f.exec(E);F=new k({currentTime:E[1],duration:E[2],endedCallback:l});o.dispatchEvent("loadstart");o.dispatchEvent("progress");o.dispatchEvent("durationchange");w=true;y.networkState=o.NETWORK_IDLE;y.readyState=o.HAVE_METADATA;o.dispatchEvent("loadedmetadata");o.dispatchEvent("loadeddata");
y.readyState=o.HAVE_FUTURE_DATA;o.dispatchEvent("canplay");y.readyState=o.HAVE_ENOUGH_DATA;o.dispatchEvent("canplaythrough");for(E=j.length;E--;){j[E]();delete j[E]}y.autoplay&&o.play()}else{y.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};o.dispatchEvent("error")}}},autoplay:{get:function(){return y.autoplay},set:function(E){y.autoplay=o._util.isAttributeSet(E)}},loop:{get:function(){return y.loop},set:function(E){y.loop=o._util.isAttributeSet(E)}},
width:{get:function(){return s.width},set:function(E){s.width=E;y.width=s.width}},height:{get:function(){return s.height},set:function(E){s.height=E;y.height=s.height}},currentTime:{get:function(){var E;E=w?F.currentTime:0;return E},set:function(E){m(E)}},duration:{get:function(){return F?F.duration:NaN}},ended:{get:function(){return y.ended}},paused:{get:function(){return y.paused}},seeking:{get:function(){return y.seeking}},readyState:{get:function(){return y.readyState}},networkState:{get:function(){return y.networkState}},
volume:{get:function(){return y.volume},set:function(E){if(E<0||E>1)throw"Volume value must be between 0.0 and 1.0";y.volume=E;o.dispatchEvent("volumechange")}},muted:{get:function(){return y.muted},set:function(E){E=o._util.isAttributeSet(E);y.muted=E;o.dispatchEvent("volumechange")}},error:{get:function(){return y.error}}})}var b="",f=/#t=(\d+)?,?(\d+)?/;k.prototype={play:function(){var h=this;if(this.paused){this.paused=false;this.playInterval=setInterval(function(){if(h.currentTime+0.016>=h.duration){h.currentTime=
h.duration;h.pause();h.ended()}else h.currentTime+=0.016},16)}},pause:function(){if(!this.paused){this.paused=true;clearInterval(this.playInterval)}},seekTo:function(h){h=h<0?0:h;this.currentTime=h=h>this.duration?this.duration:h}};c.prototype=new p._MediaElementProto;c.prototype.constructor=c;c.prototype._canPlaySrc=function(h){return/#t=\d*,?\d+?/.test(h)?"probably":b};c.prototype.canPlayType=function(h){return h==="video/x-nullvideo"?"probably":b};p.HTMLNullVideoElement=function(h){return new c(h)};
p.HTMLNullVideoElement._canPlaySrc=c.prototype._canPlaySrc})(Popcorn,document);(function(p,d,k){function c(){if(!t){p.getScript("//w.soundcloud.com/player/api.js",function(){p.getScript("//connect.soundcloud.com/sdk.js",function(){m=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});for(var o=l.length;o--;){l[o]();delete l[o]}})});t=true}return m}function b(o){l.unshift(o)}function f(o){function q(D){r.unshift(D)}function s(){u.bind(SC.Widget.Events.LOAD_PROGRESS,function(D){K({type:"loadProgress",data:D.currentPosition/1E3})});u.bind(SC.Widget.Events.PLAY_PROGRESS,function(D){K({type:"playProgress",
data:D.currentPosition/1E3})});u.bind(SC.Widget.Events.PLAY,function(){K({type:"play"})});u.bind(SC.Widget.Events.PAUSE,function(){K({type:"pause"})});u.bind(SC.Widget.Events.SEEK,function(D){K({type:"seek",data:D.currentPosition/1E3})});u.bind(SC.Widget.Events.FINISH,function(){K({type:"finish"})});H=true;u.getDuration(F)}function w(){u.bind(SC.Widget.Events.LOAD_PROGRESS,function(D){if(D.loadedProgress>0){u.unbind(SC.Widget.Events.LOAD_PROGRESS);u.pause()}});u.bind(SC.Widget.Events.PLAY,function(){u.unbind(SC.Widget.Events.PLAY);
u.bind(SC.Widget.Events.PAUSE,function(){u.unbind(SC.Widget.Events.PAUSE);u.setVolume(100);s()})});u.setVolume(0);u.play()}function F(D){D/=1E3;var N=C.duration;if(N!==D){C.duration=D;v.dispatchEvent("durationchange");if(isNaN(N)){C.networkState=v.NETWORK_IDLE;C.readyState=v.HAVE_METADATA;v.dispatchEvent("loadedmetadata");v.dispatchEvent("loadeddata");C.readyState=v.HAVE_FUTURE_DATA;v.dispatchEvent("canplay");C.readyState=v.HAVE_ENOUGH_DATA;v.dispatchEvent("canplaythrough");for(D=r.length;D--;){r[D]();
delete r[D]}C.paused&&C.autoplay&&v.play()}}}function y(D){function N(){C.seeking=true;v.dispatchEvent("seeking");u.seekTo(D);C.ended=false;C.seeking=false;v.dispatchEvent("timeupdate");v.dispatchEvent("seeked");v.dispatchEvent("canplay");v.dispatchEvent("canplaythrough")}C.currentTime=D;D*=1E3;H?N():addMediaReadyCallback(N)}function j(){C.paused=true;clearInterval(A);v.dispatchEvent("pause")}function L(){v.dispatchEvent("timeupdate")}function E(D){C.currentTime=D;D!==J&&v.dispatchEvent("timeupdate");
J=D}function K(D){switch(D.type){case "loadProgress":v.dispatchEvent("progress");break;case "playProgress":E(D.data);break;case "play":if(!M){M=setInterval(a,h);C.loop&&v.dispatchEvent("play")}A=setInterval(L,v._util.TIMEUPDATE_MS);if(C.paused){C.paused=false;C.loop||v.dispatchEvent("play");v.dispatchEvent("playing")}break;case "pause":j();break;case "finish":if(C.loop){y(0);v.play()}else{v.pause();j();C.ended=true;v.dispatchEvent("ended")}break;case "seek":E(D.data)}}function a(){C.ended||u.getPosition(function(D){E(D/
1E3)})}function e(D){if(v._canPlaySrc(D)){C.src=D;if(H)if(H&&u){clearInterval(M);u.pause();u.unbind(SC.Widget.Events.READY);u.unbind(SC.Widget.Events.LOAD_PROGRESS);u.unbind(SC.Widget.Events.PLAY_PROGRESS);u.unbind(SC.Widget.Events.PLAY);u.unbind(SC.Widget.Events.PAUSE);u.unbind(SC.Widget.Events.SEEK);u.unbind(SC.Widget.Events.FINISH);B.removeChild(z);z=k.createElement("iframe")}if(c()){H=false;SC.get("/resolve",{url:D},function(N){z.id=p.guid("soundcloud-");z.width=C.width;z.height=C.height;z.frameBorder=
0;z.webkitAllowFullScreen=true;z.mozAllowFullScreen=true;z.allowFullScreen=true;x(C.controls);B.appendChild(z);z.onload=function(){z.onload=null;u=SC.Widget(z);u.bind(SC.Widget.Events.READY,w);C.networkState=v.NETWORK_LOADING;v.dispatchEvent("loadstart");v.dispatchEvent("progress")};z.src="https://w.soundcloud.com/player/?url="+N.uri+"&show_artwork=false&buying=false&liking=false&sharing=false&download=false&show_comments=false&show_user=false"})}else b(function(){e(D)})}else{C.error={name:"MediaError",
message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};v.dispatchEvent("error")}}function n(D){C.volume=D;if(H){u.setVolume(D);v.dispatchEvent("volumechange")}else q(function(){n(D)})}function g(D){if(H)if(D){C.muted=C.volume;n(0)}else{C.muted=0;n(C.muted)}else{C.muted=D?1:0;q(function(){g(D)})}}function x(D){if(H){z.style.position="absolute";z.style.visibility=D?"visible":"hidden"}else{z.style.opacity=D?"1":"0";z.style.pointerEvents=D?"auto":"none"}C.controls=D}if(!d.postMessage)throw"ERROR: HTMLSoundCloudAudioElement requires window.postMessage";
var v=this,B=typeof o==="string"?p.dom.find(o):o,z=k.createElement("iframe"),C={src:i,networkState:v.NETWORK_EMPTY,readyState:v.HAVE_NOTHING,seeking:false,autoplay:i,preload:i,controls:false,loop:false,poster:i,volume:100,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,width:B.width|0?B.width:v._util.MIN_WIDTH,height:B.height|0?B.height:v._util.MIN_HEIGHT,error:null},H=false,u,r=[],A,M,J=0;v._eventNamespace=p.guid("HTMLSoundCloudAudioElement::");v.parentNode=B;v._util.type="SoundCloud";
v.play=function(){if(H){C.ended&&y(0);u.play()}else q(function(){v.play()})};v.pause=function(){H?u.pause():q(function(){v.pause()})};Object.defineProperties(v,{src:{get:function(){return C.src},set:function(D){D&&D!==C.src&&e(D)}},autoplay:{get:function(){return C.autoplay},set:function(D){C.autoplay=v._util.isAttributeSet(D)}},loop:{get:function(){return C.loop},set:function(D){C.loop=v._util.isAttributeSet(D)}},width:{get:function(){return z.width},set:function(D){z.width=D;C.width=z.width}},height:{get:function(){return z.height},
set:function(D){z.height=D;C.height=z.height}},currentTime:{get:function(){return C.currentTime},set:function(D){y(D)}},duration:{get:function(){return C.duration}},ended:{get:function(){return C.ended}},paused:{get:function(){return C.paused}},seeking:{get:function(){return C.seeking}},readyState:{get:function(){return C.readyState}},networkState:{get:function(){return C.networkState}},volume:{get:function(){return(C.muted>0?C.muted:C.volume)/100},set:function(D){if(D<0||D>1)throw"Volume value must be between 0.0 and 1.0";
D*=100;n(D)}},muted:{get:function(){return C.muted>0},set:function(D){g(v._util.isAttributeSet(D))}},error:{get:function(){return C.error}},controls:{get:function(){return C.controls},set:function(D){x(!!D)}}})}var h=16,i="",m=false,t=false,l=[];f.prototype=new p._MediaElementProto;f.prototype._canPlaySrc=function(o){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(o)?"probably":i};f.prototype.canPlayType=function(o){return o==="audio/x-soundcloud"?"probably":i};p.HTMLSoundCloudAudioElement=
function(o){return new f(o)};p.HTMLSoundCloudAudioElement._canPlaySrc=f.prototype._canPlaySrc})(Popcorn,window,document);(function(p,d,k){function c(l){var o=this,q=l.src.split("?")[0];if(q.substr(0,2)==="//")q=d.location.protocol+q;"play pause paused seekTo unload getCurrentTime getDuration getVideoEmbedCode getVideoHeight getVideoWidth getVideoUrl getColor setColor setLoop getVolume setVolume addEventListener".split(" ").forEach(function(s){o[s]=function(w){w=JSON.stringify({method:s,value:w});l.contentWindow&&l.contentWindow.postMessage(w,q)}})}function b(l){function o(r){z.unshift(r)}function q(r){var A=g.duration;
if(A!==r){g.duration=r;a.dispatchEvent("durationchange");if(isNaN(A)){g.networkState=a.NETWORK_IDLE;g.readyState=a.HAVE_METADATA;a.dispatchEvent("loadedmetadata");a.dispatchEvent("loadeddata");g.readyState=a.HAVE_FUTURE_DATA;a.dispatchEvent("canplay");g.readyState=a.HAVE_ENOUGH_DATA;a.dispatchEvent("canplaythrough");g.autoplay&&a.play();for(r=z.length;r--;){z[r]();delete z[r]}}}}function s(r){if(x){g.seeking=true;a.dispatchEvent("seeking");B.seekTo(r)}else o(function(){s(r)})}function w(){a.dispatchEvent("timeupdate")}
function F(r){(g.currentTime=r)!==u&&a.dispatchEvent("timeupdate");u=g.currentTime}function y(r){if(r.origin===i){var A;try{A=JSON.parse(r.data)}catch(M){console.warn(M)}if(A.player_id==v)switch(A.event){case "ready":B=new c(n);B.addEventListener("loadProgress");B.addEventListener("pause");B.setVolume(0);B.play();break;case "loadProgress":if(parseFloat(A.data.duration)>0&&!x){x=true;B.pause()}break;case "pause":B.setVolume(1);d.removeEventListener("message",y,false);d.addEventListener("message",j,
false);B.addEventListener("loadProgress");B.addEventListener("playProgress");B.addEventListener("play");B.addEventListener("pause");B.addEventListener("finish");B.addEventListener("seek");B.getDuration();g.networkState=a.NETWORK_LOADING;a.dispatchEvent("loadstart");a.dispatchEvent("progress")}}}function j(r){if(r.origin===i){var A;try{A=JSON.parse(r.data)}catch(M){console.warn(M)}if(A.player_id==v){switch(A.method){case "getCurrentTime":F(parseFloat(A.value));break;case "getDuration":q(parseFloat(A.value));
break;case "getVolume":r=parseFloat(A.value);if(g.volume!==r){g.volume=r;a.dispatchEvent("volumechange")}}switch(A.event){case "loadProgress":a.dispatchEvent("progress");q(parseFloat(A.data.duration));break;case "playProgress":F(parseFloat(A.data.seconds));break;case "play":g.ended&&s(0);if(!H){H=setInterval(L,f);g.loop&&a.dispatchEvent("play")}C=setInterval(w,a._util.TIMEUPDATE_MS);if(g.paused){g.paused=false;g.loop||a.dispatchEvent("play");a.dispatchEvent("playing")}break;case "pause":g.paused=
true;clearInterval(C);a.dispatchEvent("pause");break;case "finish":if(g.loop){s(0);a.play()}else{g.ended=true;a.dispatchEvent("ended")}break;case "seek":F(parseFloat(A.data.seconds));g.seeking=false;a.dispatchEvent("timeupdate");a.dispatchEvent("seeked");a.dispatchEvent("canplay");a.dispatchEvent("canplaythrough");g.paused&&a.pause()}}}}function L(){B.getCurrentTime()}function E(r){g.volume=r;if(x){B.setVolume(r);a.dispatchEvent("volumechange")}else o(function(){E(r)})}function K(r){if(x)if(r){g.muted=
g.volume;E(0)}else{g.muted=0;E(g.muted)}else{g.muted=r?1:0;o(function(){K(r)})}}if(!d.postMessage)throw"ERROR: HTMLVimeoVideoElement requires window.postMessage";var a=this,e=typeof l==="string"?p.dom.find(l):l,n=k.createElement("iframe"),g={src:h,networkState:a.NETWORK_EMPTY,readyState:a.HAVE_NOTHING,seeking:false,autoplay:h,preload:h,controls:false,loop:false,poster:h,volume:1,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,width:e.clientWidth|0?e.clientWidth:m,height:e.clientHeight|
0?e.clientHeight:t,error:null},x=false,v=p.guid(),B,z=[],C,H,u=0;a._eventNamespace=p.guid("HTMLVimeoVideoElement::");a.parentNode=e;a._util.type="Vimeo";a.play=function(){x?B.play():o(function(){a.play()})};a.pause=function(){x?B.pause():o(function(){a.pause()})};Object.defineProperties(a,{src:{get:function(){return g.src},set:function(r){if(r&&r!==g.src)if(a._canPlaySrc(r)){g.src=r;if(x)if(x&&B){clearInterval(H);B.pause();d.removeEventListener("message",j,false);e.removeChild(n);n=k.createElement("iframe")}x=
false;r=a._util.parseUri(r);var A=r.queryKey,M,J=["api=1","player_id="+v,"title=0","byline=0","portrait=0"];g.loop=A.loop==="1"||g.loop;delete A.loop;g.autoplay=A.autoplay==="1"||g.autoplay;delete A.autoplay;r=i+"/video/"+/\d+$/.exec(r.path)+"?";for(M in A)A.hasOwnProperty(M)&&J.push(encodeURIComponent(M)+"="+encodeURIComponent(A[M]));r+=J.join("&");n.id=v;n.width=g.width;n.height=g.height;n.frameBorder=0;n.webkitAllowFullScreen=true;n.mozAllowFullScreen=true;n.allowFullScreen=true;e.appendChild(n);
n.src=r;d.addEventListener("message",y,false)}else{g.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};a.dispatchEvent("error")}}},autoplay:{get:function(){return g.autoplay},set:function(r){g.autoplay=a._util.isAttributeSet(r)}},loop:{get:function(){return g.loop},set:function(r){g.loop=a._util.isAttributeSet(r)}},width:{get:function(){return n.width},set:function(r){n.width=r;g.width=n.width}},height:{get:function(){return n.height},set:function(r){n.height=
r;g.height=n.height}},currentTime:{get:function(){return g.currentTime},set:function(r){s(r)}},duration:{get:function(){return g.duration}},ended:{get:function(){return g.ended}},paused:{get:function(){return g.paused}},seeking:{get:function(){return g.seeking}},readyState:{get:function(){return g.readyState}},networkState:{get:function(){return g.networkState}},volume:{get:function(){return g.muted>0?g.muted:g.volume},set:function(r){if(r<0||r>1)throw"Volume value must be between 0.0 and 1.0";E(r)}},
muted:{get:function(){return g.muted>0},set:function(r){K(a._util.isAttributeSet(r))}},error:{get:function(){return g.error}}})}var f=16,h="",i=d.location.protocol+"//player.vimeo.com",m=300,t=200;b.prototype=new p._MediaElementProto;b.prototype.constructor=b;b.prototype._canPlaySrc=function(l){return/player.vimeo.com\/video\/\d+/.test(l)||/vimeo.com\/\d+/.test(l)?"probably":h};b.prototype.canPlayType=function(l){return l==="video/x-vimeo"?"probably":h};p.HTMLVimeoVideoElement=function(l){return new b(l)};
p.HTMLVimeoVideoElement._canPlaySrc=b.prototype._canPlaySrc})(Popcorn,window,document);(function(p,d,k){function c(){if(!o){var s=k.createElement("script");s.src=(d.location.protocol==="file:"?"http:":"")+"//www.youtube.com/iframe_api";var w=k.getElementsByTagName("script")[0];w.parentNode.insertBefore(s,w);o=true}return l}function b(s){q.unshift(s)}function f(s){function w(G){N.unshift(G)}function F(){r=true}function y(){if(!A)return u.duration;var G=u.duration,I=J.getDuration();if(I){if(G!==I){u.duration=I;z.dispatchEvent("durationchange")}}else setTimeout(y,50);return I}function j(G){var I=
{name:"MediaError"};switch(G.data){case 2:I.message="Invalid video parameter.";I.code=MediaError.MEDIA_ERR_ABORTED;break;case 5:I.message="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.";I.code=MediaError.MEDIA_ERR_DECODE;case 100:I.message="Video not found.";I.code=MediaError.MEDIA_ERR_NETWORK;break;case 101:case 150:I.message="Video not usable.";I.code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED;break;default:I.message="Unknown error.";
I.code=5}u.error=I;z.dispatchEvent("error")}function L(G){switch(G.data){case -1:J.mute();J.playVideo();break;case YT.PlayerState.ENDED:if(u.loop){a(0);z.play()}else{u.ended=true;z.dispatchEvent("ended")}break;case YT.PlayerState.PLAYING:if(O){O=false;if(u.autoplay||!u.paused){u.paused=false;w(function(){x()})}else J.pauseVideo();u.muted||J.unMute();u.duration=J.getDuration();u.readyState=z.HAVE_METADATA;z.dispatchEvent("loadedmetadata");P=setInterval(K,h);z.dispatchEvent("loadeddata");u.readyState=
z.HAVE_FUTURE_DATA;z.dispatchEvent("canplay");A=true;for(G=N.length;G--;){N[G]();delete N[G]}u.readyState=z.HAVE_ENOUGH_DATA;z.dispatchEvent("canplaythrough")}else x();break;case YT.PlayerState.PAUSED:if(!D){D=true;clearInterval(Q);z.dispatchEvent("pause")}break;case YT.PlayerState.BUFFERING:u.networkState=z.NETWORK_LOADING;z.dispatchEvent("waiting")}}function E(G){if(z._canPlaySrc(G)){u.src=G;if(c()){if(r)if(r&&J){clearInterval(P);J.stopVideo();J.clearVideo();C.removeChild(H);H=k.createElement("div")}C.appendChild(H);
var I=z._util.parseUri(G).queryKey;delete I.v;u.autoplay=I.autoplay==="1"||u.autoplay;delete I.autoplay;u.loop=I.loop==="1"||u.loop;delete I.loop;I.rel=I.rel||0;I.modestbranding=I.modestbranding||1;I.iv_load_policy=I.iv_load_policy||3;I.showinfo=I.showinfo||0;var R=d.location.protocol==="file:"?"*":d.location.protocol+"//"+d.location.host;I.origin=I.origin||R;I.controls=I.controls||u.controls?2:0;u.controls=I.controls;I.wmode=I.wmode||"transparent";G=m.exec(G)[1];J=new YT.Player(H,{width:"100%",height:"100%",
wmode:I.wmode,videoId:G,playerVars:I,events:{onReady:F,onError:j,onStateChange:L}});u.networkState=z.NETWORK_LOADING;z.dispatchEvent("loadstart");z.dispatchEvent("progress");y()}else b(function(){E(G)})}else{u.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};z.dispatchEvent("error")}}function K(){var G=J.getCurrentTime();if(u.seeking)t(G-u.currentTime)<1&&g();else{u.currentTime=G;if(t(u.currentTime-G)>h){n();g()}}}function a(G){u.currentTime=
G;if(A){n();J.seekTo(G)}else w(function(){n();J.seekTo(G)})}function e(){z.dispatchEvent("timeupdate")}function n(){u.seeking=true;z.dispatchEvent("seeking")}function g(){u.seeking=false;z.dispatchEvent("timeupdate");z.dispatchEvent("seeked");z.dispatchEvent("canplay");z.dispatchEvent("canplaythrough")}function x(){u.ended&&a(0);Q=setInterval(e,z._util.TIMEUPDATE_MS);if(D){D=false;if(u.loop&&!M||!u.loop){M=true;z.dispatchEvent("play")}z.dispatchEvent("playing")}}function v(G){u.volume=G;if(A){J.setVolume(u.volume*
100);z.dispatchEvent("volumechange")}else w(function(){v(u.volume)})}function B(G){u.muted=G;if(A){J[G?"mute":"unMute"]();z.dispatchEvent("volumechange")}else w(function(){B(u.muted)})}if(!d.postMessage)throw"ERROR: HTMLYouTubeVideoElement requires window.postMessage";var z=this,C=typeof s==="string"?k.querySelector(s):s,H=k.createElement("div"),u={src:i,networkState:z.NETWORK_EMPTY,readyState:z.HAVE_NOTHING,seeking:false,autoplay:i,preload:i,controls:false,loop:false,poster:i,volume:1,muted:false,
currentTime:0,duration:NaN,ended:false,paused:true,error:null},r=false,A=false,M=false,J,D=true,N=[],P,Q,O=true;z._eventNamespace=p.guid("HTMLYouTubeVideoElement::");z.parentNode=C;z._util.type="YouTube";z.play=function(){u.paused=false;A?J.playVideo():w(function(){z.play()})};z.pause=function(){u.paused=true;A?J.pauseVideo():w(function(){z.pause()})};Object.defineProperties(z,{src:{get:function(){return u.src},set:function(G){G&&G!==u.src&&E(G)}},autoplay:{get:function(){return u.autoplay},set:function(G){u.autoplay=
z._util.isAttributeSet(G)}},loop:{get:function(){return u.loop},set:function(G){u.loop=z._util.isAttributeSet(G)}},width:{get:function(){return z.parentNode.offsetWidth}},height:{get:function(){return z.parentNode.offsetHeight}},currentTime:{get:function(){return u.currentTime},set:function(G){a(G)}},duration:{get:function(){return y()}},ended:{get:function(){return u.ended}},paused:{get:function(){return u.paused}},seeking:{get:function(){return u.seeking}},readyState:{get:function(){return u.readyState}},
networkState:{get:function(){return u.networkState}},volume:{get:function(){return u.volume/100},set:function(G){if(G<0||G>1)throw"Volume value must be between 0.0 and 1.0";v(G)}},muted:{get:function(){return u.muted},set:function(G){B(z._util.isAttributeSet(G))}},error:{get:function(){return u.error}}})}var h=10,i="",m=/^.*(?:\/|v=)(.{11})/,t=Math.abs,l=false,o=false,q=[];if(d.YT){d.quarantineYT=d.YT;d.YT=null}d.onYouTubeIframeAPIReady=function(){l=true;for(var s=q.length;s--;){q[s]();delete q[s]}};
f.prototype=new p._MediaElementProto;f.prototype.constructor=f;f.prototype._canPlaySrc=function(s){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu).*(?:\/|v=)(.{11})/.test(s)?"probably":i};f.prototype.canPlayType=function(s){return s==="video/x-youtube"?"probably":i};p.HTMLYouTubeVideoElement=function(s){return new f(s)};p.HTMLYouTubeVideoElement._canPlaySrc=f.prototype._canPlaySrc})(Popcorn,window,document);(function(p){var d=function(k,c){var b=0,f=0,h;p.forEach(c.classes,function(i,m){h=[];if(i==="parent")h[0]=document.querySelectorAll("#"+c.target)[0].parentNode;else h=document.querySelectorAll("#"+c.target+" "+i);b=0;for(f=h.length;b<f;b++)h[b].classList.toggle(m)})};p.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(k){k.classes={};k.applyclass=k.applyclass||"";for(var c=k.applyclass.replace(/\s/g,
"").split(","),b=[],f=0,h=c.length;f<h;f++){b=c[f].split(":");if(b[0])k.classes[b[0]]=b[1]||""}},start:d,end:d})})(Popcorn);(function(p){p.plugin("code",function(d){var k=false,c=this,b=function(){var f=function(h){return function(i,m){var t=function(){k&&i.call(c,m);k&&h(t)};t()}};return window.webkitRequestAnimationFrame?f(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?f(window.mozRequestAnimationFrame):f(function(h){window.setTimeout(h,16)})}();if(!d.onStart||typeof d.onStart!=="function")d.onStart=p.nop;if(d.onEnd&&typeof d.onEnd!=="function")d.onEnd=undefined;if(d.onFrame&&typeof d.onFrame!==
"function")d.onFrame=undefined;return{start:function(f,h){h.onStart.call(c,h);if(h.onFrame){k=true;b(h.onFrame,h)}},end:function(f,h){if(h.onFrame)k=false;h.onEnd&&h.onEnd.call(c,h)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",
optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(p,d){var k={};p.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},
preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(c){function b(){function l(g){c._key=g.api.getId();c._changeView=function(x){c.aid?x.pageSet.showAnnotation(x.api.getAnnotation(c.aid)):x.api.setCurrentPage(c.page)}}function o(){k[c._key]={num:1,id:c._containerId};h.loaded=true}h.loaded=false;var q=c.url.replace(/\.html$/,".js"),
s=c.target,w=d.getElementById(s),F=d.createElement("div"),y=p.position(w),j=c.width||y.width;y=c.height||y.height;var L=c.sidebar||true,E=c.text||true,K=c.pdf||true,a=c.showAnnotations||true,e=c.zoom||700,n=c.search||true;if(!function(g){var x=false;p.forEach(h.viewers,function(v){if(v.api.getSchema().canonicalURL===g){l(v);v=k[c._key];c._containerId=v.id;v.num+=1;x=true;h.loaded=true}});return x}(c.url)){F.id=c._containerId=p.guid(s);s="#"+F.id;w.appendChild(F);i.trigger("documentready");h.load(q,
{width:j,height:y,sidebar:L,text:E,pdf:K,showAnnotations:a,zoom:e,search:n,container:s,afterLoad:c.page||c.aid?function(g){l(g);c._changeView(g);F.style.visibility="hidden";g.elements.pages.hide();o()}:function(g){l(g);o();F.style.visibility="hidden";g.elements.pages.hide()}})}}function f(){window.DV.loaded?b():setTimeout(f,25)}var h=window.DV=window.DV||{},i=this;if(h.loading)f();else{h.loading=true;h.recordHit="//www.documentcloud.org/pixel.gif";var m=d.createElement("link"),t=d.getElementsByTagName("head")[0];
m.rel="stylesheet";m.type="text/css";m.media="screen";m.href="//s3.documentcloud.org/viewer/viewer-datauri.css";t.appendChild(m);h.loaded=false;p.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){h.loading=false;b()})}c.toString=function(){return c.src||c._natives.manifest.options.src["default"]}},start:function(c,b){var f=d.getElementById(b._containerId),h=DV.viewers[b._key];(b.page||b.aid)&&h&&b._changeView(h);if(f&&h){f.style.visibility="visible";h.elements.pages.show()}},end:function(c,
b){var f=d.getElementById(b._containerId);if(f&&DV.viewers[b._key]){f.style.visibility="hidden";DV.viewers[b._key].elements.pages.hide()}},_teardown:function(c){var b=d.getElementById(c._containerId);if((c=c._key)&&DV.viewers[c]&&--k[c].num===0){for(DV.viewers[c].api.unload();b.hasChildNodes();)b.removeChild(b.lastChild);b.parentNode.removeChild(b)}}})})(Popcorn,window.document);(function(p){var d=0;p.plugin("flickr",function(k){var c,b=document.getElementById(k.target),f,h,i,m,t=k.numberofimages||4,l=k.height||"50px",o=k.width||"50px",q=k.padding||"5px",s=k.border||"0px";c=document.createElement("div");c.id="flickr"+d;c.style.width="100%";c.style.height="100%";c.style.display="none";d++;b&&b.appendChild(c);var w=function(){if(f)setTimeout(function(){w()},5);else{h="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";h+="username="+k.username+"&api_key="+
k.apikey+"&format=json&jsoncallback=flickr";p.getJSONP(h,function(y){f=y.user.nsid;F()})}},F=function(){h="http://api.flickr.com/services/feeds/photos_public.gne?";if(f)h+="id="+f+"&";if(k.tags)h+="tags="+k.tags+"&";h+="lang=en-us&format=json&jsoncallback=flickr";p.xhr.getJSONP(h,function(y){var j=document.createElement("div");j.innerHTML="<p style='padding:"+q+";'>"+y.title+"<p/>";p.forEach(y.items,function(L,E){if(E<t){i=document.createElement("a");i.setAttribute("href",L.link);i.setAttribute("target",
"_blank");m=document.createElement("img");m.setAttribute("src",L.media.m);m.setAttribute("height",l);m.setAttribute("width",o);m.setAttribute("style","border:"+s+";padding:"+q);i.appendChild(m);j.appendChild(i)}else return false});c.appendChild(j)})};if(k.username&&k.apikey)w();else{f=k.userid;F()}k.toString=function(){return k.tags||k.username||"Flickr"};return{start:function(){c.style.display="inline"},end:function(){c.style.display="none"},_teardown:function(y){document.getElementById(y.target)&&
document.getElementById(y.target).removeChild(c)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",
label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(p){p.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(d){var k=p.dom.find(d.target);d._container=document.createElement("div");d._container.style.display="none";d._container.innerHTML=d.text;k.appendChild(d._container)},
start:function(d,k){k._container.style.display="inline"},end:function(d,k){k._container.style.display="none"},_teardown:function(d){var k=p.dom.find(d.target);k&&k.removeChild(d._container)}})})(Popcorn);(function(p){var d=1,k=false;p.plugin("googlefeed",function(c){var b=function(){var m=false,t=0,l=document.getElementsByTagName("link"),o=l.length,q=document.head||document.getElementsByTagName("head")[0],s=document.createElement("link");if(window.GFdynamicFeedControl)k=true;else p.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){k=true});for(;t<o;t++)if(l[t].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css")m=true;if(!m){s.type=
"text/css";s.rel="stylesheet";s.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";q.insertBefore(s,q.firstChild)}};window.google?b():p.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){b()}})});var f=document.createElement("div"),h=document.getElementById(c.target),i=function(){if(k)c.feed=new GFdynamicFeedControl(c.url,f,{vertical:c.orientation.toLowerCase()==="vertical"?true:false,horizontal:c.orientation.toLowerCase()==="horizontal"?
true:false,title:c.title=c.title||"Blog"});else setTimeout(function(){i()},5)};if(!c.orientation||c.orientation.toLowerCase()!=="vertical"&&c.orientation.toLowerCase()!=="horizontal")c.orientation="vertical";f.style.display="none";f.id="_feed"+d;f.style.width="100%";f.style.height="100%";d++;h&&h.appendChild(f);i();c.toString=function(){return c.url||c._natives.manifest.options.url["default"]};return{start:function(){f.setAttribute("style","display:inline")},end:function(){f.setAttribute("style",
"display:none")},_teardown:function(m){document.getElementById(m.target)&&document.getElementById(m.target).removeChild(f);delete m.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",
label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);var googleCallback;
(function(p){function d(i,m,t){i=i.type?i.type.toUpperCase():"HYBRID";var l;if(i==="STAMEN-WATERCOLOR"||i==="STAMEN-TERRAIN"||i==="STAMEN-TONER")l=i.replace("STAMEN-","").toLowerCase();t=new google.maps.Map(t,{mapTypeId:l?l:google.maps.MapTypeId[i],mapTypeControlOptions:{mapTypeIds:[]}});l&&t.mapTypes.set(l,new google.maps.StamenMapType(l));t.getDiv().style.display="none";return t}var k=1,c=false,b=false,f,h;googleCallback=function(i){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&
google.maps.LatLng){f=new google.maps.Geocoder;p.getScript("//maps.stamen.com/js/tile.stamen.js",function(){b=true})}else setTimeout(function(){googleCallback(i)},1)};h=function(){if(document.body){c=true;p.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else setTimeout(function(){h()},1)};p.plugin("googlemap",function(i){var m,t,l,o=document.getElementById(i.target);i.type=i.type||"ROADMAP";i.zoom=i.zoom||1;i.lat=i.lat||0;i.lng=i.lng||0;c||h();m=document.createElement("div");
m.id="actualmap"+k;m.style.width=i.width||"100%";m.style.height=i.height?i.height:o&&o.clientHeight?o.clientHeight+"px":"100%";k++;o&&o.appendChild(m);var q=function(){if(b){if(m)if(i.location)f.geocode({address:i.location},function(s,w){if(m&&w===google.maps.GeocoderStatus.OK){i.lat=s[0].geometry.location.lat();i.lng=s[0].geometry.location.lng();l=new google.maps.LatLng(i.lat,i.lng);t=d(i,l,m)}});else{l=new google.maps.LatLng(i.lat,i.lng);t=d(i,l,m)}}else setTimeout(function(){q()},5)};q();i.toString=
function(){return i.location||(i.lat&&i.lng?i.lat+", "+i.lng:i._natives.manifest.options.location["default"])};return{start:function(s,w){var F=this,y,j=function(){if(t){w._map=t;t.getDiv().style.display="block";google.maps.event.trigger(t,"resize");t.setCenter(l);if(w.zoom&&typeof w.zoom!=="number")w.zoom=+w.zoom;t.setZoom(w.zoom);if(w.heading&&typeof w.heading!=="number")w.heading=+w.heading;if(w.pitch&&typeof w.pitch!=="number")w.pitch=+w.pitch;if(w.type==="STREETVIEW"){t.setStreetView(y=new google.maps.StreetViewPanorama(m,
{position:l,pov:{heading:w.heading=w.heading||0,pitch:w.pitch=w.pitch||0,zoom:w.zoom}}));var L=function(x,v){var B=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var z=F.media.currentTime;if(typeof w.tween==="object"){for(var C=0,H=x.length;C<H;C++){var u=x[C];if(z>=u.interval*(C+1)/1E3&&(z<=u.interval*(C+2)/1E3||z>=u.interval*H/1E3)){n.setPosition(new google.maps.LatLng(u.position.lat,u.position.lng));n.setPov({heading:u.pov.heading||B(u,x[C+1])||0,zoom:u.pov.zoom||0,pitch:u.pov.pitch||
0})}}L(x,x[0].interval)}else{C=0;for(H=x.length;C<H;C++){u=w.interval;if(z>=u*(C+1)/1E3&&(z<=u*(C+2)/1E3||z>=u*H/1E3)){E.setPov({heading:B(x[C],x[C+1])||0,zoom:w.zoom,pitch:w.pitch||0});E.setPosition(K[C])}}L(K,w.interval)}},v)};if(w.location&&typeof w.tween==="string"){var E=y,K=[],a=new google.maps.DirectionsService,e=new google.maps.DirectionsRenderer(E);a.route({origin:w.location,destination:w.tween,travelMode:google.maps.TravelMode.DRIVING},function(x,v){if(v==google.maps.DirectionsStatus.OK){e.setDirections(x);
for(var B=x.routes[0].overview_path,z=0,C=B.length;z<C;z++)K.push(new google.maps.LatLng(B[z].lat(),B[z].lng()));w.interval=w.interval||1E3;L(K,10)}})}else if(typeof w.tween==="object"){var n=y;a=0;for(var g=w.tween.length;a<g;a++){w.tween[a].interval=w.tween[a].interval||1E3;L(w.tween,10)}}}w.onmaploaded&&w.onmaploaded(w,t)}else setTimeout(function(){j()},13)};j()},end:function(){if(t)t.getDiv().style.display="none"},_teardown:function(s){var w=document.getElementById(s.target);w&&w.removeChild(m);
m=t=l=null;s._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",
type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(p){function d(b){function f(){var t=b.getBoundingClientRect(),l=i.getBoundingClientRect();if(l.left!==t.left)i.style.left=t.left+"px";if(l.top!==t.top)i.style.top=t.top+"px"}var h=-1,i=document.createElement("div"),m=getComputedStyle(b).zIndex;i.setAttribute("data-popcorn-helper-container",true);i.style.position="absolute";i.style.zIndex=isNaN(m)?k:m+1;document.body.appendChild(i);return{element:i,start:function(){h=setInterval(f,c)},stop:function(){clearInterval(h);h=-1},destroy:function(){document.body.removeChild(i);
h!==-1&&clearInterval(h)}}}var k=2E3,c=10;p.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",
optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(b){var f=document.createElement("img"),h=document.getElementById(b.target);b.anchor=document.createElement("a");b.anchor.style.position="relative";b.anchor.style.textDecoration="none";b.anchor.style.display="none";if(h)if(["VIDEO","AUDIO"].indexOf(h.nodeName)>-1){b.trackedContainer=d(h);b.trackedContainer.element.appendChild(b.anchor)}else h&&h.appendChild(b.anchor);
f.addEventListener("load",function(){f.style.borderStyle="none";b.anchor.href=b.href||b.src||"#";b.anchor.target="_blank";var i,m;f.style.height=h.style.height;f.style.width=h.style.width;b.anchor.appendChild(f);if(b.text){i=f.height/12+"px";m=document.createElement("div");p.extend(m.style,{color:"black",fontSize:i,fontWeight:"bold",position:"relative",textAlign:"center",width:f.style.width||f.width+"px",zIndex:"10"});m.innerHTML=b.text||"";m.style.top=(f.style.height.replace("px","")||f.height)/
2-m.offsetHeight/2+"px";b.anchor.insertBefore(m,f)}},false);f.src=b.src;b.toString=function(){var i=b.src||b._natives.manifest.options.src["default"],m=i.replace(/.*\//g,"");return m.length?m:i}},start:function(b,f){f.anchor.style.display="inline";f.trackedContainer&&f.trackedContainer.start()},end:function(b,f){f.anchor.style.display="none";f.trackedContainer&&f.trackedContainer.stop()},_teardown:function(b){if(b.trackedContainer)b.trackedContainer.destroy();else b.anchor.parentNode&&b.anchor.parentNode.removeChild(b.anchor)}})})(Popcorn);(function(p){var d=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,k={},c={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(k,void 0,{get:function(){return c[void 0]},set:function(b){c[void 0]=b}});p.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},
caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(b){function f(){function o(){if(m!==
"HTML5"&&!window.Popcorn[m])setTimeout(function(){o()},300);else{b.id=b._container.id;b._container.style.width=b.width+"px";b._container.style.height=b.height+"px";b.popcorn=p.smart("#"+b.id,b.source);m==="HTML5"&&b.popcorn.controls(true);b._container.style.width="0px";b._container.style.height="0px";b._container.style.visibility="hidden";b._container.style.overflow="hidden"}}if(m!=="HTML5"&&!window.Popcorn[m]&&!k[m]){k[m]=true;p.getScript("http://popcornjs.org/code/players/"+m+"/popcorn."+m+".js",
function(){o()})}else o()}function h(){window.Popcorn.player?f():setTimeout(function(){h()},300)}var i=document.getElementById(b.target)||{},m,t,l;if(t=d.exec(b.source)){m=t[1];if(m==="youtu")m="youtube"}else m="HTML5";b._type=m;b._container=document.createElement("div");t=b._container;t.id="mediaSpawnerdiv-"+p.guid();b.width=b.width||400;b.height=b.height||200;if(b.caption){l=document.createElement("div");l.innerHTML=b.caption;l.style.display="none";b._capCont=l;t.appendChild(l)}i&&i.appendChild(t);
if(!window.Popcorn.player&&!k.module){k.module=true;p.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",h)}else h();b.toString=function(){return b.source||b._natives.manifest.options.source["default"]}},start:function(b,f){if(f._capCont)f._capCont.style.display="";f._container.style.width=f.width+"px";f._container.style.height=f.height+"px";f._container.style.visibility="visible";f._container.style.overflow="visible";f.autoplay&&f.popcorn.play()},end:function(b,f){if(f._capCont)f._capCont.style.display=
"none";f._container.style.width="0px";f._container.style.height="0px";f._container.style.visibility="hidden";f._container.style.overflow="hidden";f.popcorn.pause()},_teardown:function(b){b.popcorn&&b.popcorn.destory&&b.popcorn.destroy();document.getElementById(b.target)&&document.getElementById(b.target).removeChild(b._container)}})})(Popcorn,this);(function(p){p.plugin("mustache",function(d){var k,c,b,f;p.getScript("http://mustache.github.com/extras/mustache.js");var h=!!d.dynamic,i=typeof d.template,m=typeof d.data,t=document.getElementById(d.target);d.container=t||document.createElement("div");if(i==="function")if(h)b=d.template;else f=d.template(d);else f=i==="string"?d.template:"";if(m==="function")if(h)k=d.data;else c=d.data(d);else c=m==="string"?JSON.parse(d.data):m==="object"?d.data:"";return{start:function(l,o){var q=function(){if(window.Mustache){if(k)c=
k(o);if(b)f=b(o);var s=Mustache.to_html(f,c).replace(/^\s*/mg,"");o.container.innerHTML=s}else setTimeout(function(){q()},10)};q()},end:function(l,o){o.container.innerHTML=""},_teardown:function(){k=c=b=f=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",
label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(p){function d(c,b){if(c.map)c.map.div.style.display=b;else setTimeout(function(){d(c,b)},10)}var k=1;p.plugin("openmap",function(c){var b,f,h,i,m,t,l,o,q=document.getElementById(c.target);b=document.createElement("div");b.id="openmapdiv"+k;b.style.width="100%";b.style.height="100%";k++;q&&q.appendChild(b);o=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(c.location){location=new OpenLayers.LonLat(0,0);p.getJSONP("//tinygeocoder.com/create-api.php?q="+c.location+"&callback=jsonp",
function(w){f=new OpenLayers.LonLat(w[1],w[0])})}else f=new OpenLayers.LonLat(c.lng,c.lat);c.type=c.type||"ROADMAP";switch(c.type){case "SATELLITE":c.map=new OpenLayers.Map({div:b,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var s=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});c.map.addLayer(s);i=new OpenLayers.Projection("EPSG:4326");h=new OpenLayers.Projection("EPSG:4326");break;case "TERRAIN":i=new OpenLayers.Projection("EPSG:4326");
h=new OpenLayers.Projection("EPSG:4326");c.map=new OpenLayers.Map({div:b,projection:h});s=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});c.map.addLayer(s);break;case "STAMEN-TONER":case "STAMEN-WATERCOLOR":case "STAMEN-TERRAIN":s=c.type.replace("STAMEN-","").toLowerCase();s=new OpenLayers.Layer.Stamen(s);i=new OpenLayers.Projection("EPSG:4326");h=new OpenLayers.Projection("EPSG:900913");f=f.transform(i,h);c.map=new OpenLayers.Map({div:b,projection:h,
displayProjection:i,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});c.map.addLayer(s);break;default:h=new OpenLayers.Projection("EPSG:900913");i=new OpenLayers.Projection("EPSG:4326");f=f.transform(i,h);c.map=new OpenLayers.Map({div:b,projection:h,displayProjection:i});s=new OpenLayers.Layer.OSM;c.map.addLayer(s)}if(c.map){c.map.setCenter(f,c.zoom||10);c.map.div.style.display="none"}}else setTimeout(function(){o()},50)};o();return{_setup:function(s){window.OpenLayers||
p.getScript("//openlayers.org/api/OpenLayers.js",function(){p.getScript("//maps.stamen.com/js/tile.stamen.js")});var w=function(){if(s.map){s.zoom=s.zoom||2;if(s.zoom&&typeof s.zoom!=="number")s.zoom=+s.zoom;s.map.setCenter(f,s.zoom);if(s.markers){var F=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),y=function(g){clickedFeature=g.feature;if(clickedFeature.attributes.text){l=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),
new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){t.unselect(this.feature)});clickedFeature.popup=l;l.feature=clickedFeature;s.map.addPopup(l)}},j=function(g){feature=g.feature;if(feature.popup){l.feature=null;s.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},L=function(g){p.getJSONP("//tinygeocoder.com/create-api.php?q="+g.location+"&callback=jsonp",function(x){x=(new OpenLayers.Geometry.Point(x[1],x[0])).transform(i,h);var v=OpenLayers.Util.extend({},
F);if(!g.size||isNaN(g.size))g.size=14;v.pointRadius=g.size;v.graphicOpacity=1;v.externalGraphic=g.icon;x=new OpenLayers.Feature.Vector(x,null,v);if(g.text)x.attributes={text:g.text};m.addFeatures([x])})};m=new OpenLayers.Layer.Vector("Point Layer",{style:F});s.map.addLayer(m);for(var E=0,K=s.markers.length;E<K;E++){var a=s.markers[E];if(a.text)if(!t){t=new OpenLayers.Control.SelectFeature(m);s.map.addControl(t);t.activate();m.events.on({featureselected:y,featureunselected:j})}if(a.location)L(a);
else{var e=(new OpenLayers.Geometry.Point(a.lng,a.lat)).transform(i,h),n=OpenLayers.Util.extend({},F);if(!a.size||isNaN(a.size))a.size=14;n.pointRadius=a.size;n.graphicOpacity=1;n.externalGraphic=a.icon;e=new OpenLayers.Feature.Vector(e,null,n);if(a.text)e.attributes={text:a.text};m.addFeatures([e])}}}}else setTimeout(function(){w()},13)};w()},start:function(s,w){d(w,"block")},end:function(s,w){d(w,"none")},_teardown:function(){q&&q.removeChild(b);b=map=f=h=i=m=t=l=null}}},{about:{name:"Popcorn OpenMap Plugin",
version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location",
"default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(p){p=p.target;if(p.nodeName==="A"||p.parentNode&&p.parentNode.nodeName==="A")Popcorn.instances.forEach(function(d){d.options.pauseOnLinkClicked&&d.pause()})},false);(function(p){var d=0,k=function(c,b){var f=c.container=document.createElement("div"),h=f.style,i=c.media,m=function(){var t=c.position();h.fontSize="18px";h.width=i.offsetWidth+"px";h.top=t.top+i.offsetHeight-f.offsetHeight-40+"px";h.left=t.left+"px";setTimeout(m,10)};f.id=b||p.guid();h.position="absolute";h.color="white";h.textShadow="black 2px 2px 6px";h.fontWeight="bold";h.textAlign="center";m();c.media.parentNode.appendChild(f);return f};p.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",
version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(c){var b=document.createElement("div");b.id="subtitle-"+d++;b.style.display="none";!this.container&&(!c.target||c.target==="subtitle-container")&&k(this);c.container=c.target&&c.target!=="subtitle-container"?document.getElementById(c.target)||
k(this,c.target):this.container;document.getElementById(c.container.id)&&document.getElementById(c.container.id).appendChild(b);c.innerContainer=b;c.showSubtitle=function(){c.innerContainer.innerHTML=c.text||""}},start:function(c,b){b.innerContainer.style.display="inline";b.showSubtitle(b,b.text)},end:function(c,b){b.innerContainer.style.display="none";b.innerContainer.innerHTML=""},_teardown:function(c){c.container.removeChild(c.innerContainer)}})})(Popcorn);(function(p){function d(b){return String(b).replace(/&(?!\w+;)|[<>"']/g,function(f){return c[f]||f})}function k(b,f){var h=b.container=document.createElement("div"),i=h.style,m=b.media,t=function(){var l=b.position();i.fontSize="18px";i.width=m.offsetWidth+"px";i.top=l.top+m.offsetHeight-h.offsetHeight-40+"px";i.left=l.left+"px";setTimeout(t,10)};h.id=f||"";i.position="absolute";i.color="white";i.textShadow="black 2px 2px 6px";i.fontWeight="bold";i.textAlign="center";t();b.media.parentNode.appendChild(h);
return h}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};p.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(b){var f,h,i=b._container=document.createElement("div");
i.style.display="none";if(b.target)if(f=p.dom.find(b.target)){if(["VIDEO","AUDIO"].indexOf(f.nodeName)>-1)f=k(this,b.target+"-overlay")}else f=k(this,b.target);else f=this.container?this.container:k(this);b._target=f;h=b.escape?d(b.text):b.text;h=b.multiline?h.replace(/\r?\n/gm,"<br>"):h;i.innerHTML=h||"";f.appendChild(i);b.toString=function(){return b.text||b._natives.manifest.options.text["default"]}},start:function(b,f){f._container.style.display="inline"},end:function(b,f){f._container.style.display=
"none"},_teardown:function(b){var f=b._target;f&&f.removeChild(b._container)}})})(Popcorn);(function(p){var d=1;p.plugin("timeline",function(k){var c=document.getElementById(k.target),b=document.createElement("div"),f,h=true;if(c&&!c.firstChild){c.appendChild(f=document.createElement("div"));f.style.width="inherit";f.style.height="inherit";f.style.overflow="auto"}else f=c.firstChild;b.style.display="none";b.id="timelineDiv"+d;k.direction=k.direction||"up";if(k.direction.toLowerCase()==="down")h=false;if(c&&f)h?f.insertBefore(b,f.firstChild):f.appendChild(b);d++;b.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+
k.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+k.text+"</span><br />"+k.innerHTML;return{start:function(i,m){b.style.display="block";if(m.direction==="down")f.scrollTop=f.scrollHeight},end:function(){b.style.display="none"},_teardown:function(){f&&b&&f.removeChild(b)&&!f.firstChild&&c.removeChild(f)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},
end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(p){var d=false;p.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width",
"default":"250",optional:true}}},_setup:function(k){if(!window.TWTR&&!d){d=true;p.getScript("//widgets.twimg.com/j/2/widget.js")}var c=document.getElementById(k.target);k.container=document.createElement("div");k.container.setAttribute("id",p.guid());k.container.style.display="none";c&&c.appendChild(k.container);var b=k.src||"";c=k.width||250;var f=k.height||200,h=/^@/.test(b),i={version:2,id:k.container.getAttribute("id"),rpp:30,width:c,height:f,interval:6E3,theme:{shell:{background:"#ffffff",color:"#000000"},
tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},m=function(t){if(window.TWTR)if(h){i.type="profile";(new TWTR.Widget(i)).render().setUser(b).start()}else{i.type="search";i.search=b;i.subject=b;(new TWTR.Widget(i)).render().start()}else setTimeout(function(){m(t)},1)};k.toString=function(){return k.src||k._natives.manifest.options.src["default"]};m(this)},start:function(k,
c){c.container.style.display="inline"},end:function(k,c){c.container.style.display="none"},_teardown:function(k){document.getElementById(k.target)&&document.getElementById(k.target).removeChild(k.container)}})})(Popcorn);(function(p){p.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(d){var k=document.getElementById(d.target);d.src=d.src.replace(/^(https?:)?(\/\/)?/,
"//");d._iframe=document.createElement("iframe");d._iframe.setAttribute("width","100%");d._iframe.setAttribute("height","100%");d._iframe.id=d.id;d._iframe.src=d.src;d._iframe.style.display="none";k&&k.appendChild(d._iframe)},start:function(d,k){k._iframe.src=k.src;k._iframe.style.display="inline"},end:function(d,k){k._iframe.style.display="none"},_teardown:function(d){document.getElementById(d.target)&&document.getElementById(d.target).removeChild(d._iframe)}})})(Popcorn);var wikiCallback;
(function(p){p.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},
numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(d){var k,c=p.guid();if(!d.lang)d.lang="en";d.numberofwords=d.numberofwords||200;window["wikiCallback"+c]=function(b){d._link=document.createElement("a");d._link.setAttribute("href",d.src);d._link.setAttribute("target","_blank");d._link.innerHTML=d.title||b.parse.displaytitle;d._desc=document.createElement("p");k=b.parse.text["*"].substr(b.parse.text["*"].indexOf("<p>"));
k=k.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");k=k.split(" ");d._desc.innerHTML=k.slice(0,k.length>=d.numberofwords?d.numberofwords:k.length).join(" ")+" ...";d._fired=true};d.src&&p.getScript("//"+d.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+d.src.slice(d.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+c);d.toString=function(){return d.src||d._natives.manifest.options.src["default"]}},start:function(d,k){var c=function(){if(k._fired){if(k._link&&
k._desc)if(document.getElementById(k.target)){document.getElementById(k.target).appendChild(k._link);document.getElementById(k.target).appendChild(k._desc);k._added=true}}else setTimeout(function(){c()},13)};c()},end:function(d,k){if(k._added){document.getElementById(k.target).removeChild(k._link);document.getElementById(k.target).removeChild(k._desc)}},_teardown:function(d){if(d._added){d._link.parentNode&&document.getElementById(d.target).removeChild(d._link);d._desc.parentNode&&document.getElementById(d.target).removeChild(d._desc);
delete d.target}}})})(Popcorn);(function(p){var d={},k=0,c=document.createElement("span"),b=["webkit","Moz","ms","O",""],f=["Transform","TransitionDuration","TransitionTimingFunction"],h={},i;document.getElementsByTagName("head")[0].appendChild(c);for(var m=0,t=f.length;m<t;m++)for(var l=0,o=b.length;l<o;l++){i=b[l]+f[m];if(i in c.style){h[f[m].toLowerCase()]=i;break}}document.getElementsByTagName("head")[0].appendChild(c);p.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",
label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(q){q._duration=q.end-q.start;var s;if(!(s=d[q.target])){s=q.target;d[s]=document.createElement("div");var w=document.getElementById(s);w&&w.appendChild(d[s]);d[s].style.height="100%";d[s].style.position="relative";s=d[s]}q._container=s;q.word=document.createElement("span");
q.word.style.position="absolute";q.word.style.whiteSpace="nowrap";q.word.style.opacity=0;q.word.style.MozTransitionProperty="opacity, -moz-transform";q.word.style.webkitTransitionProperty="opacity, -webkit-transform";q.word.style.OTransitionProperty="opacity, -o-transform";q.word.style.transitionProperty="opacity, transform";q.word.style[h.transitionduration]="1s, "+q._duration+"s";q.word.style[h.transitiontimingfunction]="linear";q.word.innerHTML=q.text;q.word.style.color=q.color||"black"},start:function(q,
s){s._container.appendChild(s.word);s.word.style[h.transform]="";s.word.style.fontSize=~~(30+20*Math.random())+"px";k%=s._container.offsetWidth-s.word.offsetWidth;s.word.style.left=k+"px";k+=s.word.offsetWidth+10;s.word.style[h.transform]="translateY("+(s._container.offsetHeight-s.word.offsetHeight)+"px)";s.word.style.opacity=1;setTimeout(function(){s.word.style.opacity=0},(s.end-s.start-1||1)*1E3)},end:function(q,s){s.word.style.opacity=0},_teardown:function(q){var s=document.getElementById(q.target);
q.word.parentNode&&q._container.removeChild(q.word);d[q.target]&&!d[q.target].childElementCount&&s&&s.removeChild(d[q.target])&&delete d[q.target]}})})(Popcorn);(function(p){p.parser("parseJSON","JSON",function(d){var k={title:"",remote:"",data:[]};p.forEach(d.data,function(c){k.data.push(c)});return k})})(Popcorn);(function(p){p.parser("parseSBV",function(d){var k={title:"",remote:"",data:[]},c=[],b=0,f=0,h=function(q){q=q.split(":");var s=q.length-1,w;try{w=parseInt(q[s-1],10)*60+parseFloat(q[s],10);if(s===2)w+=parseInt(q[0],10)*3600}catch(F){throw"Bad cue";}return w},i=function(q,s){var w={};w[q]=s;return w};d=d.text.split(/(?:\r\n|\r|\n)/gm);for(f=d.length;b<f;){var m={},t=[],l=d[b++].split(",");try{m.start=h(l[0]);for(m.end=h(l[1]);b<f&&d[b];)t.push(d[b++]);m.text=t.join("<br />");c.push(i("subtitle",m))}catch(o){for(;b<
f&&d[b];)b++}for(;b<f&&!d[b];)b++}k.data=c;return k})})(Popcorn);(function(p){function d(c,b){var f={};f[c]=b;return f}function k(c){c=c.split(":");try{var b=c[2].split(",");if(b.length===1)b=c[2].split(".");return parseFloat(c[0],10)*3600+parseFloat(c[1],10)*60+parseFloat(b[0],10)+parseFloat(b[1],10)/1E3}catch(f){return 0}}p.parser("parseSRT",function(c){var b={title:"",remote:"",data:[]},f=[],h=0,i=0,m,t,l,o;c=c.text.split(/(?:\r\n|\r|\n)/gm);for(h=c.length-1;h>=0&&!c[h];)h--;l=h+1;for(h=0;h<l;h++){o={};t=[];o.id=parseInt(c[h++],10);m=c[h++].split(/[\t ]*--\>[\t ]*/);
o.start=k(m[0]);i=m[1].indexOf(" ");if(i!==-1)m[1]=m[1].substr(0,i);for(o.end=k(m[1]);h<l&&c[h];)t.push(c[h++]);o.text=t.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");o.text=o.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");o.text=o.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");o.text=o.text.replace(/\\N/gi,"<br />");f.push(d("subtitle",o))}b.data=f;return b})})(Popcorn);(function(p){function d(b,f){var h=b.substr(10).split(","),i;i={start:k(h[f.start]),end:k(h[f.end])};if(i.start===-1||i.end===-1)throw"Invalid time";var m=q.call(l,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),t=m.replace,l;l=h.length;q=[];for(var o=f.text;o<l;o++)q.push(h[o]);l=q.join(",");var q=l.replace;i.text=t.call(m,/\\N/gi,"<br />");return i}function k(b){var f=b.split(":");if(b.length!==10||f.length<3)return-1;return parseInt(f[0],10)*3600+parseInt(f[1],10)*60+parseFloat(f[2],10)}function c(b,
f){var h={};h[b]=f;return h}p.parser("parseSSA",function(b){var f={title:"",remote:"",data:[]},h=[],i=0,m;b=b.text.split(/(?:\r\n|\r|\n)/gm);for(m=b.length;i<m&&b[i]!=="[Events]";)i++;var t=b[++i].substr(8).split(", "),l={},o,q;q=0;for(o=t.length;q<o;q++)if(t[q]==="Start")l.start=q;else if(t[q]==="End")l.end=q;else if(t[q]==="Text")l.text=q;for(;++i<m&&b[i]&&b[i][0]!=="[";)try{h.push(c("subtitle",d(b[i],l)))}catch(s){}f.data=h;return f})})(Popcorn);(function(p){function d(i,m,t){var l=i.firstChild;i=k(i,t);t=[];for(var o;l;){if(l.nodeType===1)if(l.nodeName==="p")t.push(c(l,m,i));else if(l.nodeName==="div"){o=b(l.getAttribute("begin"));if(o<0)o=m;t.push.apply(t,d(l,o,i))}l=l.nextSibling}return t}function k(i,m){var t=i.getAttribute("region");return t!==null?t:m||""}function c(i,m,t){var l={};l.text=(i.textContent||i.text).replace(f,"").replace(h,"<br />");l.id=i.getAttribute("xml:id")||i.getAttribute("id");l.start=b(i.getAttribute("begin"),m);
l.end=b(i.getAttribute("end"),m);l.target=k(i,t);if(l.end<0){l.end=b(i.getAttribute("duration"),0);if(l.end>=0)l.end+=l.start;else l.end=Number.MAX_VALUE}return{subtitle:l}}function b(i,m){var t;if(!i)return-1;try{return p.util.toSeconds(i)}catch(l){for(var o=i.length-1;o>=0&&i[o]<="9"&&i[o]>="0";)o--;t=o;o=parseFloat(i.substring(0,t));t=i.substring(t);return o*({h:3600,m:60,s:1,ms:0.0010}[t]||-1)+(m||0)}}var f=/^[\s]+|[\s]+$/gm,h=/(?:\r\n|\r|\n)/gm;p.parser("parseTTML",function(i){var m={title:"",
remote:"",data:[]};if(!i.xml||!i.xml.documentElement)return m;i=i.xml.documentElement.firstChild;if(!i)return m;for(;i.nodeName!=="body";)i=i.nextSibling;if(i)m.data=d(i,0);return m})})(Popcorn);(function(p){p.parser("parseTTXT",function(d){var k={title:"",remote:"",data:[]},c=function(m){m=m.split(":");var t=0;try{return parseFloat(m[0],10)*60*60+parseFloat(m[1],10)*60+parseFloat(m[2],10)}catch(l){t=0}return t},b=function(m,t){var l={};l[m]=t;return l};d=d.xml.lastChild.lastChild;for(var f=Number.MAX_VALUE,h=[];d;){if(d.nodeType===1&&d.nodeName==="TextSample"){var i={};i.start=c(d.getAttribute("sampleTime"));i.text=d.getAttribute("text");if(i.text){i.end=f-0.0010;h.push(b("subtitle",i))}f=
i.start}d=d.previousSibling}k.data=h.reverse();return k})})(Popcorn);(function(p){function d(c){var b=c.split(":");c=c.length;var f;if(c!==12&&c!==9)throw"Bad cue";c=b.length-1;try{f=parseInt(b[c-1],10)*60+parseFloat(b[c],10);if(c===2)f+=parseInt(b[0],10)*3600}catch(h){throw"Bad cue";}return f}function k(c,b){var f={};f[c]=b;return f}p.parser("parseVTT",function(c){var b={title:"",remote:"",data:[]},f=[],h=0,i=0,m,t;c=c.text.split(/(?:\r\n|\r|\n)/gm);i=c.length;if(i===0||c[0]!=="WEBVTT")return b;for(h++;h<i;){m=[];try{for(var l=h;l<i&&!c[l];)l++;h=l;var o=c[h++];l=
void 0;var q={};if(!o||o.indexOf("--\>")===-1)throw"Bad cue";l=o.replace(/--\>/," --\> ").split(/[\t ]+/);if(l.length<2)throw"Bad cue";q.id=o;q.start=d(l[0]);q.end=d(l[2]);for(t=q;h<i&&c[h];)m.push(c[h++]);t.text=m.join("<br />");f.push(k("subtitle",t))}catch(s){for(h=h;h<i&&c[h];)h++;h=h}}b.data=f;return b})})(Popcorn);(function(p){p.parser("parseXML","XML",function(d){var k={title:"",remote:"",data:[]},c={},b=function(l){l=l.split(":");if(l.length===1)return parseFloat(l[0],10);else if(l.length===2)return parseFloat(l[0],10)+parseFloat(l[1]/12,10);else if(l.length===3)return parseInt(l[0]*60,10)+parseFloat(l[1],10)+parseFloat(l[2]/12,10);else if(l.length===4)return parseInt(l[0]*3600,10)+parseInt(l[1]*60,10)+parseFloat(l[2],10)+parseFloat(l[3]/12,10)},f=function(l){for(var o={},q=0,s=l.length;q<s;q++){var w=l.item(q).nodeName,
F=l.item(q).nodeValue,y=c[F];if(w==="in")o.start=b(F);else if(w==="out")o.end=b(F);else if(w==="resourceid")for(var j in y){if(y.hasOwnProperty(j))if(!o[j]&&j!=="id")o[j]=y[j]}else o[w]=F}return o},h=function(l,o){var q={};q[l]=o;return q},i=function(l,o,q){var s={};p.extend(s,o,f(l.attributes),{text:l.textContent||l.text});o=l.childNodes;if(o.length<1||o.length===1&&o[0].nodeType===3)if(q)c[s.id]=s;else k.data.push(h(l.nodeName,s));else for(l=0;l<o.length;l++)o[l].nodeType===1&&i(o[l],s,q)};d=d.documentElement.childNodes;
for(var m=0,t=d.length;m<t;m++)if(d[m].nodeType===1)d[m].nodeName==="manifest"?i(d[m],{},true):i(d[m],{},false);return k})})(Popcorn);(function(p,d){d.player("soundcloud",{_canPlayType:function(k,c){return typeof c==="string"&&d.HTMLSoundCloudAudioElement._canPlaySrc(c)&&k.toLowerCase()!=="audio"}});d.soundcloud=function(k,c,b){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'soundcloud'. Please use Popcorn.HTMLSoundCloudAudioElement directly.");var f=d.HTMLSoundCloudAudioElement(k);k=d(f,b);setTimeout(function(){f.src=c},0);return k}})(window,Popcorn);(function(p,d){d.player("vimeo",{_canPlayType:function(k,c){return typeof c==="string"&&d.HTMLVimeoVideoElement._canPlaySrc(c)}});d.vimeo=function(k,c,b){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'vimeo'. Please use Popcorn.HTMLVimeoVideoElement directly.");var f=d.HTMLVimeoVideoElement(k);k=d(f,b);setTimeout(function(){f.src=c},0);return k}})(window,Popcorn);(function(p,d){var k=function(c,b){return typeof b==="string"&&d.HTMLYouTubeVideoElement._canPlaySrc(b)};d.player("youtube",{_canPlayType:k});d.youtube=function(c,b,f){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'youtube'. Please use Popcorn.HTMLYouTubeVideoElement directly.");var h=d.HTMLYouTubeVideoElement(c);c=d(h,f);setTimeout(function(){h.src=b},0);return c};d.youtube.canPlayType=k})(window,Popcorn);
