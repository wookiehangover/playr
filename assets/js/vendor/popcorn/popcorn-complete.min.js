/*
 * popcorn.js version cdef06e
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(p,g){function l(a){K.put.call(this,a)}function e(a){this.parent=a;this.byStart=[{start:-1,end:-1}];this.byEnd=[{start:-1,end:-1}];this.animating=[];this.endIndex=this.startIndex=0;this.previousUpdateTime=-1;Object.defineProperty(this,"count",{get:function(){return this.byStart.length}})}function b(a,f){var n=a.data.trackEvents.byStart,h=a.data.trackEvents.byEnd,w;f&&f._id&&a.data.history.push(f._id);f.start=d.util.toSeconds(f.start,a.options.framerate);f.end=d.util.toSeconds(f.end,a.options.framerate);
for(w=n.length-1;w>=0;w--)if(f.start>=n[w].start){n.splice(w+1,0,f);break}for(n=h.length-1;n>=0;n--)if(f.end>h[n].end){h.splice(n+1,0,f);break}w<=a.data.trackEvents.startIndex&&f.start<=a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.startIndex++;n<=a.data.trackEvents.endIndex&&f.end<a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.endIndex++;if(f.end>a.media.currentTime&&f.start<=a.media.currentTime){f._running=true;a.data.running[f._natives.type].push(f);if(!a.data.disabled[f._natives.type]){f._natives.start.call(a,
null,f);a.emit("trackstart",d.extend({},f,{plugin:f._natives.type,type:"trackstart",track:f}))}}}function c(a,f,n){var h,w,z,t;z=a.data.trackEvents.byStart.length;var A=0,x=0,H=[],y=[],B=[],F=[],D={};for(n=n||{};--z>-1;){h=a.data.trackEvents.byStart[A];w=a.data.trackEvents.byEnd[A];if(!h._id){H.push(h);y.push(w)}if(h._id){h._id!==f&&H.push(h);w._id!==f&&y.push(w);if(h._id===f){x=A;t=h}}A++}z=a.data.trackEvents.animating.length;A=0;if(z)for(;--z>-1;){h=a.data.trackEvents.animating[A];h._id||B.push(h);
h._id&&h._id!==f&&B.push(h);A++}x<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--;x<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--;a.data.trackEvents.byStart=H;a.data.trackEvents.byEnd=y;a.data.trackEvents.animating=B;z=a.data.history.length;for(A=0;A<z;A++)a.data.history[A]!==f&&F.push(a.data.history[A]);a.data.history=F;D.start=t.start;D.end=t.end;if(n&&n.previous){D.start=n.previous.start!==undefined?n.previous.start:D.start;D.end=n.previous.end!==undefined?n.previous.end:
D.end}if(D.end>a.media.currentTime&&D.start<=a.media.currentTime){f=a.data.running[t._natives.type];t._running=false;f.splice(f.indexOf(t),1);if(!a.data.disabled[t._natives.type]){t._natives.end.call(a,null,t);a.emit("trackend",d.extend({},t,{plugin:t._natives.type,type:"trackend",track:t}))}}}function i(a,f){return function(){if(d.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(n){d.plugin.errors.push({plugin:f,thrown:n,source:a.toString()});this.emit("pluginerror",
d.plugin.errors)}}}if(g.addEventListener){var j=Array.prototype,k=Object.prototype,q=j.forEach,m=j.slice,o=k.hasOwnProperty,r=k.toString,s=p.Popcorn,u=[],C=false,v={events:{hash:{},apis:{}}},G=function(){return p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||p.oRequestAnimationFrame||p.msRequestAnimationFrame||function(a){p.setTimeout(a,16)}}(),K={put:function(a){Object.getOwnPropertyNames(a).forEach(function(f){this[f]=a[f]},this)}},d=function(a,f){return new d.p.init(a,
f||null)};d.version="cdef06e";d.isSupported=true;d.instances=[];d.p=d.prototype={init:function(a,f){var n,h=this;if(typeof a==="function")if(g.readyState==="complete")a(g,d);else{u.push(a);if(!C){C=true;var w=function(){g.removeEventListener("DOMContentLoaded",w,false);for(var A=0,x=u.length;A<x;A++)u[A].call(g,d);u=null};g.addEventListener("DOMContentLoaded",w,false)}}else{if(typeof a==="string")try{n=g.querySelector(a)}catch(z){throw Error("Popcorn.js Error: Invalid media element selector: "+a);
}this.media=n||a;n=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[n]=this.media;this.options=d.extend({},f)||{};this.id=this.options.id||d.guid(n);if(d.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:d.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new e(this)};d.instances.push(this);var t=function(){if(h.media.currentTime<
0)h.media.currentTime=0;h.media.removeEventListener("loadedmetadata",t,false);var A,x,H,y,B;A=h.media.duration;A=A!=A?Number.MAX_VALUE:A+1;d.addTrackEvent(h,{start:A,end:A});if(h.options.frameAnimation){h.data.timeUpdate=function(){d.timeUpdate(h,{});d.forEach(d.manifest,function(F,D){if(x=h.data.running[D]){y=x.length;for(var N=0;N<y;N++){H=x[N];(B=H._natives)&&B.frame&&B.frame.call(h,{},H,h.currentTime())}}});h.emit("timeupdate");!h.isDestroyed&&G(h.data.timeUpdate)};!h.isDestroyed&&G(h.data.timeUpdate)}else{h.data.timeUpdate=
function(F){d.timeUpdate(h,F)};h.isDestroyed||h.media.addEventListener("timeupdate",h.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return h.media.error}});h.media.readyState>=1?t():h.media.addEventListener("loadedmetadata",t,false);return this}}};d.p.init.prototype=d.p;d.byId=function(a){for(var f=d.instances,n=f.length,h=0;h<n;h++)if(f[h].id===a)return f[h];return null};d.forEach=function(a,f,n){if(!a||!f)return{};n=n||this;var h,w;if(q&&a.forEach===q)return a.forEach(f,
n);if(r.call(a)==="[object NodeList]"){h=0;for(w=a.length;h<w;h++)f.call(n,a[h],h,a);return a}for(h in a)o.call(a,h)&&f.call(n,a[h],h,a);return a};d.extend=function(a){var f=m.call(arguments,1);d.forEach(f,function(n){for(var h in n)a[h]=n[h]});return a};d.extend(d,{noConflict:function(a){if(a)p.Popcorn=s;return d},error:function(a){throw Error(a);},guid:function(a){d.guid.counter++;return(a?a:"")+(+new Date+d.guid.counter)},sizeOf:function(a){var f=0,n;for(n in a)f++;return f},isArray:Array.isArray||
function(a){return r.call(a)==="[object Array]"},nop:function(){},position:function(a){a=a.getBoundingClientRect();var f={},n=g.documentElement,h=g.body,w,z,t;w=n.clientTop||h.clientTop||0;z=n.clientLeft||h.clientLeft||0;t=p.pageYOffset&&n.scrollTop||h.scrollTop;n=p.pageXOffset&&n.scrollLeft||h.scrollLeft;w=Math.ceil(a.top+t-w);z=Math.ceil(a.left+n-z);for(var A in a)f[A]=Math.round(a[A]);return d.extend({},f,{top:w,left:z})},disable:function(a,f){if(!a.data.disabled[f]){a.data.disabled[f]=true;if(f in
d.registryByName&&a.data.running[f])for(var n=a.data.running[f].length-1,h;n>=0;n--){h=a.data.running[f][n];h._natives.end.call(a,null,h);a.emit("trackend",d.extend({},h,{plugin:h.type,type:"trackend"}))}return a}},enable:function(a,f){if(a.data.disabled[f]){a.data.disabled[f]=false;if(f in d.registryByName&&a.data.running[f])for(var n=a.data.running[f].length-1,h;n>=0;n--){h=a.data.running[f][n];h._natives.start.call(a,null,h);a.emit("trackstart",d.extend({},h,{plugin:h.type,type:"trackstart",track:h}))}return a}},
destroy:function(a){var f=a.data.events,n=a.data.trackEvents,h,w,z,t;for(w in f){h=f[w];for(z in h)delete h[z];f[w]=null}for(t in d.registryByName)d.removePlugin(a,t);n.byStart.length=0;n.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}d.instances.splice(d.instances.indexOf(a),1)}});d.guid.counter=1;d.extend(d.p,function(){var a={};d.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(f){a[f]=function(n){var h;if(typeof this.media[f]==="function"){if(n!=null&&/play|pause/.test(f))this.media.currentTime=d.util.toSeconds(n);this.media[f]();return this}if(n!=null){h=this.media[f];this.media[f]=n;h!==n&&this.emit("attrchange",{attribute:f,previousValue:h,currentValue:n});return this}return this.media[f]}});return a}());d.forEach("enable disable".split(" "),function(a){d.p[a]=function(f){return d[a](this,f)}});d.extend(d.p,{roundTime:function(){return Math.round(this.media.currentTime)},
exec:function(a,f,n){var h=arguments.length,w="trackadded",z,t;try{t=d.util.toSeconds(a)}catch(A){}if(typeof t==="number")a=t;if(typeof a==="number"&&h===2){n=f;f=a;a=d.guid("cue")}else if(h===1)f=-1;else if(z=this.getTrackEvent(a)){d.removeTrackEvent(this,a);w="cuechange";if(typeof a==="string"&&h===2){if(typeof f==="number")n=z._natives.start;if(typeof f==="function"){n=f;f=z.start}}}else if(h>=2){if(typeof f==="string"){try{t=d.util.toSeconds(f)}catch(x){}f=t}if(typeof f==="number")n=n||d.nop();
if(typeof f==="function"){n=f;f=-1}}h={id:a,start:f,end:f+1,_running:false,_natives:{start:n||d.nop,end:d.nop,type:"cue"}};d.addTrackEvent(this,h);if(w==="cuechange")this.emit(w,d.extend({},h,{id:a,type:w,previousValue:{time:z.start,fn:z._natives.start},currentValue:{time:f,fn:n||d.nop},track:z}));return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;
this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return d.position(this.media)},toggle:function(a){return d[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,f){if(d.isArray(a)){d.forEach(a,function(n){for(var h in n)this.defaults(h,n[h])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});d.extend(this.options.defaults[a],f);return this}});
d.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};d.Events.Natives=d.Events.UIEvents+" "+d.Events.MouseEvents+" "+d.Events.Events;v.events.apiTypes=["UIEvents","MouseEvents",
"Events"];(function(a,f){for(var n=v.events.apiTypes,h=a.Natives.split(/\s+/g),w=0,z=h.length;w<z;w++)f.hash[h[w]]=true;n.forEach(function(t){f.apis[t]={};for(var A=a[t].split(/\s+/g),x=A.length,H=0;H<x;H++)f.apis[t][A[H]]=true})})(d.Events,v.events);d.events={isNative:function(a){return!!v.events.hash[a]},getInterface:function(a){if(!d.events.isNative(a))return false;var f=v.events,n=f.apiTypes;f=f.apis;for(var h=0,w=n.length,z,t;h<w;h++){t=n[h];if(f[t][a]){z=t;break}}return z},all:d.Events.Natives.split(/\s+/g),
fn:{trigger:function(a,f){var n,h=this.data.events[a];if(h){if(n=d.events.getInterface(a)){n=g.createEvent(n);n.initEvent(a,true,true,p,1);this.media.dispatchEvent(n);return this}for(n=h.slice();n.length;)n.shift().call(this,f)}return this},listen:function(a,f){var n=this,h=true,w=d.events.hooks[a],z,t;if(typeof f!=="function")throw Error("Popcorn.js Error: Listener is not a function");if(!this.data.events[a]){this.data.events[a]=[];h=false}if(w){w.add&&w.add.call(this,{},f);if(w.bind)a=w.bind;if(w.handler){t=
f;f=function(A){w.handler.call(n,A,t)}}h=true;if(!this.data.events[a]){this.data.events[a]=[];h=false}}this.data.events[a].push(f);!h&&d.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(A){if(n.data.events[a])for(z=n.data.events[a].slice();z.length;)z.shift().call(n,A)},false);return this},unlisten:function(a,f){var n,h=this.data.events[a];if(h){if(typeof f==="string"){for(n=0;n<h.length;n++)h[n].name===f&&h.splice(n--,1);return this}else if(typeof f==="function"){for(;n!==-1;){n=
h.indexOf(f);n!==-1&&h.splice(n,1)}return this}this.data.events[a]=null;return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,f){var n=false;if(this.media.readyState){setTimeout(function(){f.call(this,a)}.bind(this),0);n=true}this.data.hooks.canplayall={fired:n}},handler:function(a,f){if(!this.data.hooks.canplayall.fired){f.call(this,a);this.data.hooks.canplayall.fired=true}}}}};d.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){d.p[a[0]]=d.p[a[1]]=d.events.fn[a[0]]});
e.prototype.remove=function(a){this.where(a).forEach(function(f){this.removeTrackEvent(f._id)},this.parent);return this};e.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(f){var n,h;if(!a)return true;for(n in a){h=a[n];if(f[n]&&f[n]===h||f._natives[n]&&f._natives[n]===h)return true}return false})};d.addTrackEvent=function(a,f){var n=false;if(!(f instanceof l)){f=new l(f);n=true}if(f&&f._natives&&f._natives.type&&a.options.defaults&&a.options.defaults[f._natives.type])f=
d.extend({},a.options.defaults[f._natives.type],f);if(f._natives){f._id=f.id||f._id||d.guid(f._natives.type);if(f._natives._setup){f._natives._setup.call(a,f);a.emit("tracksetup",d.extend({},f,{plugin:f._natives.type,type:"tracksetup",track:f}))}}b(a,f);this.timeUpdate(a,null,true);f._id&&d.addTrackEvent.ref(a,f);if(n)a.emit("trackadded",d.extend({},f,f._natives?{plugin:f._natives.type}:{},{type:"trackadded",track:f}))};d.addTrackEvent.ref=function(a,f){a.data.trackRefs[f._id]=f;return a};d.removeTrackEvent=
function(a,f,n){var h=a.getTrackEvent(f);n=n||{};if(h){h._natives._teardown&&h._natives._teardown.call(a,h);c(a,f,n);d.removeTrackEvent.ref(a,f);h._natives&&a.emit("trackremoved",d.extend({},h,{plugin:h._natives.type,type:"trackremoved",track:h}))}};d.removeTrackEvent.ref=function(a,f){delete a.data.trackRefs[f];return a};d.getTrackEvents=function(a){var f=[];a=a.data.trackEvents.byStart;for(var n=a.length,h=0,w;h<n;h++){w=a[h];w._id&&f.push(w)}return f};d.getTrackEvents.ref=function(a){return a.data.trackRefs};
d.getTrackEvent=function(a,f){return a.data.trackRefs[f]};d.getTrackEvent.ref=function(a,f){return a.data.trackRefs[f]};d.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};d.timeUpdate=function(a,f){var n=a.media.currentTime,h=a.data.trackEvents.previousUpdateTime,w=a.data.trackEvents,z=w.endIndex,t=w.startIndex,A=w.byStart.length,x=w.byEnd.length,H=d.registryByName,y,B,F;if(h<=n){for(;w.byEnd[z]&&w.byEnd[z].end<=n;){y=w.byEnd[z];B=(h=y._natives)&&h.type;if(!h||H[B]||
a[B]){if(y._running===true){y._running=false;F=a.data.running[B];F.splice(F.indexOf(y),1);if(!a.data.disabled[B]){h.end.call(a,f,y);a.emit("trackend",d.extend({},y,{plugin:B,type:"trackend",track:y}))}}z++}else{d.removeTrackEvent(a,y._id);return}}for(;w.byStart[t]&&w.byStart[t].start<=n;){y=w.byStart[t];B=(h=y._natives)&&h.type;if(!h||H[B]||a[B]){if(y.end>n&&y._running===false){y._running=true;a.data.running[B].push(y);if(!a.data.disabled[B]){h.start.call(a,f,y);a.emit("trackstart",d.extend({},y,
{plugin:B,type:"trackstart",track:y}))}}t++}else{d.removeTrackEvent(a,y._id);return}}}else if(h>n){for(;w.byStart[t]&&w.byStart[t].start>n;){y=w.byStart[t];B=(h=y._natives)&&h.type;if(!h||H[B]||a[B]){if(y._running===true){y._running=false;F=a.data.running[B];F.splice(F.indexOf(y),1);if(!a.data.disabled[B]){h.end.call(a,f,y);a.emit("trackend",d.extend({},y,{plugin:B,type:"trackend",track:y}))}}t--}else{d.removeTrackEvent(a,y._id);return}}for(;w.byEnd[z]&&w.byEnd[z].end>n;){y=w.byEnd[z];B=(h=y._natives)&&
h.type;if(!h||H[B]||a[B]){if(y.start<=n&&y._running===false){y._running=true;a.data.running[B].push(y);if(!a.data.disabled[B]){h.start.call(a,f,y);a.emit("trackstart",d.extend({},y,{plugin:B,type:"trackstart",track:y}))}}z--}else{d.removeTrackEvent(a,y._id);return}}}w.endIndex=z;w.startIndex=t;w.previousUpdateTime=n;w.byStart.length<A&&w.startIndex--;w.byEnd.length<x&&w.endIndex--};d.extend(d.p,{getTrackEvents:function(){return d.getTrackEvents.call(null,this)},getTrackEvent:function(a){return d.getTrackEvent.call(null,
this,a)},getLastTrackEventId:function(){return d.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){d.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){d.removePlugin.call(null,this,a);return this},timeUpdate:function(a){d.timeUpdate.call(null,this,a);return this},destroy:function(){d.destroy.call(null,this);return this}});d.manifest={};d.registry=[];d.registryByName={};d.plugin=function(a,f,n){if(d.protect.natives.indexOf(a.toLowerCase())>=0)d.error("'"+a+"' is a protected function name");
else{var h=typeof f==="function",w=["start","end","type","manifest"],z=["_setup","_teardown","start","end","frame"],t={},A=function(y,B){y=y||d.nop;B=B||d.nop;return function(){y.apply(this,arguments);B.apply(this,arguments)}};d.manifest[a]=n=n||f.manifest||{};z.forEach(function(y){f[y]=i(f[y]||d.nop,a)});var x=function(y,B){if(!B)return this;if(B.ranges&&d.isArray(B.ranges)){d.forEach(B.ranges,function(O){O=d.extend({},B,O);delete O.ranges;this[a](O)},this);return this}var F=B._natives={},D="",N;
d.extend(F,y);B._natives.type=B._natives.plugin=a;B._running=false;F.start=F.start||F["in"];F.end=F.end||F.out;if(B.once)F.end=A(F.end,function(){this.removeTrackEvent(B._id)});F._teardown=A(function(){var O=m.call(arguments),P=this.data.running[F.type];O.unshift(null);O[1]._running&&P.splice(P.indexOf(B),1)&&F.end.apply(this,O);this.emit("trackend",d.extend({},B,{plugin:F.type,type:"trackend",track:d.getTrackEvent(this,B.id||B._id)}))},F._teardown);F._teardown=A(F._teardown,function(){this.emit("trackteardown",
d.extend({},B,{plugin:a,type:"trackteardown",track:d.getTrackEvent(this,B.id||B._id)}))});B.compose=B.compose||[];if(typeof B.compose==="string")B.compose=B.compose.split(" ");B.effect=B.effect||[];if(typeof B.effect==="string")B.effect=B.effect.split(" ");B.compose=B.compose.concat(B.effect);B.compose.forEach(function(O){D=d.compositions[O]||{};z.forEach(function(P){F[P]=A(F[P],D[P])})});B._natives.manifest=n;if(!("start"in B))B.start=B["in"]||0;if(!B.end&&B.end!==0)B.end=B.out||Number.MAX_VALUE;
if(!o.call(B,"toString"))B.toString=function(){var O=["start: "+B.start,"end: "+B.end,"id: "+(B.id||B._id)];B.target!=null&&O.push("target: "+B.target);return a+" ( "+O.join(", ")+" )"};if(!B.target){N="options"in n&&n.options;B.target=N&&"target"in N&&N.target}if(!B._id&&B._natives)B._id=d.guid(B._natives.type);d.addTrackEvent(this,B);d.forEach(y,function(O,P){w.indexOf(P)===-1&&this.on(P,O)},this);return this};d.p[a]=t[a]=function(y,B){var F,D;if(y&&!B)B=y;else if(F=this.getTrackEvent(y)){D=B;var N=
{},O;for(O in F)if(o.call(D,O)&&o.call(F,O))N[O]=F[O];if(F._natives._update){c(this,F._id);if(o.call(B,"start"))F.start=B.start;if(o.call(B,"end"))F.end=B.end;h&&f.call(this,F);F._natives._update.call(this,F,B);b(this,F)}else{d.extend(F,B);d.removeTrackEvent(this,y,{previous:N});h?x.call(this,f.call(this,F),F):d.addTrackEvent(this,F);this.emit("trackchange",{id:F.id,type:"trackchange",previousValue:N,currentValue:F,track:F});return this}F._natives.type!=="cue"&&this.emit("trackchange",{id:F.id,type:"trackchange",
previousValue:N,currentValue:D,track:F});return this}else B.id=y;this.data.running[a]=this.data.running[a]||[];F=d.extend({},this.options.defaults&&this.options.defaults[a]||{},B);x.call(this,h?f.call(this,F):f,F);return this};n&&d.extend(f,{manifest:n});var H={fn:t[a],definition:f,base:f,parents:[],name:a};d.registry.push(d.extend(t,H,{type:a}));d.registryByName[a]=H;return t}};d.plugin.errors=[];d.plugin.debug=d.version==="cdef06e";d.removePlugin=function(a,f){if(!f){f=a;a=d.p;if(d.protect.natives.indexOf(f.toLowerCase())>=
0){d.error("'"+f+"' is a protected function name");return}var n=d.registry.length,h;for(h=0;h<n;h++)if(d.registry[h].name===f){d.registry.splice(h,1);delete d.registryByName[f];delete d.manifest[f];delete a[f];return}}n=a.data.trackEvents.byStart;h=a.data.trackEvents.byEnd;var w=a.data.trackEvents.animating,z,t;z=0;for(t=n.length;z<t;z++){if(n[z]&&n[z]._natives&&n[z]._natives.type===f){n[z]._natives._teardown&&n[z]._natives._teardown.call(a,n[z]);n.splice(z,1);z--;t--;if(a.data.trackEvents.startIndex<=
z){a.data.trackEvents.startIndex--;a.data.trackEvents.endIndex--}}h[z]&&h[z]._natives&&h[z]._natives.type===f&&h.splice(z,1)}z=0;for(t=w.length;z<t;z++)if(w[z]&&w[z]._natives&&w[z]._natives.type===f){w.splice(z,1);z--;t--}};d.compositions={};d.compose=function(a,f,n){d.manifest[a]=n||f.manifest||{};d.compositions[a]=f};d.plugin.effect=d.effect=d.compose;var E=/^(?:\.|#|\[)/;d.dom={debug:false,find:function(a,f){var n=null;f=f||g;if(a){if(!E.test(a)){n=g.getElementById(a);if(n!==null)return n}try{n=
f.querySelector(a)}catch(h){if(d.dom.debug)throw Error(h);}}return n}};var J=/\?/,L={url:"",data:"",dataType:"",success:d.nop,type:"GET",async:true,xhr:function(){return new p.XMLHttpRequest}};d.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script"))d.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=d.extend({},L,a);a.ajax=a.xhr();if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(J.test(a.url)?"&":"?")+a.data;a.data=
null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return d.xhr.httpData(a)}}};d.xhr.httpData=function(a){var f,n=null,h,w=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{n=JSON.parse(a.ajax.responseText)}catch(z){}f={xml:a.ajax.responseXML,text:a.ajax.responseText,json:n};if(!f.xml||!f.xml.documentElement){f.xml=null;try{h=new DOMParser;w=h.parseFromString(a.ajax.responseText,"text/xml");if(!w.getElementsByTagName("parsererror").length)f.xml=w}catch(t){}}if(a.dataType)f=
f[a.dataType];a.success.call(a.ajax,f)}};return f};d.xhr.getJSONP=function(a,f,n){var h=g.head||g.getElementsByTagName("head")[0]||g.documentElement,w=g.createElement("script"),z=false,t=[];t=/(=)\?(?=&|$)|\?\?/;var A,x;if(!n){x=a.match(/(callback=[^&]*)/);if(x!==null&&x.length){t=x[1].split("=")[1];if(t==="?")t="jsonp";A=d.guid(t);a=a.replace(/(callback=[^&]*)/,"callback="+A)}else{A=d.guid("jsonp");if(t.test(a))a=a.replace(t,"$1"+A);t=a.split(/\?(.+)?/);a=t[0]+"?";if(t[1])a+=t[1]+"&";a+="callback="+
A}window[A]=function(H){f&&f(H);z=true}}w.addEventListener("load",function(){n&&f&&f();z&&delete window[A];h.removeChild(w)},false);w.src=a;h.insertBefore(w,h.firstChild)};d.getJSONP=d.xhr.getJSONP;d.getScript=d.xhr.getScript=function(a,f){return d.xhr.getJSONP(a,f,true)};d.util={toSeconds:function(a,f){var n=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,h,w,z;if(typeof a==="number")return a;typeof a==="string"&&!n.test(a)&&d.error("Invalid time format");n=a.split(":");h=n.length-1;w=n[h];if(w.indexOf(";")>
-1){w=w.split(";");z=0;if(f&&typeof f==="number")z=parseFloat(w[1],10)/f;n[h]=parseInt(w[0],10)+z}h=n[0];return{1:parseFloat(h,10),2:parseInt(h,10)*60+parseFloat(n[1],10),3:parseInt(h,10)*3600+parseInt(n[1],10)*60+parseFloat(n[2],10)}[n.length||1]}};d.p.cue=d.p.exec;d.protect={natives:function(a){return Object.keys?Object.keys(a):function(f){var n,h=[];for(n in f)o.call(f,n)&&h.push(n);return h}(a)}(d.p).map(function(a){return a.toLowerCase()})};d.forEach({listen:"on",unlisten:"off",trigger:"emit",
exec:"cue"},function(a,f){var n=d.p[f];d.p[f]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+f+"', "+(a==null?"do not use.":"use '"+a+"' instead."));d.p[f]=n}return d.p[a].apply(this,[].slice.call(arguments))}});p.Popcorn=d}else{p.Popcorn={isSupported:false};for(j="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);j.length;)p.Popcorn[j.shift()]=
function(){}}})(window,window.document);(function(p,g){function l(c){c=typeof c==="string"?c:[c.language,c.region].join("-");var i=c.split("-");return{iso6391:c,language:i[0]||"",region:i[1]||""}}var e=p.navigator,b=l(e.userLanguage||e.language);g.locale={get:function(){return b},set:function(c){b=l(c);g.locale.broadcast();return b},broadcast:function(c){var i=g.instances,j=i.length,k=0,q;for(c=c||"locale:changed";k<j;k++){q=i[k];c in q.data.events&&q.trigger(c)}}}})(this,this.Popcorn);(function(p){var g=Object.prototype.hasOwnProperty;p.parsers={};p.parser=function(l,e,b){if(p.protect.natives.indexOf(l.toLowerCase())>=0)p.error("'"+l+"' is a protected function name");else{if(typeof e==="function"&&!b){b=e;e=""}if(!(typeof b!=="function"||typeof e!=="string")){var c={};c[l]=function(i,j){if(!i)return this;var k=this;p.xhr({url:i,dataType:e,success:function(q){var m,o,r=0;q=b(q).data||[];if(m=q.length){for(;r<m;r++){o=q[r];for(var s in o)g.call(o,s)&&k[s]&&k[s](o[s])}j&&j()}}});
return this};p.extend(p.p,c);return c}}}})(Popcorn);(function(p){var g=function(l,e){l=l||p.nop;e=e||p.nop;return function(){l.apply(this,arguments);e.apply(this,arguments)}};p.player=function(l,e){if(!p[l]){e=e||{};var b=function(c,i,j){j=j||{};var k=new Date/1E3,q=k,m=0,o=0,r=1,s=false,u={},C=typeof c==="string"?p.dom.find(c):c,v={};Object.prototype.__defineGetter__||(v=C||document.createElement("div"));for(var G in C)if(!(G in v))if(typeof C[G]==="object")v[G]=C[G];else if(typeof C[G]==="function")v[G]=function(d){return"length"in C[d]&&!C[d].call?
C[d]:function(){return C[d].apply(C,arguments)}}(G);else p.player.defineProperty(v,G,{get:function(d){return function(){return C[d]}}(G),set:p.nop,configurable:true});var K=function(){k=new Date/1E3;if(!v.paused){v.currentTime+=k-q;v.dispatchEvent("timeupdate");setTimeout(K,10)}q=k};v.play=function(){this.paused=false;if(v.readyState>=4){q=new Date/1E3;v.dispatchEvent("play");K()}};v.pause=function(){this.paused=true;v.dispatchEvent("pause")};p.player.defineProperty(v,"currentTime",{get:function(){return m},
set:function(d){m=+d;v.dispatchEvent("timeupdate");return m},configurable:true});p.player.defineProperty(v,"volume",{get:function(){return r},set:function(d){r=+d;v.dispatchEvent("volumechange");return r},configurable:true});p.player.defineProperty(v,"muted",{get:function(){return s},set:function(d){s=+d;v.dispatchEvent("volumechange");return s},configurable:true});p.player.defineProperty(v,"readyState",{get:function(){return o},set:function(d){return o=d},configurable:true});v.addEventListener=function(d,
E){u[d]||(u[d]=[]);u[d].push(E);return E};v.removeEventListener=function(d,E){var J,L=u[d];if(L){for(J=u[d].length-1;J>=0;J--)E===L[J]&&L.splice(J,1);return E}};v.dispatchEvent=function(d){var E,J=d.type;if(!J){J=d;if(d=p.events.getInterface(J)){E=document.createEvent(d);E.initEvent(J,true,true,window,1)}}if(u[J])for(d=u[J].length-1;d>=0;d--)u[J][d].call(this,E,this)};v.src=i||"";v.duration=0;v.paused=true;v.ended=0;j&&j.events&&p.forEach(j.events,function(d,E){v.addEventListener(E,d,false)});if(e._canPlayType(C.nodeName,
i)!==false)if(e._setup)e._setup.call(v,j);else{v.readyState=4;v.dispatchEvent("loadedmetadata");v.dispatchEvent("loadeddata");v.dispatchEvent("canplaythrough")}else setTimeout(function(){v.dispatchEvent("error")},0);c=new p.p.init(v,j);if(e._teardown)c.destroy=g(c.destroy,function(){e._teardown.call(v,j)});return c};b.canPlayType=e._canPlayType=e._canPlayType||p.nop;p[l]=p.player.registry[l]=b}};p.player.registry={};p.player.defineProperty=Object.defineProperty||function(l,e,b){l.__defineGetter__(e,
b.get||p.nop);l.__defineSetter__(e,b.set||p.nop)};p.player.playerQueue=function(){var l=[],e=false;return{next:function(){e=false;l.shift();l[0]&&l[0]()},add:function(b){l.push(function(){e=true;b&&b()});!e&&l[0]()}}};p.smart=function(l,e,b){var c=typeof l==="string"?p.dom.find(l):l,i,j,k,q,m,o="HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(c){e=typeof e==="string"?[e]:e;l=0;for(m=e.length;l<m;l++){i=e[l];for(j=0;j<o.length;j++)if((q=p[o[j]])&&q._canPlaySrc(i)===
"probably"){k=q(c);e=p(k,b);setTimeout(function(){k.src=i},0);return e}for(var r in p.player.registry)if(p.player.registry.hasOwnProperty(r))if(p.player.registry[r].canPlayType(c.nodeName,i))return p[r](c,i,b)}r=p.guid("popcorn-video-");o='<video id="'+r+'" preload=auto autobuffer>';l=0;for(m=e.length;l<m;l++)o+='<source src="'+e[l]+'">';o+="</video>";c.innerHTML=o;b&&b.events&&b.events.error&&c.addEventListener("error",b.events.error,false);return p("#"+r,b)}else p.error("Specified target `"+l+"` was not found.")}})(Popcorn);(function(p,g){var l=p.document,e=p.location,b=/:\/\//,c=e.href.replace(e.href.split("/").slice(-1)[0],""),i=function(k,q,m){k=k||0;q=(q||k||0)+1;m=m||1;q=Math.ceil((q-k)/m)||0;var o=0,r=[];for(r.length=q;o<q;){r[o++]=k;k+=m}return r};g.sequence=function(k,q){return new g.sequence.init(k,q)};g.sequence.init=function(k,q){this.parent=l.getElementById(k);this.seqId=g.guid("__sequenced");this.queue=[];this.playlist=[];this.inOuts={ofVideos:[],ofClips:[]};this.dims={width:0,height:0};this.active=0;this.playing=
this.cycling=false;this.times={last:0};this.events={};var m=this,o=0;g.forEach(q,function(r,s){var u=l.createElement("video");u.preload="auto";u.controls=true;u.style.display=s&&"none"||"";u.id=m.seqId+"-"+s;m.queue.push(u);var C=r["in"],v=r.out;m.inOuts.ofVideos.push({"in":C!==undefined&&C||1,out:v!==undefined&&v||0});m.inOuts.ofVideos[s].out=m.inOuts.ofVideos[s].out||m.inOuts.ofVideos[s]["in"]+2;u.src=!b.test(r.src)?c+r.src:r.src;u.setAttribute("data-sequence-owner",k);u.setAttribute("data-sequence-guid",
m.seqId);u.setAttribute("data-sequence-id",s);u.setAttribute("data-sequence-clip",[m.inOuts.ofVideos[s]["in"],m.inOuts.ofVideos[s].out].join(":"));m.parent.appendChild(u);m.playlist.push(g("#"+u.id))});m.inOuts.ofVideos.forEach(function(r){r={"in":o,out:o+(r.out-r["in"])};m.inOuts.ofClips.push(r);o=r.out+1});g.forEach(this.queue,function(r,s){function u(){if(!s){m.dims.width=r.videoWidth;m.dims.height=r.videoHeight}r.currentTime=m.inOuts.ofVideos[s]["in"]-0.5;r.removeEventListener("canplaythrough",
u,false);return true}r.addEventListener("canplaythrough",u,false);r.addEventListener("play",function(){m.playing=true},false);r.addEventListener("pause",function(){m.playing=false},false);r.addEventListener("timeupdate",function(C){C=C.srcElement||C.target;C=+(C.dataset&&C.dataset.sequenceId||C.getAttribute("data-sequence-id"));var v=Math.floor(r.currentTime);if(m.times.last!==v&&C===m.active){m.times.last=v;v===m.inOuts.ofVideos[C].out&&g.sequence.cycle.call(m,C)}},false)});return this};g.sequence.init.prototype=
g.sequence.prototype;g.sequence.cycle=function(k){this.queue||g.error("Popcorn.sequence.cycle is not a public method");var q=this.queue,m=this.inOuts.ofVideos,o=q[k],r=0,s;if(q[k+1])r=k+1;if(q[k+1]){q=q[r];m=m[r];g.extend(q,{width:this.dims.width,height:this.dims.height});s=this.playlist[r];o.pause();this.active=r;this.times.last=m["in"]-1;s.currentTime(m["in"]);s[r?"play":"pause"]();this.trigger("cycle",{position:{previous:k,current:r}});if(r){o.style.display="none";q.style.display=""}this.cycling=
false}else this.playlist[k].pause();return this};var j=["timeupdate","play","pause"];g.extend(g.sequence.prototype,{eq:function(k){return this.playlist[k]},remove:function(){this.parent.innerHTML=null},clip:function(k){return this.inOuts.ofVideos[k]},duration:function(){for(var k=0,q=this.inOuts.ofClips,m=0;m<q.length;m++)k+=q[m].out-q[m]["in"]+1;return k-1},play:function(){this.playlist[this.active].play();return this},exec:function(k,q){var m=this.active;this.inOuts.ofClips.forEach(function(o,r){if(k>=
o["in"]&&k<=o.out)m=r});k+=this.inOuts.ofVideos[m]["in"]-this.inOuts.ofClips[m]["in"];g.addTrackEvent(this.playlist[m],{start:k-1,end:k,_running:false,_natives:{start:q||g.nop,end:g.nop,type:"exec"}});return this},listen:function(k,q){var m=this,o=this.playlist,r=o.length,s=0;if(!q)q=g.nop;if(g.Events.Natives.indexOf(k)>-1)g.forEach(o,function(u){u.listen(k,function(C){C.active=m;if(j.indexOf(k)>-1)q.call(u,C);else++s===r&&q.call(u,C)})});else{this.events[k]||(this.events[k]={});o=q.name||g.guid("__"+
k);this.events[k][o]=q}return this},unlisten:function(){},trigger:function(k,q){var m=this;if(!(g.Events.Natives.indexOf(k)>-1)){this.events[k]&&g.forEach(this.events[k],function(o){o.call(m,{type:k},q)});return this}}});g.forEach(g.manifest,function(k,q){g.sequence.prototype[q]=function(m){var o={},r=[],s,u,C,v,G;for(s=0;s<this.inOuts.ofClips.length;s++){r=this.inOuts.ofClips[s];u=i(r["in"],r.out);C=u.indexOf(m.start);v=u.indexOf(m.end);if(C>-1)o[s]=g.extend({},r,{start:u[C],clipIdx:C});if(v>-1)o[s]=
g.extend({},r,{end:u[v],clipIdx:v})}s=Object.keys(o).map(function(d){return+d});r=i(s[0],s[1]);for(s=0;s<r.length;s++){C={};v=r[s];var K=o[v];if(K){G=this.inOuts.ofVideos[v];u=K.clipIdx;G=i(G["in"],G.out);if(K.start){C.start=G[u];C.end=G[G.length-1]}if(K.end){C.start=G[0];C.end=G[u]}}else{C.start=this.inOuts.ofVideos[v]["in"];C.end=this.inOuts.ofVideos[v].out}this.playlist[v][q](g.extend({},m,C))}return this}})})(this,Popcorn);(function(p){document.addEventListener("DOMContentLoaded",function(){var g=document.querySelectorAll("[data-timeline-sources]");p.forEach(g,function(l,e){var b=g[e],c,i,j;if(!b.id)b.id=p.guid("__popcorn");if(b.nodeType&&b.nodeType===1){j=p("#"+b.id);c=(b.getAttribute("data-timeline-sources")||"").split(",");c[0]&&p.forEach(c,function(k){i=k.split("!");if(i.length===1){i=k.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");i[0]="parse"+i[1].toUpperCase();i[1]=k}c[0]&&j[i[0]]&&j[i[0]](i[1])});j.autoplay()&&
j.play()}})},false)})(Popcorn);(function(p,g){function l(c){var i=l.options;c=i.parser[i.strictMode?"strict":"loose"].exec(c);for(var j={},k=14;k--;)j[i.key[k]]=c[k]||"";j[i.q.name]={};j[i.key[12]].replace(i.q.parser,function(q,m,o){if(m)j[i.q.name][m]=o});return j}function e(){}l.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var b={length:0,start:p.nop,end:p.nop};MediaError=MediaError||function(){function c(i,j){this.code=i||null;this.message=j||""}c.MEDIA_ERR_NONE_ACTIVE=0;c.MEDIA_ERR_ABORTED=1;c.MEDIA_ERR_NETWORK=2;c.MEDIA_ERR_DECODE=3;c.MEDIA_ERR_NONE_SUPPORTED=4;return c}();e.prototype={_util:{type:"HTML5",TIMEUPDATE_MS:250,
MIN_WIDTH:300,MIN_HEIGHT:150,isAttributeSet:function(c){return typeof c==="string"||c===true},parseUri:l},addEventListener:function(c,i,j){g.addEventListener(this._eventNamespace+c,i,j)},removeEventListener:function(c,i,j){g.removeEventListener(this._eventNamespace+c,i,j)},dispatchEvent:function(c){var i=g.createEvent("CustomEvent");i.initCustomEvent(this._eventNamespace+c,false,false,{type:c,target:this.parentNode,data:null});g.dispatchEvent(i)},load:p.nop,canPlayType:function(){return""},getBoundingClientRect:function(){return this.parentNode.getBoundingClientRect()},
NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};e.prototype.constructor=e;Object.defineProperties(e.prototype,{currentSrc:{get:function(){return this.src!==undefined?this.src:""}},preload:{get:function(){return"auto"},set:p.nop},controls:{get:function(){return true},set:p.nop},poster:{get:function(){return""},set:p.nop},crossorigin:{get:function(){return""}},played:{get:function(){return b}},
seekable:{get:function(){return b}},buffered:{get:function(){return b}},defaultMuted:{get:function(){return false}},defaultPlaybackRate:{get:function(){return 1}}});p._MediaElementProto=e})(Popcorn,window.document);(function(p,g){function l(){return"maybe"}function e(b,c){var i=typeof b==="string"?g.querySelector(b):b,j=g.createElement(c);i.appendChild(j);j._canPlaySrc=l;return j}p.HTMLVideoElement=function(b){return e(b,"video")};p.HTMLVideoElement._canPlaySrc=l;p.HTMLAudioElement=function(b){return e(b,"audio")};p.HTMLAudioElement._canPlaySrc=l})(Popcorn,window.document);(function(p,g){function l(i){this.currentTime=i.currentTime||0;this.duration=i.duration||NaN;this.playInterval=null;this.ended=i.endedCallback||p.nop}function e(i){function j(d){G.unshift(d)}function k(d){if(u){v.seeking=true;o.dispatchEvent("seeking");C.seekTo(d);v.seeking=false;o.dispatchEvent("timeupdate");o.dispatchEvent("seeked");o.dispatchEvent("canplay");o.dispatchEvent("canplaythrough")}else j(function(){k(d)})}function q(){o.dispatchEvent("timeupdate")}function m(){if(v.loop){k(0);o.play()}else{v.ended=
true;clearInterval(K);o.dispatchEvent("timeupdate");o.dispatchEvent("ended")}}var o=this,r=typeof i==="string"?g.querySelector(i):i,s,u=false,C,v={src:b,networkState:o.NETWORK_EMPTY,readyState:o.HAVE_NOTHING,autoplay:b,preload:b,controls:b,loop:false,poster:b,volume:1,muted:false,width:r.width|0?r.width:o._util.MIN_WIDTH,height:r.height|0?r.height:o._util.MIN_HEIGHT,seeking:false,ended:false,paused:1,error:null},G=[],K;o._eventNamespace=p.guid("HTMLNullVideoElement::");o.parentNode=r;o._util.type=
"NullVideo";o.play=function(){if(u){C.play();if(v.paused===1){v.paused=false;o.dispatchEvent("play");o.dispatchEvent("playing")}else{v.ended&&k(0);if(v.paused){v.paused=false;v.loop||o.dispatchEvent("play");o.dispatchEvent("playing")}}K=setInterval(q,o._util.TIMEUPDATE_MS)}else j(function(){o.play()})};o.pause=function(){if(u){C.pause();v.paused=true;clearInterval(K);o.dispatchEvent("pause")}else j(function(){o.pause()})};Object.defineProperties(o,{src:{get:function(){return v.src},set:function(d){if(d&&
d!==v.src)if(o._canPlaySrc(d)){v.src=d;if(u)if(u&&C){C.pause();C=null;r.removeChild(s);s=null}s=g.createElement("div");s.width=v.width;s.height=v.height;r.appendChild(s);d=c.exec(d);C=new l({currentTime:d[1],duration:d[2],endedCallback:m});o.dispatchEvent("loadstart");o.dispatchEvent("progress");o.dispatchEvent("durationchange");u=true;v.networkState=o.NETWORK_IDLE;v.readyState=o.HAVE_METADATA;o.dispatchEvent("loadedmetadata");o.dispatchEvent("loadeddata");v.readyState=o.HAVE_FUTURE_DATA;o.dispatchEvent("canplay");
v.readyState=o.HAVE_ENOUGH_DATA;o.dispatchEvent("canplaythrough");for(d=G.length;d--;){G[d]();delete G[d]}v.autoplay&&o.play()}else{v.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};o.dispatchEvent("error")}}},autoplay:{get:function(){return v.autoplay},set:function(d){v.autoplay=o._util.isAttributeSet(d)}},loop:{get:function(){return v.loop},set:function(d){v.loop=o._util.isAttributeSet(d)}},width:{get:function(){return s.width},set:function(d){v.width=
d}},height:{get:function(){return s.height},set:function(d){v.height=d}},currentTime:{get:function(){var d;d=u?C.currentTime:0;return d},set:function(d){k(d)}},duration:{get:function(){return C?C.duration:NaN}},ended:{get:function(){return v.ended}},paused:{get:function(){return v.paused}},seeking:{get:function(){return v.seeking}},readyState:{get:function(){return v.readyState}},networkState:{get:function(){return v.networkState}},volume:{get:function(){return v.volume},set:function(d){if(d<0||d>
1)throw"Volume value must be between 0.0 and 1.0";v.volume=d;o.dispatchEvent("volumechange")}},muted:{get:function(){return v.muted},set:function(d){d=o._util.isAttributeSet(d);v.muted=d;o.dispatchEvent("volumechange")}},error:{get:function(){return v.error}}})}var b="",c=/#t=(\d+)?,?(\d+)?/;l.prototype={play:function(){var i=this;this.playInterval=setInterval(function(){if(i.currentTime+0.016>=i.duration){i.currentTime=i.duration;i.pause();i.ended()}else i.currentTime+=0.016},16)},pause:function(){clearInterval(this.playInterval)},
seekTo:function(i){i=i<0?0:i;this.currentTime=i=i>this.duration?this.duration:i}};e.prototype=new p._MediaElementProto;e.prototype.constructor=e;e.prototype._canPlaySrc=function(i){return/#t=\d*,?\d+?/.test(i)?"probably":b};e.prototype.canPlayType=function(i){return i==="video/x-nullvideo"?"probably":b};p.HTMLNullVideoElement=function(i){return new e(i)};p.HTMLNullVideoElement._canPlaySrc=e.prototype._canPlaySrc})(Popcorn,document);(function(p,g,l){function e(){if(!q){p.getScript("//w.soundcloud.com/player/api.js",function(){p.getScript("//connect.soundcloud.com/sdk.js",function(){k=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});for(var o=m.length;o--;){m[o]();delete m[o]}})});q=true}return k}function b(o){m.unshift(o)}function c(o){function r(D){H.unshift(D)}function s(){x.bind(SC.Widget.Events.LOAD_PROGRESS,function(D){E({type:"loadProgress",data:D.currentPosition/1E3})});x.bind(SC.Widget.Events.PLAY_PROGRESS,function(D){E({type:"playProgress",
data:D.currentPosition/1E3})});x.bind(SC.Widget.Events.PLAY,function(){E({type:"play"})});x.bind(SC.Widget.Events.PAUSE,function(){E({type:"pause"})});x.bind(SC.Widget.Events.SEEK,function(D){E({type:"seek",data:D.currentPosition/1E3})});x.bind(SC.Widget.Events.FINISH,function(){E({type:"finish"})});A=true;x.getDuration(C);n(t.controls)}function u(){x.bind(SC.Widget.Events.LOAD_PROGRESS,function(D){if(D.loadedProgress>0){x.unbind(SC.Widget.Events.LOAD_PROGRESS);x.pause()}});x.bind(SC.Widget.Events.PLAY,
function(){x.unbind(SC.Widget.Events.PLAY);x.bind(SC.Widget.Events.PAUSE,function(){x.unbind(SC.Widget.Events.PAUSE);x.setVolume(100);s()})});x.setVolume(0);x.play()}function C(D){D/=1E3;var N=t.duration;if(N!==D){t.duration=D;h.dispatchEvent("durationchange");if(isNaN(N)){t.networkState=h.NETWORK_IDLE;t.readyState=h.HAVE_METADATA;h.dispatchEvent("loadedmetadata");h.dispatchEvent("loadeddata");t.readyState=h.HAVE_FUTURE_DATA;h.dispatchEvent("canplay");t.readyState=h.HAVE_ENOUGH_DATA;h.dispatchEvent("canplaythrough");
for(D=H.length;D--;){H[D]();delete H[D]}t.paused&&t.autoplay&&h.play()}}}function v(D){if(A){D*=1E3;t.seeking=true;h.dispatchEvent("seeking");x.seekTo(D)}else r(function(){v(D)})}function G(){t.paused=true;clearInterval(y);h.dispatchEvent("pause")}function K(){h.dispatchEvent("timeupdate")}function d(D){t.currentTime=D;D!==F&&h.dispatchEvent("timeupdate");F=D}function E(D){switch(D.type){case "loadProgress":h.dispatchEvent("progress");break;case "playProgress":d(D.data);break;case "play":if(!B){B=
setInterval(J,i);t.loop&&h.dispatchEvent("play")}y=setInterval(K,h._util.TIMEUPDATE_MS);if(t.paused){t.paused=false;t.loop||h.dispatchEvent("play");h.dispatchEvent("playing")}break;case "pause":G();break;case "finish":if(t.loop){v(0);h.play()}else{h.pause();G();t.ended=true;h.dispatchEvent("ended")}break;case "seek":d(D.data);t.ended=false;t.seeking=false;h.dispatchEvent("timeupdate");h.dispatchEvent("seeked");h.dispatchEvent("canplay");h.dispatchEvent("canplaythrough")}}function J(){t.ended||x.getPosition(function(D){d(D/
1E3)})}function L(D){if(h._canPlaySrc(D)){t.src=D;if(A)if(A&&x){clearInterval(B);x.pause();x.unbind(SC.Widget.Events.READY);x.unbind(SC.Widget.Events.LOAD_PROGRESS);x.unbind(SC.Widget.Events.PLAY_PROGRESS);x.unbind(SC.Widget.Events.PLAY);x.unbind(SC.Widget.Events.PAUSE);x.unbind(SC.Widget.Events.SEEK);x.unbind(SC.Widget.Events.FINISH);w.removeChild(z);z=null}if(e()){A=false;SC.get("/resolve",{url:D},function(N){z=l.createElement("iframe");z.id=p.guid("soundcloud-");z.width=t.width;z.height=t.height;
z.frameBorder=0;z.webkitAllowFullScreen=true;z.mozAllowFullScreen=true;z.allowFullScreen=true;n(t.controls);w.appendChild(z);z.onload=function(){z.onload=null;x=SC.Widget(z);x.bind(SC.Widget.Events.READY,u);t.networkState=h.NETWORK_LOADING;h.dispatchEvent("loadstart");h.dispatchEvent("progress")};z.src="http://w.soundcloud.com/player/?url="+N.uri+"&show_artwork=false&buying=false&liking=false&sharing=false&download=false&show_comments=false&show_user=false"})}else b(function(){L(D)})}else{t.error=
{name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};h.dispatchEvent("error")}}function a(D){t.volume=D;if(A){x.setVolume(D);h.dispatchEvent("volumechange")}else r(function(){a(D)})}function f(D){if(A)if(D){t.muted=t.volume;a(0)}else{t.muted=0;a(t.muted)}else{t.muted=D?1:0;r(function(){f(D)})}}function n(D){if(z)if(A){z.style.position="absolute";z.style.visibility=D?"visible":"hidden"}else{z.style.opacity=D?"1":"0";z.style.pointerEvents=D?"auto":"none"}t.controls=
D}if(!g.postMessage)throw"ERROR: HTMLSoundCloudAudioElement requires window.postMessage";var h=this,w=typeof o==="string"?p.dom.find(o):o,z,t={src:j,networkState:h.NETWORK_EMPTY,readyState:h.HAVE_NOTHING,seeking:false,autoplay:j,preload:j,controls:false,loop:false,poster:j,volume:100,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,width:w.width|0?w.width:h._util.MIN_WIDTH,height:w.height|0?w.height:h._util.MIN_HEIGHT,error:null},A=false,x,H=[],y,B,F=0;h._eventNamespace=p.guid("HTMLSoundCloudAudioElement::");
h.parentNode=w;h._util.type="SoundCloud";h.play=function(){if(A){t.ended&&v(0);x.play()}else r(function(){h.play()})};h.pause=function(){A?x.pause():r(function(){h.pause()})};Object.defineProperties(h,{src:{get:function(){return t.src},set:function(D){D&&D!==t.src&&L(D)}},autoplay:{get:function(){return t.autoplay},set:function(D){t.autoplay=h._util.isAttributeSet(D)}},loop:{get:function(){return t.loop},set:function(D){t.loop=h._util.isAttributeSet(D)}},width:{get:function(){return z.width},set:function(D){t.width=
D}},height:{get:function(){return z.height},set:function(D){t.height=D}},currentTime:{get:function(){return t.currentTime},set:function(D){v(D)}},duration:{get:function(){return t.duration}},ended:{get:function(){return t.ended}},paused:{get:function(){return t.paused}},seeking:{get:function(){return t.seeking}},readyState:{get:function(){return t.readyState}},networkState:{get:function(){return t.networkState}},volume:{get:function(){return(t.muted>0?t.muted:t.volume)/100},set:function(D){if(D<0||
D>1)throw"Volume value must be between 0.0 and 1.0";D*=100;a(D)}},muted:{get:function(){return t.muted>0},set:function(D){f(h._util.isAttributeSet(D))}},error:{get:function(){return t.error}},controls:{get:function(){return t.controls},set:function(D){n(!!D)}}})}var i=16,j="",k=false,q=false,m=[];c.prototype=new p._MediaElementProto;c.prototype._canPlaySrc=function(o){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(o)?"probably":j};c.prototype.canPlayType=function(o){return o==="audio/x-soundcloud"?
"probably":j};p.HTMLSoundCloudAudioElement=function(o){return new c(o)};p.HTMLSoundCloudAudioElement._canPlaySrc=c.prototype._canPlaySrc})(Popcorn,window,document);(function(p,g,l){function e(q){var m=this,o=q.src.split("?")[0];if(o.substr(0,2)==="//")o=g.location.protocol+o;"play pause paused seekTo unload getCurrentTime getDuration getVideoEmbedCode getVideoHeight getVideoWidth getVideoUrl getColor setColor setLoop getVolume setVolume addEventListener".split(" ").forEach(function(r){m[r]=function(s){s=JSON.stringify({method:r,value:s});q.contentWindow&&q.contentWindow.postMessage(s,o)}})}function b(q){function m(x){w.unshift(x)}function o(x){var H=a.duration;
if(H!==x){a.duration=x;E.dispatchEvent("durationchange");if(isNaN(H)){a.networkState=E.NETWORK_IDLE;a.readyState=E.HAVE_METADATA;E.dispatchEvent("loadedmetadata");E.dispatchEvent("loadeddata");a.readyState=E.HAVE_FUTURE_DATA;E.dispatchEvent("canplay");a.readyState=E.HAVE_ENOUGH_DATA;E.dispatchEvent("canplaythrough");a.autoplay&&E.play();for(x=w.length;x--;){w[x]();delete w[x]}}}}function r(x){if(f){a.seeking=true;E.dispatchEvent("seeking");h.seekTo(x)}else m(function(){r(x)})}function s(){E.dispatchEvent("timeupdate")}
function u(x){(a.currentTime=x)!==A&&E.dispatchEvent("timeupdate");A=a.currentTime}function C(x){if(x.origin==="http://player.vimeo.com"){var H;try{H=JSON.parse(x.data)}catch(y){console.warn(y)}if(H.player_id==n)switch(H.event){case "ready":h=new e(L);h.addEventListener("loadProgress");h.addEventListener("pause");h.setVolume(0);h.play();break;case "loadProgress":if(parseFloat(H.data.duration)>0&&!f){f=true;h.pause()}break;case "pause":h.setVolume(1);g.removeEventListener("message",C,false);g.addEventListener("message",
v,false);h.addEventListener("loadProgress");h.addEventListener("playProgress");h.addEventListener("play");h.addEventListener("pause");h.addEventListener("finish");h.addEventListener("seek");h.getDuration();a.networkState=E.NETWORK_LOADING;E.dispatchEvent("loadstart");E.dispatchEvent("progress")}}}function v(x){if(x.origin==="http://player.vimeo.com"){var H;try{H=JSON.parse(x.data)}catch(y){console.warn(y)}if(H.player_id==n){switch(H.method){case "getCurrentTime":u(parseFloat(H.value));break;case "getDuration":o(parseFloat(H.value));
break;case "getVolume":x=parseFloat(H.value);if(a.volume!==x){a.volume=x;E.dispatchEvent("volumechange")}}switch(H.event){case "loadProgress":E.dispatchEvent("progress");o(parseFloat(H.data.duration));break;case "playProgress":u(parseFloat(H.data.seconds));break;case "play":a.ended&&r(0);if(!t){t=setInterval(G,c);a.loop&&E.dispatchEvent("play")}z=setInterval(s,E._util.TIMEUPDATE_MS);if(a.paused){a.paused=false;a.loop||E.dispatchEvent("play");E.dispatchEvent("playing")}break;case "pause":a.paused=
true;clearInterval(z);E.dispatchEvent("pause");break;case "finish":if(a.loop){r(0);E.play()}else{a.ended=true;E.dispatchEvent("ended")}break;case "seek":u(parseFloat(H.data.seconds));a.seeking=false;E.dispatchEvent("timeupdate");E.dispatchEvent("seeked");E.dispatchEvent("canplay");E.dispatchEvent("canplaythrough");a.paused&&E.pause()}}}}function G(){h.getCurrentTime()}function K(x){a.volume=x;if(f){h.setVolume(x);E.dispatchEvent("volumechange")}else m(function(){K(x)})}function d(x){if(f)if(x){a.muted=
a.volume;K(0)}else{a.muted=0;K(a.muted)}else{a.muted=x?1:0;m(function(){d(x)})}}if(!g.postMessage)throw"ERROR: HTMLVimeoVideoElement requires window.postMessage";var E=this,J=typeof q==="string"?p.dom.find(q):q,L,a={src:i,networkState:E.NETWORK_EMPTY,readyState:E.HAVE_NOTHING,seeking:false,autoplay:i,preload:i,controls:false,loop:false,poster:i,volume:1,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,width:J.width|0?J.width:j,height:J.height|0?J.height:k,error:null},f=false,n=p.guid(),
h,w=[],z,t,A=0;E._eventNamespace=p.guid("HTMLVimeoVideoElement::");E.parentNode=J;E._util.type="Vimeo";E.play=function(){f?h.play():m(function(){E.play()})};E.pause=function(){f?h.pause():m(function(){E.pause()})};Object.defineProperties(E,{src:{get:function(){return a.src},set:function(x){if(x&&x!==a.src)if(E._canPlaySrc(x)){a.src=x;if(f)if(f&&h){clearInterval(t);h.pause();g.removeEventListener("message",v,false);J.removeChild(L);L=null}f=false;x=E._util.parseUri(x);var H=x.queryKey,y,B=["api=1",
"player_id="+n,"title=0","byline=0","portrait=0"];a.loop=H.loop==="1"||a.loop;delete H.loop;a.autoplay=H.autoplay==="1"||a.autoplay;delete H.autoplay;x="http://player.vimeo.com/video/"+/\d+$/.exec(x.path)+"?";for(y in H)H.hasOwnProperty(y)&&B.push(encodeURIComponent(y)+"="+encodeURIComponent(H[y]));x+=B.join("&");L=l.createElement("iframe");L.id=n;L.width=a.width;L.height=a.height;L.frameBorder=0;L.webkitAllowFullScreen=true;L.mozAllowFullScreen=true;L.allowFullScreen=true;J.appendChild(L);L.src=
x;g.addEventListener("message",C,false)}else{a.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};E.dispatchEvent("error")}}},autoplay:{get:function(){return a.autoplay},set:function(x){a.autoplay=E._util.isAttributeSet(x)}},loop:{get:function(){return a.loop},set:function(x){a.loop=E._util.isAttributeSet(x)}},width:{get:function(){return L.width},set:function(x){a.width=x}},height:{get:function(){return L.height},set:function(x){a.height=x}},
currentTime:{get:function(){return a.currentTime},set:function(x){r(x)}},duration:{get:function(){return a.duration}},ended:{get:function(){return a.ended}},paused:{get:function(){return a.paused}},seeking:{get:function(){return a.seeking}},readyState:{get:function(){return a.readyState}},networkState:{get:function(){return a.networkState}},volume:{get:function(){return a.muted>0?a.muted:a.volume},set:function(x){if(x<0||x>1)throw"Volume value must be between 0.0 and 1.0";K(x)}},muted:{get:function(){return a.muted>
0},set:function(x){d(E._util.isAttributeSet(x))}},error:{get:function(){return a.error}}})}var c=16,i="",j=300,k=200;b.prototype=new p._MediaElementProto;b.prototype.constructor=b;b.prototype._canPlaySrc=function(q){return/player.vimeo.com\/video\/\d+/.test(q)||/vimeo.com\/\d+/.test(q)?"probably":i};b.prototype.canPlayType=function(q){return q==="video/x-vimeo"?"probably":i};p.HTMLVimeoVideoElement=function(q){return new b(q)};p.HTMLVimeoVideoElement._canPlaySrc=b.prototype._canPlaySrc})(Popcorn,
window,document);(function(p,g,l){function e(){if(!s){var C=l.createElement("script");C.src=(g.location.protocol==="file:"?"http:":"")+"//www.youtube.com/iframe_api";var v=l.getElementsByTagName("script")[0];v.parentNode.insertBefore(C,v);s=true}return r}function b(C){u.unshift(C)}function c(C){function v(I){P.unshift(I)}function G(){B=true}function K(){if(!F){v(function(){K()});return y.duration}var I=y.duration,M=N.getDuration();if(M){if(I!==M){y.duration=M;A.dispatchEvent("durationchange")}}else{if(!Q){Q=true;
A.play();A.pause()}setTimeout(K,50)}return M}function d(I){var M={name:"MediaError"};switch(I.data){case 2:M.message="Invalid video parameter.";M.code=MediaError.MEDIA_ERR_ABORTED;break;case 5:M.message="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.";M.code=MediaError.MEDIA_ERR_DECODE;case 100:M.message="Video not found.";M.code=MediaError.MEDIA_ERR_NETWORK;break;case 101:case 150:M.message="Video not usable.";M.code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED;
break;default:M.message="Unknown error.";M.code=5}y.error=M;A.dispatchEvent("error")}function E(I){switch(I.data){case -1:N.playVideo();break;case YT.PlayerState.ENDED:if(y.loop){a(0);A.play()}else{y.ended=true;A.dispatchEvent("ended")}break;case YT.PlayerState.PLAYING:if(S){S=false;if(y.autoplay||!y.paused){y.paused=false;v(function(){w()})}else N.pauseVideo();y.readyState=A.HAVE_METADATA;A.dispatchEvent("loadedmetadata");T=setInterval(L,i);A.dispatchEvent("loadeddata");y.readyState=A.HAVE_FUTURE_DATA;
A.dispatchEvent("canplay");F=true;for(I=P.length;I--;){P[I]();delete P[I]}y.readyState=A.HAVE_ENOUGH_DATA;A.dispatchEvent("canplaythrough")}else w();break;case YT.PlayerState.PAUSED:if(!O){O=true;clearInterval(U);A.dispatchEvent("pause")}break;case YT.PlayerState.BUFFERING:y.networkState=A.NETWORK_LOADING;A.dispatchEvent("waiting")}}function J(I){if(A._canPlaySrc(I)){y.src=I;if(e()){if(B)if(B&&N){clearInterval(T);N.stopVideo();N.clearVideo();x.removeChild(H);H=null}H=l.createElement("div");H.width=
y.width;H.height=y.height;x.appendChild(H);var M=A._util.parseUri(I).queryKey;delete M.v;y.autoplay=M.autoplay==="1"||y.autoplay;delete M.autoplay;y.loop=M.loop==="1"||y.loop;delete M.loop;M.rel=M.rel||0;M.modestbranding=M.modestbranding||1;M.iv_load_policy=M.iv_load_policy||3;M.showinfo=M.showinfo||0;var W=g.location.protocol==="file:"?"*":g.location.protocol+"//"+g.location.host;M.origin=M.origin||W;M.controls=M.controls||y.controls?2:0;y.controls=M.controls;M.wmode=M.wmode||"transparent";I=m.exec(I)[1];
N=new YT.Player(H,{width:y.width,height:y.height,wmode:M.wmode,videoId:I,playerVars:M,events:{onReady:G,onError:d,onStateChange:E}});y.networkState=A.NETWORK_LOADING;A.dispatchEvent("loadstart");A.dispatchEvent("progress");Q=false;K()}else b(function(){J(I)})}else{y.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};A.dispatchEvent("error")}}function L(){var I=y.currentTime=N.getCurrentTime();if(!y.seeking&&o(V-I)>i){n();h()}if(R>-1&&o(I-R)<
1){R=-1;h()}V=y.currentTime}function a(I){if(F){n(I);N.seekTo(I)}else v(function(){a(I)})}function f(){A.dispatchEvent("timeupdate")}function n(I){if(I!==undefined)R=I;y.seeking=true;A.dispatchEvent("seeking")}function h(){y.seeking=false;A.dispatchEvent("timeupdate");A.dispatchEvent("seeked");A.dispatchEvent("canplay");A.dispatchEvent("canplaythrough")}function w(){Q=true;y.ended&&a(0);U=setInterval(f,A._util.TIMEUPDATE_MS);if(O){O=false;if(y.loop&&!D||!y.loop){D=true;A.dispatchEvent("play")}A.dispatchEvent("playing")}}
function z(I){y.volume=I;if(F){N.setVolume(y.volume*100);A.dispatchEvent("volumechange")}else v(function(){z(y.volume)})}function t(I){y.muted=I;if(F){N[I?"mute":"unMute"]();A.dispatchEvent("volumechange")}else v(function(){t(y.muted)})}if(!g.postMessage)throw"ERROR: HTMLYouTubeVideoElement requires window.postMessage";var A=this,x=typeof C==="string"?l.querySelector(C):C,H,y={src:j,networkState:A.NETWORK_EMPTY,readyState:A.HAVE_NOTHING,seeking:false,autoplay:j,preload:j,controls:false,loop:false,
poster:j,volume:1,muted:false,currentTime:0,duration:NaN,ended:false,paused:true,width:x.width|0?x.width:k,height:x.height|0?x.height:q,error:null},B=false,F=false,D=false,N,O=true,P=[],T,V=0,R=-1,U,S=true,Q=false;A._eventNamespace=p.guid("HTMLYouTubeVideoElement::");A.parentNode=x;A._util.type="YouTube";A.play=function(){y.paused=false;F?N.playVideo():v(function(){A.play()})};A.pause=function(){y.paused=true;F?N.pauseVideo():v(function(){A.pause()})};Object.defineProperties(A,{src:{get:function(){return y.src},
set:function(I){I&&I!==y.src&&J(I)}},autoplay:{get:function(){return y.autoplay},set:function(I){y.autoplay=A._util.isAttributeSet(I)}},loop:{get:function(){return y.loop},set:function(I){y.loop=A._util.isAttributeSet(I)}},width:{get:function(){return H.width},set:function(I){y.width=I}},height:{get:function(){return H.height},set:function(I){y.height=I}},currentTime:{get:function(){var I;if(F){y.currentTime=N.getCurrentTime();I=y.currentTime}else I=0;return I},set:function(I){a(I)}},duration:{get:function(){return K()}},
ended:{get:function(){return y.ended}},paused:{get:function(){return y.paused}},seeking:{get:function(){return y.seeking}},readyState:{get:function(){return y.readyState}},networkState:{get:function(){return y.networkState}},volume:{get:function(){return y.volume/100},set:function(I){if(I<0||I>1)throw"Volume value must be between 0.0 and 1.0";I*=100;z(I)}},muted:{get:function(){return y.muted},set:function(I){t(A._util.isAttributeSet(I))}},error:{get:function(){return y.error}}})}var i=10,j="",k=
300,q=200,m=/^.*(?:\/|v=)(.{11})/,o=Math.abs,r=false,s=false,u=[];if(g.YT){g.quarantineYT=g.YT;g.YT=null}g.onYouTubeIframeAPIReady=function(){r=true;for(var C=u.length;C--;){u[C]();delete u[C]}};c.prototype=new p._MediaElementProto;c.prototype.constructor=c;c.prototype._canPlaySrc=function(C){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(C)?"probably":j};c.prototype.canPlayType=function(C){return C==="video/x-youtube"?"probably":j};p.HTMLYouTubeVideoElement=function(C){return new c(C)};
p.HTMLYouTubeVideoElement._canPlaySrc=c.prototype._canPlaySrc})(Popcorn,window,document);(function(p){var g=function(l,e){var b=0,c=0,i;p.forEach(e.classes,function(j,k){i=[];if(j==="parent")i[0]=document.querySelectorAll("#"+e.target)[0].parentNode;else i=document.querySelectorAll("#"+e.target+" "+j);b=0;for(c=i.length;b<c;b++)i[b].classList.toggle(k)})};p.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(l){l.classes={};l.applyclass=l.applyclass||"";for(var e=l.applyclass.replace(/\s/g,
"").split(","),b=[],c=0,i=e.length;c<i;c++){b=e[c].split(":");if(b[0])l.classes[b[0]]=b[1]||""}},start:g,end:g})})(Popcorn);(function(p){p.plugin("code",function(g){var l=false,e=this,b=function(){var c=function(i){return function(j,k){var q=function(){l&&j.call(e,k);l&&i(q)};q()}};return window.webkitRequestAnimationFrame?c(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?c(window.mozRequestAnimationFrame):c(function(i){window.setTimeout(i,16)})}();if(!g.onStart||typeof g.onStart!=="function")g.onStart=p.nop;if(g.onEnd&&typeof g.onEnd!=="function")g.onEnd=undefined;if(g.onFrame&&typeof g.onFrame!==
"function")g.onFrame=undefined;return{start:function(c,i){i.onStart.call(e,i);if(i.onFrame){l=true;b(i.onFrame,i)}},end:function(c,i){if(i.onFrame)l=false;i.onEnd&&i.onEnd.call(e,i)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",
optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(p,g){var l={};p.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},
preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(e){function b(){function m(f){e._key=f.api.getId();e._changeView=function(n){e.aid?n.pageSet.showAnnotation(n.api.getAnnotation(e.aid)):n.api.setCurrentPage(e.page)}}function o(){l[e._key]={num:1,id:e._containerId};i.loaded=true}i.loaded=false;var r=e.url.replace(/\.html$/,".js"),
s=e.target,u=g.getElementById(s),C=g.createElement("div"),v=p.position(u),G=e.width||v.width;v=e.height||v.height;var K=e.sidebar||true,d=e.text||true,E=e.pdf||true,J=e.showAnnotations||true,L=e.zoom||700,a=e.search||true;if(!function(f){var n=false;p.forEach(i.viewers,function(h){if(h.api.getSchema().canonicalURL===f){m(h);h=l[e._key];e._containerId=h.id;h.num+=1;n=true;i.loaded=true}});return n}(e.url)){C.id=e._containerId=p.guid(s);s="#"+C.id;u.appendChild(C);j.trigger("documentready");i.load(r,
{width:G,height:v,sidebar:K,text:d,pdf:E,showAnnotations:J,zoom:L,search:a,container:s,afterLoad:e.page||e.aid?function(f){m(f);e._changeView(f);C.style.visibility="hidden";f.elements.pages.hide();o()}:function(f){m(f);o();C.style.visibility="hidden";f.elements.pages.hide()}})}}function c(){window.DV.loaded?b():setTimeout(c,25)}var i=window.DV=window.DV||{},j=this;if(i.loading)c();else{i.loading=true;i.recordHit="//www.documentcloud.org/pixel.gif";var k=g.createElement("link"),q=g.getElementsByTagName("head")[0];
k.rel="stylesheet";k.type="text/css";k.media="screen";k.href="//s3.documentcloud.org/viewer/viewer-datauri.css";q.appendChild(k);i.loaded=false;p.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){i.loading=false;b()})}e.toString=function(){return e.src||e._natives.manifest.options.src["default"]}},start:function(e,b){var c=g.getElementById(b._containerId),i=DV.viewers[b._key];(b.page||b.aid)&&i&&b._changeView(i);if(c&&i){c.style.visibility="visible";i.elements.pages.show()}},end:function(e,
b){var c=g.getElementById(b._containerId);if(c&&DV.viewers[b._key]){c.style.visibility="hidden";DV.viewers[b._key].elements.pages.hide()}},_teardown:function(e){var b=g.getElementById(e._containerId);if((e=e._key)&&DV.viewers[e]&&--l[e].num===0){for(DV.viewers[e].api.unload();b.hasChildNodes();)b.removeChild(b.lastChild);b.parentNode.removeChild(b)}}})})(Popcorn,window.document);(function(p){var g=0;p.plugin("flickr",function(l){var e,b=document.getElementById(l.target),c,i,j,k,q=l.numberofimages||4,m=l.height||"50px",o=l.width||"50px",r=l.padding||"5px",s=l.border||"0px";e=document.createElement("div");e.id="flickr"+g;e.style.width="100%";e.style.height="100%";e.style.display="none";g++;b&&b.appendChild(e);var u=function(){if(c)setTimeout(function(){u()},5);else{i="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";i+="username="+l.username+"&api_key="+
l.apikey+"&format=json&jsoncallback=flickr";p.getJSONP(i,function(v){c=v.user.nsid;C()})}},C=function(){i="http://api.flickr.com/services/feeds/photos_public.gne?";if(c)i+="id="+c+"&";if(l.tags)i+="tags="+l.tags+"&";i+="lang=en-us&format=json&jsoncallback=flickr";p.xhr.getJSONP(i,function(v){var G=document.createElement("div");G.innerHTML="<p style='padding:"+r+";'>"+v.title+"<p/>";p.forEach(v.items,function(K,d){if(d<q){j=document.createElement("a");j.setAttribute("href",K.link);j.setAttribute("target",
"_blank");k=document.createElement("img");k.setAttribute("src",K.media.m);k.setAttribute("height",m);k.setAttribute("width",o);k.setAttribute("style","border:"+s+";padding:"+r);j.appendChild(k);G.appendChild(j)}else return false});e.appendChild(G)})};if(l.username&&l.apikey)u();else{c=l.userid;C()}l.toString=function(){return l.tags||l.username||"Flickr"};return{start:function(){e.style.display="inline"},end:function(){e.style.display="none"},_teardown:function(v){document.getElementById(v.target)&&
document.getElementById(v.target).removeChild(e)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",
label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(p){p.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(g){var l=p.dom.find(g.target);g._container=document.createElement("div");g._container.style.display="none";g._container.innerHTML=g.text;l.appendChild(g._container)},
start:function(g,l){l._container.style.display="inline"},end:function(g,l){l._container.style.display="none"},_teardown:function(g){var l=p.dom.find(g.target);l&&l.removeChild(g._container)}})})(Popcorn);(function(p){var g=1,l=false;p.plugin("googlefeed",function(e){var b=function(){var k=false,q=0,m=document.getElementsByTagName("link"),o=m.length,r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("link");if(window.GFdynamicFeedControl)l=true;else p.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){l=true});for(;q<o;q++)if(m[q].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css")k=true;if(!k){s.type=
"text/css";s.rel="stylesheet";s.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";r.insertBefore(s,r.firstChild)}};window.google?b():p.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){b()}})});var c=document.createElement("div"),i=document.getElementById(e.target),j=function(){if(l)e.feed=new GFdynamicFeedControl(e.url,c,{vertical:e.orientation.toLowerCase()==="vertical"?true:false,horizontal:e.orientation.toLowerCase()==="horizontal"?
true:false,title:e.title=e.title||"Blog"});else setTimeout(function(){j()},5)};if(!e.orientation||e.orientation.toLowerCase()!=="vertical"&&e.orientation.toLowerCase()!=="horizontal")e.orientation="vertical";c.style.display="none";c.id="_feed"+g;c.style.width="100%";c.style.height="100%";g++;i&&i.appendChild(c);j();e.toString=function(){return e.url||e._natives.manifest.options.url["default"]};return{start:function(){c.setAttribute("style","display:inline")},end:function(){c.setAttribute("style",
"display:none")},_teardown:function(k){document.getElementById(k.target)&&document.getElementById(k.target).removeChild(c);delete k.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",
label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);var googleCallback;
(function(p){function g(j,k,q){j=j.type?j.type.toUpperCase():"HYBRID";var m;if(j==="STAMEN-WATERCOLOR"||j==="STAMEN-TERRAIN"||j==="STAMEN-TONER")m=j.replace("STAMEN-","").toLowerCase();q=new google.maps.Map(q,{mapTypeId:m?m:google.maps.MapTypeId[j],mapTypeControlOptions:{mapTypeIds:[]}});m&&q.mapTypes.set(m,new google.maps.StamenMapType(m));q.getDiv().style.display="none";return q}var l=1,e=false,b=false,c,i;googleCallback=function(j){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&
google.maps.LatLng){c=new google.maps.Geocoder;p.getScript("//maps.stamen.com/js/tile.stamen.js",function(){b=true})}else setTimeout(function(){googleCallback(j)},1)};i=function(){if(document.body){e=true;p.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else setTimeout(function(){i()},1)};p.plugin("googlemap",function(j){var k,q,m,o=document.getElementById(j.target);j.type=j.type||"ROADMAP";j.zoom=j.zoom||1;j.lat=j.lat||0;j.lng=j.lng||0;e||i();k=document.createElement("div");
k.id="actualmap"+l;k.style.width=j.width||"100%";k.style.height=j.height?j.height:o&&o.clientHeight?o.clientHeight+"px":"100%";l++;o&&o.appendChild(k);var r=function(){if(b){if(k)if(j.location)c.geocode({address:j.location},function(s,u){if(k&&u===google.maps.GeocoderStatus.OK){j.lat=s[0].geometry.location.lat();j.lng=s[0].geometry.location.lng();m=new google.maps.LatLng(j.lat,j.lng);q=g(j,m,k)}});else{m=new google.maps.LatLng(j.lat,j.lng);q=g(j,m,k)}}else setTimeout(function(){r()},5)};r();j.toString=
function(){return j.location||(j.lat&&j.lng?j.lat+", "+j.lng:j._natives.manifest.options.location["default"])};return{start:function(s,u){var C=this,v,G=function(){if(q){u._map=q;q.getDiv().style.display="block";google.maps.event.trigger(q,"resize");q.setCenter(m);if(u.zoom&&typeof u.zoom!=="number")u.zoom=+u.zoom;q.setZoom(u.zoom);if(u.heading&&typeof u.heading!=="number")u.heading=+u.heading;if(u.pitch&&typeof u.pitch!=="number")u.pitch=+u.pitch;if(u.type==="STREETVIEW"){q.setStreetView(v=new google.maps.StreetViewPanorama(k,
{position:m,pov:{heading:u.heading=u.heading||0,pitch:u.pitch=u.pitch||0,zoom:u.zoom}}));var K=function(n,h){var w=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var z=C.media.currentTime;if(typeof u.tween==="object"){for(var t=0,A=n.length;t<A;t++){var x=n[t];if(z>=x.interval*(t+1)/1E3&&(z<=x.interval*(t+2)/1E3||z>=x.interval*A/1E3)){a.setPosition(new google.maps.LatLng(x.position.lat,x.position.lng));a.setPov({heading:x.pov.heading||w(x,n[t+1])||0,zoom:x.pov.zoom||0,pitch:x.pov.pitch||
0})}}K(n,n[0].interval)}else{t=0;for(A=n.length;t<A;t++){x=u.interval;if(z>=x*(t+1)/1E3&&(z<=x*(t+2)/1E3||z>=x*A/1E3)){d.setPov({heading:w(n[t],n[t+1])||0,zoom:u.zoom,pitch:u.pitch||0});d.setPosition(E[t])}}K(E,u.interval)}},h)};if(u.location&&typeof u.tween==="string"){var d=v,E=[],J=new google.maps.DirectionsService,L=new google.maps.DirectionsRenderer(d);J.route({origin:u.location,destination:u.tween,travelMode:google.maps.TravelMode.DRIVING},function(n,h){if(h==google.maps.DirectionsStatus.OK){L.setDirections(n);
for(var w=n.routes[0].overview_path,z=0,t=w.length;z<t;z++)E.push(new google.maps.LatLng(w[z].lat(),w[z].lng()));u.interval=u.interval||1E3;K(E,10)}})}else if(typeof u.tween==="object"){var a=v;J=0;for(var f=u.tween.length;J<f;J++){u.tween[J].interval=u.tween[J].interval||1E3;K(u.tween,10)}}}u.onmaploaded&&u.onmaploaded(u,q)}else setTimeout(function(){G()},13)};G()},end:function(){if(q)q.getDiv().style.display="none"},_teardown:function(s){var u=document.getElementById(s.target);u&&u.removeChild(k);
k=q=m=null;s._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",
type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(p){function g(b){function c(){var q=b.getBoundingClientRect(),m=j.getBoundingClientRect();if(m.left!==q.left)j.style.left=q.left+"px";if(m.top!==q.top)j.style.top=q.top+"px"}var i=-1,j=document.createElement("div"),k=getComputedStyle(b).zIndex;j.setAttribute("data-popcorn-helper-container",true);j.style.position="absolute";j.style.zIndex=isNaN(k)?l:k+1;document.body.appendChild(j);return{element:j,start:function(){i=setInterval(c,e)},stop:function(){clearInterval(i);i=-1},destroy:function(){document.body.removeChild(j);
i!==-1&&clearInterval(i)}}}var l=2E3,e=10;p.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",
optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(b){var c=document.createElement("img"),i=document.getElementById(b.target);b.anchor=document.createElement("a");b.anchor.style.position="relative";b.anchor.style.textDecoration="none";b.anchor.style.display="none";if(i)if(["VIDEO","AUDIO"].indexOf(i.nodeName)>-1){b.trackedContainer=g(i);b.trackedContainer.element.appendChild(b.anchor)}else i&&i.appendChild(b.anchor);
c.addEventListener("load",function(){c.style.borderStyle="none";b.anchor.href=b.href||b.src||"#";b.anchor.target="_blank";var j,k;c.style.height=i.style.height;c.style.width=i.style.width;b.anchor.appendChild(c);if(b.text){j=c.height/12+"px";k=document.createElement("div");p.extend(k.style,{color:"black",fontSize:j,fontWeight:"bold",position:"relative",textAlign:"center",width:c.style.width||c.width+"px",zIndex:"10"});k.innerHTML=b.text||"";k.style.top=(c.style.height.replace("px","")||c.height)/
2-k.offsetHeight/2+"px";b.anchor.insertBefore(k,c)}},false);c.src=b.src;b.toString=function(){var j=b.src||b._natives.manifest.options.src["default"],k=j.replace(/.*\//g,"");return k.length?k:j}},start:function(b,c){c.anchor.style.display="inline";c.trackedContainer&&c.trackedContainer.start()},end:function(b,c){c.anchor.style.display="none";c.trackedContainer&&c.trackedContainer.stop()},_teardown:function(b){if(b.trackedContainer)b.trackedContainer.destroy();else b.anchor.parentNode&&b.anchor.parentNode.removeChild(b.anchor)}})})(Popcorn);(function(p){var g=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,l={},e={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(l,void 0,{get:function(){return e[void 0]},set:function(b){e[void 0]=b}});p.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},
caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(b){function c(){function o(){if(k!==
"HTML5"&&!window.Popcorn[k])setTimeout(function(){o()},300);else{b.id=b._container.id;b._container.style.width=b.width+"px";b._container.style.height=b.height+"px";b.popcorn=p.smart("#"+b.id,b.source);k==="HTML5"&&b.popcorn.controls(true);b._container.style.width="0px";b._container.style.height="0px";b._container.style.visibility="hidden";b._container.style.overflow="hidden"}}if(k!=="HTML5"&&!window.Popcorn[k]&&!l[k]){l[k]=true;p.getScript("http://popcornjs.org/code/players/"+k+"/popcorn."+k+".js",
function(){o()})}else o()}function i(){window.Popcorn.player?c():setTimeout(function(){i()},300)}var j=document.getElementById(b.target)||{},k,q,m;if(q=g.exec(b.source)){k=q[1];if(k==="youtu")k="youtube"}else k="HTML5";b._type=k;b._container=document.createElement("div");q=b._container;q.id="mediaSpawnerdiv-"+p.guid();b.width=b.width||400;b.height=b.height||200;if(b.caption){m=document.createElement("div");m.innerHTML=b.caption;m.style.display="none";b._capCont=m;q.appendChild(m)}j&&j.appendChild(q);
if(!window.Popcorn.player&&!l.module){l.module=true;p.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",i)}else i();b.toString=function(){return b.source||b._natives.manifest.options.source["default"]}},start:function(b,c){if(c._capCont)c._capCont.style.display="";c._container.style.width=c.width+"px";c._container.style.height=c.height+"px";c._container.style.visibility="visible";c._container.style.overflow="visible";c.autoplay&&c.popcorn.play()},end:function(b,c){if(c._capCont)c._capCont.style.display=
"none";c._container.style.width="0px";c._container.style.height="0px";c._container.style.visibility="hidden";c._container.style.overflow="hidden";c.popcorn.pause()},_teardown:function(b){b.popcorn&&b.popcorn.destory&&b.popcorn.destroy();document.getElementById(b.target)&&document.getElementById(b.target).removeChild(b._container)}})})(Popcorn,this);(function(p){p.plugin("mustache",function(g){var l,e,b,c;p.getScript("http://mustache.github.com/extras/mustache.js");var i=!!g.dynamic,j=typeof g.template,k=typeof g.data,q=document.getElementById(g.target);g.container=q||document.createElement("div");if(j==="function")if(i)b=g.template;else c=g.template(g);else c=j==="string"?g.template:"";if(k==="function")if(i)l=g.data;else e=g.data(g);else e=k==="string"?JSON.parse(g.data):k==="object"?g.data:"";return{start:function(m,o){var r=function(){if(window.Mustache){if(l)e=
l(o);if(b)c=b(o);var s=Mustache.to_html(c,e).replace(/^\s*/mg,"");o.container.innerHTML=s}else setTimeout(function(){r()},10)};r()},end:function(m,o){o.container.innerHTML=""},_teardown:function(){l=e=b=c=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",
label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(p){function g(e,b){if(e.map)e.map.div.style.display=b;else setTimeout(function(){g(e,b)},10)}var l=1;p.plugin("openmap",function(e){var b,c,i,j,k,q,m,o,r=document.getElementById(e.target);b=document.createElement("div");b.id="openmapdiv"+l;b.style.width="100%";b.style.height="100%";l++;r&&r.appendChild(b);o=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(e.location){location=new OpenLayers.LonLat(0,0);p.getJSONP("//tinygeocoder.com/create-api.php?q="+e.location+"&callback=jsonp",
function(u){c=new OpenLayers.LonLat(u[1],u[0])})}else c=new OpenLayers.LonLat(e.lng,e.lat);e.type=e.type||"ROADMAP";switch(e.type){case "SATELLITE":e.map=new OpenLayers.Map({div:b,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var s=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});e.map.addLayer(s);j=new OpenLayers.Projection("EPSG:4326");i=new OpenLayers.Projection("EPSG:4326");break;case "TERRAIN":j=new OpenLayers.Projection("EPSG:4326");
i=new OpenLayers.Projection("EPSG:4326");e.map=new OpenLayers.Map({div:b,projection:i});s=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});e.map.addLayer(s);break;case "STAMEN-TONER":case "STAMEN-WATERCOLOR":case "STAMEN-TERRAIN":s=e.type.replace("STAMEN-","").toLowerCase();s=new OpenLayers.Layer.Stamen(s);j=new OpenLayers.Projection("EPSG:4326");i=new OpenLayers.Projection("EPSG:900913");c=c.transform(j,i);e.map=new OpenLayers.Map({div:b,projection:i,
displayProjection:j,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});e.map.addLayer(s);break;default:i=new OpenLayers.Projection("EPSG:900913");j=new OpenLayers.Projection("EPSG:4326");c=c.transform(j,i);e.map=new OpenLayers.Map({div:b,projection:i,displayProjection:j});s=new OpenLayers.Layer.OSM;e.map.addLayer(s)}if(e.map){e.map.setCenter(c,e.zoom||10);e.map.div.style.display="none"}}else setTimeout(function(){o()},50)};o();return{_setup:function(s){window.OpenLayers||
p.getScript("//openlayers.org/api/OpenLayers.js",function(){p.getScript("//maps.stamen.com/js/tile.stamen.js")});var u=function(){if(s.map){s.zoom=s.zoom||2;if(s.zoom&&typeof s.zoom!=="number")s.zoom=+s.zoom;s.map.setCenter(c,s.zoom);if(s.markers){var C=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),v=function(f){clickedFeature=f.feature;if(clickedFeature.attributes.text){m=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),
new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){q.unselect(this.feature)});clickedFeature.popup=m;m.feature=clickedFeature;s.map.addPopup(m)}},G=function(f){feature=f.feature;if(feature.popup){m.feature=null;s.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},K=function(f){p.getJSONP("//tinygeocoder.com/create-api.php?q="+f.location+"&callback=jsonp",function(n){n=(new OpenLayers.Geometry.Point(n[1],n[0])).transform(j,i);var h=OpenLayers.Util.extend({},
C);if(!f.size||isNaN(f.size))f.size=14;h.pointRadius=f.size;h.graphicOpacity=1;h.externalGraphic=f.icon;n=new OpenLayers.Feature.Vector(n,null,h);if(f.text)n.attributes={text:f.text};k.addFeatures([n])})};k=new OpenLayers.Layer.Vector("Point Layer",{style:C});s.map.addLayer(k);for(var d=0,E=s.markers.length;d<E;d++){var J=s.markers[d];if(J.text)if(!q){q=new OpenLayers.Control.SelectFeature(k);s.map.addControl(q);q.activate();k.events.on({featureselected:v,featureunselected:G})}if(J.location)K(J);
else{var L=(new OpenLayers.Geometry.Point(J.lng,J.lat)).transform(j,i),a=OpenLayers.Util.extend({},C);if(!J.size||isNaN(J.size))J.size=14;a.pointRadius=J.size;a.graphicOpacity=1;a.externalGraphic=J.icon;L=new OpenLayers.Feature.Vector(L,null,a);if(J.text)L.attributes={text:J.text};k.addFeatures([L])}}}}else setTimeout(function(){u()},13)};u()},start:function(s,u){g(u,"block")},end:function(s,u){g(u,"none")},_teardown:function(){r&&r.removeChild(b);b=map=c=i=j=k=q=m=null}}},{about:{name:"Popcorn OpenMap Plugin",
version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location",
"default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(p){p=p.target;if(p.nodeName==="A"||p.parentNode&&p.parentNode.nodeName==="A")Popcorn.instances.forEach(function(g){g.options.pauseOnLinkClicked&&g.pause()})},false);(function(p){var g=0,l=function(e,b){var c=e.container=document.createElement("div"),i=c.style,j=e.media,k=function(){var q=e.position();i.fontSize="18px";i.width=j.offsetWidth+"px";i.top=q.top+j.offsetHeight-c.offsetHeight-40+"px";i.left=q.left+"px";setTimeout(k,10)};c.id=b||p.guid();i.position="absolute";i.color="white";i.textShadow="black 2px 2px 6px";i.fontWeight="bold";i.textAlign="center";k();e.media.parentNode.appendChild(c);return c};p.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",
version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(e){var b=document.createElement("div");b.id="subtitle-"+g++;b.style.display="none";!this.container&&(!e.target||e.target==="subtitle-container")&&l(this);e.container=e.target&&e.target!=="subtitle-container"?document.getElementById(e.target)||
l(this,e.target):this.container;document.getElementById(e.container.id)&&document.getElementById(e.container.id).appendChild(b);e.innerContainer=b;e.showSubtitle=function(){e.innerContainer.innerHTML=e.text||""}},start:function(e,b){b.innerContainer.style.display="inline";b.showSubtitle(b,b.text)},end:function(e,b){b.innerContainer.style.display="none";b.innerContainer.innerHTML=""},_teardown:function(e){e.container.removeChild(e.innerContainer)}})})(Popcorn);(function(p){function g(b){return String(b).replace(/&(?!\w+;)|[<>"']/g,function(c){return e[c]||c})}function l(b,c){var i=b.container=document.createElement("div"),j=i.style,k=b.media,q=function(){var m=b.position();j.fontSize="18px";j.width=k.offsetWidth+"px";j.top=m.top+k.offsetHeight-i.offsetHeight-40+"px";j.left=m.left+"px";setTimeout(q,10)};i.id=c||"";j.position="absolute";j.color="white";j.textShadow="black 2px 2px 6px";j.fontWeight="bold";j.textAlign="center";q();b.media.parentNode.appendChild(i);
return i}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};p.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(b){var c,i,j=b._container=document.createElement("div");
j.style.display="none";if(b.target)if(c=p.dom.find(b.target)){if(["VIDEO","AUDIO"].indexOf(c.nodeName)>-1)c=l(this,b.target+"-overlay")}else c=l(this,b.target);else c=this.container?this.container:l(this);b._target=c;i=b.escape?g(b.text):b.text;i=b.multiline?i.replace(/\r?\n/gm,"<br>"):i;j.innerHTML=i||"";c.appendChild(j);b.toString=function(){return b.text||b._natives.manifest.options.text["default"]}},start:function(b,c){c._container.style.display="inline"},end:function(b,c){c._container.style.display=
"none"},_teardown:function(b){var c=b._target;c&&c.removeChild(b._container)}})})(Popcorn);(function(p){var g=1;p.plugin("timeline",function(l){var e=document.getElementById(l.target),b=document.createElement("div"),c,i=true;if(e&&!e.firstChild){e.appendChild(c=document.createElement("div"));c.style.width="inherit";c.style.height="inherit";c.style.overflow="auto"}else c=e.firstChild;b.style.display="none";b.id="timelineDiv"+g;l.direction=l.direction||"up";if(l.direction.toLowerCase()==="down")i=false;if(e&&c)i?c.insertBefore(b,c.firstChild):c.appendChild(b);g++;b.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+
l.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+l.text+"</span><br />"+l.innerHTML;return{start:function(j,k){b.style.display="block";if(k.direction==="down")c.scrollTop=c.scrollHeight},end:function(){b.style.display="none"},_teardown:function(){c&&b&&c.removeChild(b)&&!c.firstChild&&e.removeChild(c)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},
end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(p){var g=false;p.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width",
"default":"250",optional:true}}},_setup:function(l){if(!window.TWTR&&!g){g=true;p.getScript("//widgets.twimg.com/j/2/widget.js")}var e=document.getElementById(l.target);l.container=document.createElement("div");l.container.setAttribute("id",p.guid());l.container.style.display="none";e&&e.appendChild(l.container);var b=l.src||"";e=l.width||250;var c=l.height||200,i=/^@/.test(b),j={version:2,id:l.container.getAttribute("id"),rpp:30,width:e,height:c,interval:6E3,theme:{shell:{background:"#ffffff",color:"#000000"},
tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},k=function(q){if(window.TWTR)if(i){j.type="profile";(new TWTR.Widget(j)).render().setUser(b).start()}else{j.type="search";j.search=b;j.subject=b;(new TWTR.Widget(j)).render().start()}else setTimeout(function(){k(q)},1)};l.toString=function(){return l.src||l._natives.manifest.options.src["default"]};k(this)},start:function(l,
e){e.container.style.display="inline"},end:function(l,e){e.container.style.display="none"},_teardown:function(l){document.getElementById(l.target)&&document.getElementById(l.target).removeChild(l.container)}})})(Popcorn);(function(p){p.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(g){var l=document.getElementById(g.target);g.src=g.src.replace(/^(https?:)?(\/\/)?/,
"//");g._iframe=document.createElement("iframe");g._iframe.setAttribute("width","100%");g._iframe.setAttribute("height","100%");g._iframe.id=g.id;g._iframe.src=g.src;g._iframe.style.display="none";l&&l.appendChild(g._iframe)},start:function(g,l){l._iframe.src=l.src;l._iframe.style.display="inline"},end:function(g,l){l._iframe.style.display="none"},_teardown:function(g){document.getElementById(g.target)&&document.getElementById(g.target).removeChild(g._iframe)}})})(Popcorn);var wikiCallback;
(function(p){p.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},
numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(g){var l,e=p.guid();if(!g.lang)g.lang="en";g.numberofwords=g.numberofwords||200;window["wikiCallback"+e]=function(b){g._link=document.createElement("a");g._link.setAttribute("href",g.src);g._link.setAttribute("target","_blank");g._link.innerHTML=g.title||b.parse.displaytitle;g._desc=document.createElement("p");l=b.parse.text["*"].substr(b.parse.text["*"].indexOf("<p>"));
l=l.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");l=l.split(" ");g._desc.innerHTML=l.slice(0,l.length>=g.numberofwords?g.numberofwords:l.length).join(" ")+" ...";g._fired=true};g.src&&p.getScript("//"+g.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+g.src.slice(g.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+e);g.toString=function(){return g.src||g._natives.manifest.options.src["default"]}},start:function(g,l){var e=function(){if(l._fired){if(l._link&&
l._desc)if(document.getElementById(l.target)){document.getElementById(l.target).appendChild(l._link);document.getElementById(l.target).appendChild(l._desc);l._added=true}}else setTimeout(function(){e()},13)};e()},end:function(g,l){if(l._added){document.getElementById(l.target).removeChild(l._link);document.getElementById(l.target).removeChild(l._desc)}},_teardown:function(g){if(g._added){g._link.parentNode&&document.getElementById(g.target).removeChild(g._link);g._desc.parentNode&&document.getElementById(g.target).removeChild(g._desc);
delete g.target}}})})(Popcorn);(function(p){var g={},l=0,e=document.createElement("span"),b=["webkit","Moz","ms","O",""],c=["Transform","TransitionDuration","TransitionTimingFunction"],i={},j;document.getElementsByTagName("head")[0].appendChild(e);for(var k=0,q=c.length;k<q;k++)for(var m=0,o=b.length;m<o;m++){j=b[m]+c[k];if(j in e.style){i[c[k].toLowerCase()]=j;break}}document.getElementsByTagName("head")[0].appendChild(e);p.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",
label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(r){r._duration=r.end-r.start;var s;if(!(s=g[r.target])){s=r.target;g[s]=document.createElement("div");var u=document.getElementById(s);u&&u.appendChild(g[s]);g[s].style.height="100%";g[s].style.position="relative";s=g[s]}r._container=s;r.word=document.createElement("span");
r.word.style.position="absolute";r.word.style.whiteSpace="nowrap";r.word.style.opacity=0;r.word.style.MozTransitionProperty="opacity, -moz-transform";r.word.style.webkitTransitionProperty="opacity, -webkit-transform";r.word.style.OTransitionProperty="opacity, -o-transform";r.word.style.transitionProperty="opacity, transform";r.word.style[i.transitionduration]="1s, "+r._duration+"s";r.word.style[i.transitiontimingfunction]="linear";r.word.innerHTML=r.text;r.word.style.color=r.color||"black"},start:function(r,
s){s._container.appendChild(s.word);s.word.style[i.transform]="";s.word.style.fontSize=~~(30+20*Math.random())+"px";l%=s._container.offsetWidth-s.word.offsetWidth;s.word.style.left=l+"px";l+=s.word.offsetWidth+10;s.word.style[i.transform]="translateY("+(s._container.offsetHeight-s.word.offsetHeight)+"px)";s.word.style.opacity=1;setTimeout(function(){s.word.style.opacity=0},(s.end-s.start-1||1)*1E3)},end:function(r,s){s.word.style.opacity=0},_teardown:function(r){var s=document.getElementById(r.target);
r.word.parentNode&&r._container.removeChild(r.word);g[r.target]&&!g[r.target].childElementCount&&s&&s.removeChild(g[r.target])&&delete g[r.target]}})})(Popcorn);(function(p){p.parser("parseJSON","JSON",function(g){var l={title:"",remote:"",data:[]};p.forEach(g.data,function(e){l.data.push(e)});return l})})(Popcorn);(function(p){p.parser("parseSBV",function(g){var l={title:"",remote:"",data:[]},e=[],b=0,c=0,i=function(r){r=r.split(":");var s=r.length-1,u;try{u=parseInt(r[s-1],10)*60+parseFloat(r[s],10);if(s===2)u+=parseInt(r[0],10)*3600}catch(C){throw"Bad cue";}return u},j=function(r,s){var u={};u[r]=s;return u};g=g.text.split(/(?:\r\n|\r|\n)/gm);for(c=g.length;b<c;){var k={},q=[],m=g[b++].split(",");try{k.start=i(m[0]);for(k.end=i(m[1]);b<c&&g[b];)q.push(g[b++]);k.text=q.join("<br />");e.push(j("subtitle",k))}catch(o){for(;b<
c&&g[b];)b++}for(;b<c&&!g[b];)b++}l.data=e;return l})})(Popcorn);(function(p){function g(e,b){var c={};c[e]=b;return c}function l(e){e=e.split(":");try{var b=e[2].split(",");if(b.length===1)b=e[2].split(".");return parseFloat(e[0],10)*3600+parseFloat(e[1],10)*60+parseFloat(b[0],10)+parseFloat(b[1],10)/1E3}catch(c){return 0}}p.parser("parseSRT",function(e){var b={title:"",remote:"",data:[]},c=[],i=0,j=0,k,q,m,o;e=e.text.split(/(?:\r\n|\r|\n)/gm);for(i=e.length-1;i>=0&&!e[i];)i--;m=i+1;for(i=0;i<m;i++){o={};q=[];o.id=parseInt(e[i++],10);k=e[i++].split(/[\t ]*--\>[\t ]*/);
o.start=l(k[0]);j=k[1].indexOf(" ");if(j!==-1)k[1]=k[1].substr(0,j);for(o.end=l(k[1]);i<m&&e[i];)q.push(e[i++]);o.text=q.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");o.text=o.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");o.text=o.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");o.text=o.text.replace(/\\N/gi,"<br />");c.push(g("subtitle",o))}b.data=c;return b})})(Popcorn);(function(p){function g(b,c){var i=b.substr(10).split(","),j;j={start:l(i[c.start]),end:l(i[c.end])};if(j.start===-1||j.end===-1)throw"Invalid time";var k=r.call(m,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),q=k.replace,m;m=i.length;r=[];for(var o=c.text;o<m;o++)r.push(i[o]);m=r.join(",");var r=m.replace;j.text=q.call(k,/\\N/gi,"<br />");return j}function l(b){var c=b.split(":");if(b.length!==10||c.length<3)return-1;return parseInt(c[0],10)*3600+parseInt(c[1],10)*60+parseFloat(c[2],10)}function e(b,
c){var i={};i[b]=c;return i}p.parser("parseSSA",function(b){var c={title:"",remote:"",data:[]},i=[],j=0,k;b=b.text.split(/(?:\r\n|\r|\n)/gm);for(k=b.length;j<k&&b[j]!=="[Events]";)j++;var q=b[++j].substr(8).split(", "),m={},o,r;r=0;for(o=q.length;r<o;r++)if(q[r]==="Start")m.start=r;else if(q[r]==="End")m.end=r;else if(q[r]==="Text")m.text=r;for(;++j<k&&b[j]&&b[j][0]!=="[";)try{i.push(e("subtitle",g(b[j],m)))}catch(s){}c.data=i;return c})})(Popcorn);(function(p){function g(j,k,q){var m=j.firstChild;j=l(j,q);q=[];for(var o;m;){if(m.nodeType===1)if(m.nodeName==="p")q.push(e(m,k,j));else if(m.nodeName==="div"){o=b(m.getAttribute("begin"));if(o<0)o=k;q.push.apply(q,g(m,o,j))}m=m.nextSibling}return q}function l(j,k){var q=j.getAttribute("region");return q!==null?q:k||""}function e(j,k,q){var m={};m.text=(j.textContent||j.text).replace(c,"").replace(i,"<br />");m.id=j.getAttribute("xml:id")||j.getAttribute("id");m.start=b(j.getAttribute("begin"),k);
m.end=b(j.getAttribute("end"),k);m.target=l(j,q);if(m.end<0){m.end=b(j.getAttribute("duration"),0);if(m.end>=0)m.end+=m.start;else m.end=Number.MAX_VALUE}return{subtitle:m}}function b(j,k){var q;if(!j)return-1;try{return p.util.toSeconds(j)}catch(m){for(var o=j.length-1;o>=0&&j[o]<="9"&&j[o]>="0";)o--;q=o;o=parseFloat(j.substring(0,q));q=j.substring(q);return o*({h:3600,m:60,s:1,ms:0.0010}[q]||-1)+(k||0)}}var c=/^[\s]+|[\s]+$/gm,i=/(?:\r\n|\r|\n)/gm;p.parser("parseTTML",function(j){var k={title:"",
remote:"",data:[]};if(!j.xml||!j.xml.documentElement)return k;j=j.xml.documentElement.firstChild;if(!j)return k;for(;j.nodeName!=="body";)j=j.nextSibling;if(j)k.data=g(j,0);return k})})(Popcorn);(function(p){p.parser("parseTTXT",function(g){var l={title:"",remote:"",data:[]},e=function(k){k=k.split(":");var q=0;try{return parseFloat(k[0],10)*60*60+parseFloat(k[1],10)*60+parseFloat(k[2],10)}catch(m){q=0}return q},b=function(k,q){var m={};m[k]=q;return m};g=g.xml.lastChild.lastChild;for(var c=Number.MAX_VALUE,i=[];g;){if(g.nodeType===1&&g.nodeName==="TextSample"){var j={};j.start=e(g.getAttribute("sampleTime"));j.text=g.getAttribute("text");if(j.text){j.end=c-0.0010;i.push(b("subtitle",j))}c=
j.start}g=g.previousSibling}l.data=i.reverse();return l})})(Popcorn);(function(p){function g(e){var b=e.split(":");e=e.length;var c;if(e!==12&&e!==9)throw"Bad cue";e=b.length-1;try{c=parseInt(b[e-1],10)*60+parseFloat(b[e],10);if(e===2)c+=parseInt(b[0],10)*3600}catch(i){throw"Bad cue";}return c}function l(e,b){var c={};c[e]=b;return c}p.parser("parseVTT",function(e){var b={title:"",remote:"",data:[]},c=[],i=0,j=0,k,q;e=e.text.split(/(?:\r\n|\r|\n)/gm);j=e.length;if(j===0||e[0]!=="WEBVTT")return b;for(i++;i<j;){k=[];try{for(var m=i;m<j&&!e[m];)m++;i=m;var o=e[i++];m=
void 0;var r={};if(!o||o.indexOf("--\>")===-1)throw"Bad cue";m=o.replace(/--\>/," --\> ").split(/[\t ]+/);if(m.length<2)throw"Bad cue";r.id=o;r.start=g(m[0]);r.end=g(m[2]);for(q=r;i<j&&e[i];)k.push(e[i++]);q.text=k.join("<br />");c.push(l("subtitle",q))}catch(s){for(i=i;i<j&&e[i];)i++;i=i}}b.data=c;return b})})(Popcorn);(function(p){p.parser("parseXML","XML",function(g){var l={title:"",remote:"",data:[]},e={},b=function(m){m=m.split(":");if(m.length===1)return parseFloat(m[0],10);else if(m.length===2)return parseFloat(m[0],10)+parseFloat(m[1]/12,10);else if(m.length===3)return parseInt(m[0]*60,10)+parseFloat(m[1],10)+parseFloat(m[2]/12,10);else if(m.length===4)return parseInt(m[0]*3600,10)+parseInt(m[1]*60,10)+parseFloat(m[2],10)+parseFloat(m[3]/12,10)},c=function(m){for(var o={},r=0,s=m.length;r<s;r++){var u=m.item(r).nodeName,
C=m.item(r).nodeValue,v=e[C];if(u==="in")o.start=b(C);else if(u==="out")o.end=b(C);else if(u==="resourceid")for(var G in v){if(v.hasOwnProperty(G))if(!o[G]&&G!=="id")o[G]=v[G]}else o[u]=C}return o},i=function(m,o){var r={};r[m]=o;return r},j=function(m,o,r){var s={};p.extend(s,o,c(m.attributes),{text:m.textContent||m.text});o=m.childNodes;if(o.length<1||o.length===1&&o[0].nodeType===3)if(r)e[s.id]=s;else l.data.push(i(m.nodeName,s));else for(m=0;m<o.length;m++)o[m].nodeType===1&&j(o[m],s,r)};g=g.documentElement.childNodes;
for(var k=0,q=g.length;k<q;k++)if(g[k].nodeType===1)g[k].nodeName==="manifest"?j(g[k],{},true):j(g[k],{},false);return l})})(Popcorn);(function(p,g){g.player("soundcloud",{_canPlayType:function(l,e){return typeof e==="string"&&g.HTMLSoundCloudAudioElement._canPlaySrc(e)&&l.toLowerCase()!=="audio"}});g.soundcloud=function(l,e,b){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'soundcloud'. Please use Popcorn.HTMLSoundCloudAudioElement directly.");var c=g.HTMLSoundCloudAudioElement(l);l=g(c,b);setTimeout(function(){c.src=e},0);return l}})(window,Popcorn);(function(p,g){g.player("vimeo",{_canPlayType:function(l,e){return typeof e==="string"&&g.HTMLVimeoVideoElement._canPlaySrc(e)}});g.vimeo=function(l,e,b){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'vimeo'. Please use Popcorn.HTMLVimeoVideoElement directly.");var c=g.HTMLVimeoVideoElement(l);l=g(c,b);setTimeout(function(){c.src=e},0);return l}})(window,Popcorn);(function(p,g){var l=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(?:youtu).*(?:\/|v=)(.{11})/;p.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var b=0;b<onYouTubePlayerAPIReady.waiting.length;b++)onYouTubePlayerAPIReady.waiting[b]()};if(p.YT){p.quarantineYT=p.YT;p.YT=null}onYouTubePlayerAPIReady.waiting=[];var e=false;g.player("youtube",{_canPlayType:function(b,c){return typeof c==="string"&&l.test(c)&&b.toLowerCase()!=="video"},_setup:function(b){if(!p.YT&&!e){e=true;g.getScript("//youtube.com/player_api")}var c=
this,i=false,j=document.createElement("div"),k=0,q=true,m=false,o=0,r=false,s=100,u=g.player.playerQueue(),C=function(){g.player.defineProperty(c,"currentTime",{set:function(G){if(!b.destroyed){G=Number(G);if(!isNaN(G)){k=G;m=true;c.dispatchEvent("seeking");b.youtubeObject.seekTo(G)}}},get:function(){return k}});g.player.defineProperty(c,"paused",{get:function(){return q}});g.player.defineProperty(c,"muted",{set:function(G){if(b.destroyed)return G;if(b.youtubeObject.isMuted()!==G){G?b.youtubeObject.mute():
b.youtubeObject.unMute();r=b.youtubeObject.isMuted();c.dispatchEvent("volumechange")}return b.youtubeObject.isMuted()},get:function(){if(b.destroyed)return 0;return b.youtubeObject.isMuted()}});g.player.defineProperty(c,"volume",{set:function(G){if(b.destroyed)return G;if(b.youtubeObject.getVolume()/100!==G){b.youtubeObject.setVolume(G*100);s=b.youtubeObject.getVolume();c.dispatchEvent("volumechange")}return b.youtubeObject.getVolume()/100},get:function(){if(b.destroyed)return 0;return b.youtubeObject.getVolume()/
100}});c.play=function(){if(!b.destroyed){q=false;u.add(function(){if(b.youtubeObject.getPlayerState()!==1){m=false;b.youtubeObject.playVideo()}else u.next()})}};c.pause=function(){if(!b.destroyed){q=true;u.add(function(){b.youtubeObject.getPlayerState()!==2?b.youtubeObject.pauseVideo():u.next()})}}};j.id=c.id+g.guid();b._container=j;c.appendChild(j);var v=function(){var G,K,d,E,J=true,L=0.1,a=function(){if(!b.destroyed){var w=b.youtubeObject.getCurrentTime();if(m)if(k>=w-L&&k<=w+L){m=false;L=0.1;
c.dispatchEvent("seeked")}else{L*=2;b.youtubeObject.seekTo(k)}else k=w;c.dispatchEvent("timeupdate");setTimeout(a,200)}},f=function(w){var z=b.youtubeObject.getDuration();if(isNaN(z)||z===0)setTimeout(function(){f(w*2)},w*1E3);else{c.duration=z;c.dispatchEvent("durationchange");c.dispatchEvent("loadedmetadata");c.dispatchEvent("loadeddata");c.readyState=4;a();c.dispatchEvent("canplay");c.dispatchEvent("canplaythrough")}};b.controls=+b.controls===0||+b.controls===1?b.controls:0;b.annotations=+b.annotations===
1||+b.annotations===3?b.annotations:1;G=l.exec(c.src)[1];K=(c.src.split("?")[1]||"").replace(/v=.{11}/,"");K=K.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(w,z,t){z|=0;t|=0;o=+t+z*60;return""});K=K.replace(/&start=(\d+)?/,function(w,z){z|=0;o=z;return""});i=/autoplay=1/.test(K);K=K.split(/[\&\?]/g);d={wmode:"transparent"};for(var n=0;n<K.length;n++){E=K[n].split("=");d[E[0]]=E[1]}d.rel=d.rel||0;d.modestbranding=d.modestbranding||1;d.iv_load_policy=d.iv_load_policy||3;d.showinfo=d.showinfo||0;d.controls=
d.controls||b.controls||0;b.youtubeObject=new YT.Player(j.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:d,videoId:G,events:{onReady:function(){s=c.volume;r=c.muted;h();q=c.paused;C();b.youtubeObject.playVideo();c.currentTime=o;c.dispatchEvent("loadstart")},onStateChange:function(w){if(!(b.destroyed||w.data===-1))if(w.data===2){q=true;c.dispatchEvent("pause");u.next()}else if(w.data===1&&!J){q=false;c.dispatchEvent("play");c.dispatchEvent("playing");u.next()}else if(w.data===0)c.dispatchEvent("ended");
else if(w.data===1&&J){J=false;if(i||!c.paused)q=false;q&&b.youtubeObject.pauseVideo();f(0.025)}},onError:function(w){if([2,100,101,150].indexOf(w.data)!==-1){c.error={customCode:w.data};c.dispatchEvent("error")}}}});var h=function(){if(!b.destroyed){if(r!==b.youtubeObject.isMuted()){r=b.youtubeObject.isMuted();c.dispatchEvent("volumechange")}if(s!==b.youtubeObject.getVolume()){s=b.youtubeObject.getVolume();c.dispatchEvent("volumechange")}setTimeout(h,250)}}};onYouTubePlayerAPIReady.ready?v():onYouTubePlayerAPIReady.waiting.push(v)},
_teardown:function(b){b.destroyed=true;var c=b.youtubeObject;if(c){c.stopVideo();c.clearVideo&&c.clearVideo()}this.removeChild(document.getElementById(b._container.id))}})})(window,Popcorn);
