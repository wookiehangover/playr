/*
 * popcorn.js version cdef06e
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(){document.addEventListener=document.addEventListener||function(i,q){i=i==="DOMContentLoaded"?"onreadystatechange":"on"+i;document.attachEvent(i,q)};document.removeEventListener=document.removeEventListener||function(i,q){i=i==="DOMContentLoaded"?"onreadystatechange":"on"+i;document.detachEvent(i,q)};HTMLScriptElement.prototype.addEventListener=HTMLScriptElement.prototype.addEventListener||function(i,q){i=i==="load"?"onreadystatechange":"on"+i;this.attachEvent(i,q)};HTMLScriptElement.prototype.removeEventListener=
HTMLScriptElement.prototype.removeEventListener||function(i,q){i=i==="load"?"onreadystatechange":"on"+i;this.detachEvent(i,q)};document.createEvent=document.createEvent||function(){return{type:null,target:null,currentTarget:null,cancelable:false,bubbles:false,initEvent:function(i){this.type=i},stopPropagation:function(){},stopImmediatePropagation:function(){}}};Array.prototype.forEach=Array.prototype.forEach||function(i,q){var r=Object.prototype.hasOwnProperty;if(!this||!i)return{};q=q||this;for(var l in this)r.call(this,
l)&&i.call(q,this[l],l,this);return this};if(!Array.prototype.map)Array.prototype.map=function(i,q){var r,l,j;if(this==null)throw new TypeError("this is null or not defined");var m=Object(this),H=m.length>>>0;if({}.toString.call(i)!="[object Function]")throw new TypeError(i+" is not a function");if(q)r=q;l=Array(H);for(j=0;j<H;){var t;if(j in m){t=m[j];t=i.call(r,t,j,m);l[j]=t}j++}return l};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(i){if(this==null)throw new TypeError;var q=Object(this),
r=q.length>>>0;if(r===0)return-1;var l=0;if(arguments.length>0){l=Number(arguments[1]);if(l!=l)l=0;else if(l!=0&&l!=Infinity&&l!=-Infinity)l=(l>0||-1)*Math.floor(Math.abs(l))}if(l>=r)return-1;for(l=l>=0?l:Math.max(r-Math.abs(l),0);l<r;l++)if(l in q&&q[l]===i)return l;return-1}})();
(function(i,q){function r(a){J.put.call(this,a)}function l(a){this.parent=a;this.byStart=[{start:-1,end:-1}];this.byEnd=[{start:-1,end:-1}];this.animating=[];this.endIndex=this.startIndex=0;this.previousUpdateTime=-1;Object.defineProperty(this,"count",{get:function(){return this.byStart.length}})}function j(a,b){var e=a.data.trackEvents.byStart,d=a.data.trackEvents.byEnd,f;b&&b._id&&a.data.history.push(b._id);b.start=c.util.toSeconds(b.start,a.options.framerate);b.end=c.util.toSeconds(b.end,a.options.framerate);
for(f=e.length-1;f>=0;f--)if(b.start>=e[f].start){e.splice(f+1,0,b);break}for(e=d.length-1;e>=0;e--)if(b.end>d[e].end){d.splice(e+1,0,b);break}f<=a.data.trackEvents.startIndex&&b.start<=a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.startIndex++;e<=a.data.trackEvents.endIndex&&b.end<a.data.trackEvents.previousUpdateTime&&a.data.trackEvents.endIndex++;if(b.end>a.media.currentTime&&b.start<=a.media.currentTime){b._running=true;a.data.running[b._natives.type].push(b);if(!a.data.disabled[b._natives.type]){b._natives.start.call(a,
null,b);a.emit("trackstart",c.extend({},b,{plugin:b._natives.type,type:"trackstart",track:b}))}}}function m(a,b,e){var d,f,h,k;h=a.data.trackEvents.byStart.length;var p=0,v=0,w=[],n=[],g=[],o=[],E={};for(e=e||{};--h>-1;){d=a.data.trackEvents.byStart[p];f=a.data.trackEvents.byEnd[p];if(!d._id){w.push(d);n.push(f)}if(d._id){d._id!==b&&w.push(d);f._id!==b&&n.push(f);if(d._id===b){v=p;k=d}}p++}h=a.data.trackEvents.animating.length;p=0;if(h)for(;--h>-1;){d=a.data.trackEvents.animating[p];d._id||g.push(d);
d._id&&d._id!==b&&g.push(d);p++}v<=a.data.trackEvents.startIndex&&a.data.trackEvents.startIndex--;v<=a.data.trackEvents.endIndex&&a.data.trackEvents.endIndex--;a.data.trackEvents.byStart=w;a.data.trackEvents.byEnd=n;a.data.trackEvents.animating=g;h=a.data.history.length;for(p=0;p<h;p++)a.data.history[p]!==b&&o.push(a.data.history[p]);a.data.history=o;E.start=k.start;E.end=k.end;if(e&&e.previous){E.start=e.previous.start!==undefined?e.previous.start:E.start;E.end=e.previous.end!==undefined?e.previous.end:
E.end}if(E.end>a.media.currentTime&&E.start<=a.media.currentTime){b=a.data.running[k._natives.type];k._running=false;b.splice(b.indexOf(k),1);if(!a.data.disabled[k._natives.type]){k._natives.end.call(a,null,k);a.emit("trackend",c.extend({},k,{plugin:k._natives.type,type:"trackend",track:k}))}}}function H(a,b){return function(){if(c.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(e){c.plugin.errors.push({plugin:b,thrown:e,source:a.toString()});this.emit("pluginerror",
c.plugin.errors)}}}if(q.addEventListener){var t=Array.prototype,C=Object.prototype,A=t.forEach,I=t.slice,x=C.hasOwnProperty,D=C.toString,L=i.Popcorn,z=[],F=false,s={events:{hash:{},apis:{}}},u=function(){return i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame||function(a){i.setTimeout(a,16)}}(),J={put:function(a){Object.getOwnPropertyNames(a).forEach(function(b){this[b]=a[b]},this)}},c=function(a,b){return new c.p.init(a,
b||null)};c.version="cdef06e";c.isSupported=true;c.instances=[];c.p=c.prototype={init:function(a,b){var e,d=this;if(typeof a==="function")if(q.readyState==="complete")a(q,c);else{z.push(a);if(!F){F=true;var f=function(){q.removeEventListener("DOMContentLoaded",f,false);for(var p=0,v=z.length;p<v;p++)z[p].call(q,c);z=null};q.addEventListener("DOMContentLoaded",f,false)}}else{if(typeof a==="string")try{e=q.querySelector(a)}catch(h){throw Error("Popcorn.js Error: Invalid media element selector: "+a);
}this.media=e||a;e=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[e]=this.media;this.options=c.extend({},b)||{};this.id=this.options.id||c.guid(e);if(c.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:c.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new l(this)};c.instances.push(this);var k=function(){if(d.media.currentTime<
0)d.media.currentTime=0;d.media.removeEventListener("loadedmetadata",k,false);var p,v,w,n,g;p=d.media.duration;p=p!=p?Number.MAX_VALUE:p+1;c.addTrackEvent(d,{start:p,end:p});if(d.options.frameAnimation){d.data.timeUpdate=function(){c.timeUpdate(d,{});c.forEach(c.manifest,function(o,E){if(v=d.data.running[E]){n=v.length;for(var K=0;K<n;K++){w=v[K];(g=w._natives)&&g.frame&&g.frame.call(d,{},w,d.currentTime())}}});d.emit("timeupdate");!d.isDestroyed&&u(d.data.timeUpdate)};!d.isDestroyed&&u(d.data.timeUpdate)}else{d.data.timeUpdate=
function(o){c.timeUpdate(d,o)};d.isDestroyed||d.media.addEventListener("timeupdate",d.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return d.media.error}});d.media.readyState>=1?k():d.media.addEventListener("loadedmetadata",k,false);return this}}};c.p.init.prototype=c.p;c.byId=function(a){for(var b=c.instances,e=b.length,d=0;d<e;d++)if(b[d].id===a)return b[d];return null};c.forEach=function(a,b,e){if(!a||!b)return{};e=e||this;var d,f;if(A&&a.forEach===A)return a.forEach(b,
e);if(D.call(a)==="[object NodeList]"){d=0;for(f=a.length;d<f;d++)b.call(e,a[d],d,a);return a}for(d in a)x.call(a,d)&&b.call(e,a[d],d,a);return a};c.extend=function(a){var b=I.call(arguments,1);c.forEach(b,function(e){for(var d in e)a[d]=e[d]});return a};c.extend(c,{noConflict:function(a){if(a)i.Popcorn=L;return c},error:function(a){throw Error(a);},guid:function(a){c.guid.counter++;return(a?a:"")+(+new Date+c.guid.counter)},sizeOf:function(a){var b=0,e;for(e in a)b++;return b},isArray:Array.isArray||
function(a){return D.call(a)==="[object Array]"},nop:function(){},position:function(a){a=a.getBoundingClientRect();var b={},e=q.documentElement,d=q.body,f,h,k;f=e.clientTop||d.clientTop||0;h=e.clientLeft||d.clientLeft||0;k=i.pageYOffset&&e.scrollTop||d.scrollTop;e=i.pageXOffset&&e.scrollLeft||d.scrollLeft;f=Math.ceil(a.top+k-f);h=Math.ceil(a.left+e-h);for(var p in a)b[p]=Math.round(a[p]);return c.extend({},b,{top:f,left:h})},disable:function(a,b){if(!a.data.disabled[b]){a.data.disabled[b]=true;if(b in
c.registryByName&&a.data.running[b])for(var e=a.data.running[b].length-1,d;e>=0;e--){d=a.data.running[b][e];d._natives.end.call(a,null,d);a.emit("trackend",c.extend({},d,{plugin:d.type,type:"trackend"}))}return a}},enable:function(a,b){if(a.data.disabled[b]){a.data.disabled[b]=false;if(b in c.registryByName&&a.data.running[b])for(var e=a.data.running[b].length-1,d;e>=0;e--){d=a.data.running[b][e];d._natives.start.call(a,null,d);a.emit("trackstart",c.extend({},d,{plugin:d.type,type:"trackstart",track:d}))}return a}},
destroy:function(a){var b=a.data.events,e=a.data.trackEvents,d,f,h,k;for(f in b){d=b[f];for(h in d)delete d[h];b[f]=null}for(k in c.registryByName)c.removePlugin(a,k);e.byStart.length=0;e.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}c.instances.splice(c.instances.indexOf(a),1)}});c.guid.counter=1;c.extend(c.p,function(){var a={};c.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(b){a[b]=function(e){var d;if(typeof this.media[b]==="function"){if(e!=null&&/play|pause/.test(b))this.media.currentTime=c.util.toSeconds(e);this.media[b]();return this}if(e!=null){d=this.media[b];this.media[b]=e;d!==e&&this.emit("attrchange",{attribute:b,previousValue:d,currentValue:e});return this}return this.media[b]}});return a}());c.forEach("enable disable".split(" "),function(a){c.p[a]=function(b){return c[a](this,b)}});c.extend(c.p,{roundTime:function(){return Math.round(this.media.currentTime)},
exec:function(a,b,e){var d=arguments.length,f="trackadded",h,k;try{k=c.util.toSeconds(a)}catch(p){}if(typeof k==="number")a=k;if(typeof a==="number"&&d===2){e=b;b=a;a=c.guid("cue")}else if(d===1)b=-1;else if(h=this.getTrackEvent(a)){c.removeTrackEvent(this,a);f="cuechange";if(typeof a==="string"&&d===2){if(typeof b==="number")e=h._natives.start;if(typeof b==="function"){e=b;b=h.start}}}else if(d>=2){if(typeof b==="string"){try{k=c.util.toSeconds(b)}catch(v){}b=k}if(typeof b==="number")e=e||c.nop();
if(typeof b==="function"){e=b;b=-1}}d={id:a,start:b,end:b+1,_running:false,_natives:{start:e||c.nop,end:c.nop,type:"cue"}};c.addTrackEvent(this,d);if(f==="cuechange")this.emit(f,c.extend({},d,{id:a,type:f,previousValue:{time:h.start,fn:h._natives.start},currentValue:{time:b,fn:e||c.nop},track:h}));return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;
this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return c.position(this.media)},toggle:function(a){return c[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,b){if(c.isArray(a)){c.forEach(a,function(e){for(var d in e)this.defaults(d,e[d])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});c.extend(this.options.defaults[a],b);return this}});
c.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};c.Events.Natives=c.Events.UIEvents+" "+c.Events.MouseEvents+" "+c.Events.Events;s.events.apiTypes=["UIEvents","MouseEvents",
"Events"];(function(a,b){for(var e=s.events.apiTypes,d=a.Natives.split(/\s+/g),f=0,h=d.length;f<h;f++)b.hash[d[f]]=true;e.forEach(function(k){b.apis[k]={};for(var p=a[k].split(/\s+/g),v=p.length,w=0;w<v;w++)b.apis[k][p[w]]=true})})(c.Events,s.events);c.events={isNative:function(a){return!!s.events.hash[a]},getInterface:function(a){if(!c.events.isNative(a))return false;var b=s.events,e=b.apiTypes;b=b.apis;for(var d=0,f=e.length,h,k;d<f;d++){k=e[d];if(b[k][a]){h=k;break}}return h},all:c.Events.Natives.split(/\s+/g),
fn:{trigger:function(a,b){var e,d=this.data.events[a];if(d){if(e=c.events.getInterface(a)){e=q.createEvent(e);e.initEvent(a,true,true,i,1);this.media.dispatchEvent(e);return this}for(e=d.slice();e.length;)e.shift().call(this,b)}return this},listen:function(a,b){var e=this,d=true,f=c.events.hooks[a],h,k;if(typeof b!=="function")throw Error("Popcorn.js Error: Listener is not a function");if(!this.data.events[a]){this.data.events[a]=[];d=false}if(f){f.add&&f.add.call(this,{},b);if(f.bind)a=f.bind;if(f.handler){k=
b;b=function(p){f.handler.call(e,p,k)}}d=true;if(!this.data.events[a]){this.data.events[a]=[];d=false}}this.data.events[a].push(b);!d&&c.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(p){if(e.data.events[a])for(h=e.data.events[a].slice();h.length;)h.shift().call(e,p)},false);return this},unlisten:function(a,b){var e,d=this.data.events[a];if(d){if(typeof b==="string"){for(e=0;e<d.length;e++)d[e].name===b&&d.splice(e--,1);return this}else if(typeof b==="function"){for(;e!==-1;){e=
d.indexOf(b);e!==-1&&d.splice(e,1)}return this}this.data.events[a]=null;return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,b){var e=false;if(this.media.readyState){setTimeout(function(){b.call(this,a)}.bind(this),0);e=true}this.data.hooks.canplayall={fired:e}},handler:function(a,b){if(!this.data.hooks.canplayall.fired){b.call(this,a);this.data.hooks.canplayall.fired=true}}}}};c.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){c.p[a[0]]=c.p[a[1]]=c.events.fn[a[0]]});
l.prototype.remove=function(a){this.where(a).forEach(function(b){this.removeTrackEvent(b._id)},this.parent);return this};l.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(b){var e,d;if(!a)return true;for(e in a){d=a[e];if(b[e]&&b[e]===d||b._natives[e]&&b._natives[e]===d)return true}return false})};c.addTrackEvent=function(a,b){var e=false;if(!(b instanceof r)){b=new r(b);e=true}if(b&&b._natives&&b._natives.type&&a.options.defaults&&a.options.defaults[b._natives.type])b=
c.extend({},a.options.defaults[b._natives.type],b);if(b._natives){b._id=b.id||b._id||c.guid(b._natives.type);if(b._natives._setup){b._natives._setup.call(a,b);a.emit("tracksetup",c.extend({},b,{plugin:b._natives.type,type:"tracksetup",track:b}))}}j(a,b);this.timeUpdate(a,null,true);b._id&&c.addTrackEvent.ref(a,b);if(e)a.emit("trackadded",c.extend({},b,b._natives?{plugin:b._natives.type}:{},{type:"trackadded",track:b}))};c.addTrackEvent.ref=function(a,b){a.data.trackRefs[b._id]=b;return a};c.removeTrackEvent=
function(a,b,e){var d=a.getTrackEvent(b);e=e||{};if(d){d._natives._teardown&&d._natives._teardown.call(a,d);m(a,b,e);c.removeTrackEvent.ref(a,b);d._natives&&a.emit("trackremoved",c.extend({},d,{plugin:d._natives.type,type:"trackremoved",track:d}))}};c.removeTrackEvent.ref=function(a,b){delete a.data.trackRefs[b];return a};c.getTrackEvents=function(a){var b=[];a=a.data.trackEvents.byStart;for(var e=a.length,d=0,f;d<e;d++){f=a[d];f._id&&b.push(f)}return b};c.getTrackEvents.ref=function(a){return a.data.trackRefs};
c.getTrackEvent=function(a,b){return a.data.trackRefs[b]};c.getTrackEvent.ref=function(a,b){return a.data.trackRefs[b]};c.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};c.timeUpdate=function(a,b){var e=a.media.currentTime,d=a.data.trackEvents.previousUpdateTime,f=a.data.trackEvents,h=f.endIndex,k=f.startIndex,p=f.byStart.length,v=f.byEnd.length,w=c.registryByName,n,g,o;if(d<=e){for(;f.byEnd[h]&&f.byEnd[h].end<=e;){n=f.byEnd[h];g=(d=n._natives)&&d.type;if(!d||w[g]||
a[g]){if(n._running===true){n._running=false;o=a.data.running[g];o.splice(o.indexOf(n),1);if(!a.data.disabled[g]){d.end.call(a,b,n);a.emit("trackend",c.extend({},n,{plugin:g,type:"trackend",track:n}))}}h++}else{c.removeTrackEvent(a,n._id);return}}for(;f.byStart[k]&&f.byStart[k].start<=e;){n=f.byStart[k];g=(d=n._natives)&&d.type;if(!d||w[g]||a[g]){if(n.end>e&&n._running===false){n._running=true;a.data.running[g].push(n);if(!a.data.disabled[g]){d.start.call(a,b,n);a.emit("trackstart",c.extend({},n,
{plugin:g,type:"trackstart",track:n}))}}k++}else{c.removeTrackEvent(a,n._id);return}}}else if(d>e){for(;f.byStart[k]&&f.byStart[k].start>e;){n=f.byStart[k];g=(d=n._natives)&&d.type;if(!d||w[g]||a[g]){if(n._running===true){n._running=false;o=a.data.running[g];o.splice(o.indexOf(n),1);if(!a.data.disabled[g]){d.end.call(a,b,n);a.emit("trackend",c.extend({},n,{plugin:g,type:"trackend",track:n}))}}k--}else{c.removeTrackEvent(a,n._id);return}}for(;f.byEnd[h]&&f.byEnd[h].end>e;){n=f.byEnd[h];g=(d=n._natives)&&
d.type;if(!d||w[g]||a[g]){if(n.start<=e&&n._running===false){n._running=true;a.data.running[g].push(n);if(!a.data.disabled[g]){d.start.call(a,b,n);a.emit("trackstart",c.extend({},n,{plugin:g,type:"trackstart",track:n}))}}h--}else{c.removeTrackEvent(a,n._id);return}}}f.endIndex=h;f.startIndex=k;f.previousUpdateTime=e;f.byStart.length<p&&f.startIndex--;f.byEnd.length<v&&f.endIndex--};c.extend(c.p,{getTrackEvents:function(){return c.getTrackEvents.call(null,this)},getTrackEvent:function(a){return c.getTrackEvent.call(null,
this,a)},getLastTrackEventId:function(){return c.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){c.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){c.removePlugin.call(null,this,a);return this},timeUpdate:function(a){c.timeUpdate.call(null,this,a);return this},destroy:function(){c.destroy.call(null,this);return this}});c.manifest={};c.registry=[];c.registryByName={};c.plugin=function(a,b,e){if(c.protect.natives.indexOf(a.toLowerCase())>=0)c.error("'"+a+"' is a protected function name");
else{var d=typeof b==="function",f=["start","end","type","manifest"],h=["_setup","_teardown","start","end","frame"],k={},p=function(n,g){n=n||c.nop;g=g||c.nop;return function(){n.apply(this,arguments);g.apply(this,arguments)}};c.manifest[a]=e=e||b.manifest||{};h.forEach(function(n){b[n]=H(b[n]||c.nop,a)});var v=function(n,g){if(!g)return this;if(g.ranges&&c.isArray(g.ranges)){c.forEach(g.ranges,function(y){y=c.extend({},g,y);delete y.ranges;this[a](y)},this);return this}var o=g._natives={},E="",K;
c.extend(o,n);g._natives.type=g._natives.plugin=a;g._running=false;o.start=o.start||o["in"];o.end=o.end||o.out;if(g.once)o.end=p(o.end,function(){this.removeTrackEvent(g._id)});o._teardown=p(function(){var y=I.call(arguments),N=this.data.running[o.type];y.unshift(null);y[1]._running&&N.splice(N.indexOf(g),1)&&o.end.apply(this,y);this.emit("trackend",c.extend({},g,{plugin:o.type,type:"trackend",track:c.getTrackEvent(this,g.id||g._id)}))},o._teardown);o._teardown=p(o._teardown,function(){this.emit("trackteardown",
c.extend({},g,{plugin:a,type:"trackteardown",track:c.getTrackEvent(this,g.id||g._id)}))});g.compose=g.compose||[];if(typeof g.compose==="string")g.compose=g.compose.split(" ");g.effect=g.effect||[];if(typeof g.effect==="string")g.effect=g.effect.split(" ");g.compose=g.compose.concat(g.effect);g.compose.forEach(function(y){E=c.compositions[y]||{};h.forEach(function(N){o[N]=p(o[N],E[N])})});g._natives.manifest=e;if(!("start"in g))g.start=g["in"]||0;if(!g.end&&g.end!==0)g.end=g.out||Number.MAX_VALUE;
if(!x.call(g,"toString"))g.toString=function(){var y=["start: "+g.start,"end: "+g.end,"id: "+(g.id||g._id)];g.target!=null&&y.push("target: "+g.target);return a+" ( "+y.join(", ")+" )"};if(!g.target){K="options"in e&&e.options;g.target=K&&"target"in K&&K.target}if(!g._id&&g._natives)g._id=c.guid(g._natives.type);c.addTrackEvent(this,g);c.forEach(n,function(y,N){f.indexOf(N)===-1&&this.on(N,y)},this);return this};c.p[a]=k[a]=function(n,g){var o,E;if(n&&!g)g=n;else if(o=this.getTrackEvent(n)){E=g;var K=
{},y;for(y in o)if(x.call(E,y)&&x.call(o,y))K[y]=o[y];if(o._natives._update){m(this,o._id);if(x.call(g,"start"))o.start=g.start;if(x.call(g,"end"))o.end=g.end;d&&b.call(this,o);o._natives._update.call(this,o,g);j(this,o)}else{c.extend(o,g);c.removeTrackEvent(this,n,{previous:K});d?v.call(this,b.call(this,o),o):c.addTrackEvent(this,o);this.emit("trackchange",{id:o.id,type:"trackchange",previousValue:K,currentValue:o,track:o});return this}o._natives.type!=="cue"&&this.emit("trackchange",{id:o.id,type:"trackchange",
previousValue:K,currentValue:E,track:o});return this}else g.id=n;this.data.running[a]=this.data.running[a]||[];o=c.extend({},this.options.defaults&&this.options.defaults[a]||{},g);v.call(this,d?b.call(this,o):b,o);return this};e&&c.extend(b,{manifest:e});var w={fn:k[a],definition:b,base:b,parents:[],name:a};c.registry.push(c.extend(k,w,{type:a}));c.registryByName[a]=w;return k}};c.plugin.errors=[];c.plugin.debug=c.version==="cdef06e";c.removePlugin=function(a,b){if(!b){b=a;a=c.p;if(c.protect.natives.indexOf(b.toLowerCase())>=
0){c.error("'"+b+"' is a protected function name");return}var e=c.registry.length,d;for(d=0;d<e;d++)if(c.registry[d].name===b){c.registry.splice(d,1);delete c.registryByName[b];delete c.manifest[b];delete a[b];return}}e=a.data.trackEvents.byStart;d=a.data.trackEvents.byEnd;var f=a.data.trackEvents.animating,h,k;h=0;for(k=e.length;h<k;h++){if(e[h]&&e[h]._natives&&e[h]._natives.type===b){e[h]._natives._teardown&&e[h]._natives._teardown.call(a,e[h]);e.splice(h,1);h--;k--;if(a.data.trackEvents.startIndex<=
h){a.data.trackEvents.startIndex--;a.data.trackEvents.endIndex--}}d[h]&&d[h]._natives&&d[h]._natives.type===b&&d.splice(h,1)}h=0;for(k=f.length;h<k;h++)if(f[h]&&f[h]._natives&&f[h]._natives.type===b){f.splice(h,1);h--;k--}};c.compositions={};c.compose=function(a,b,e){c.manifest[a]=e||b.manifest||{};c.compositions[a]=b};c.plugin.effect=c.effect=c.compose;var G=/^(?:\.|#|\[)/;c.dom={debug:false,find:function(a,b){var e=null;b=b||q;if(a){if(!G.test(a)){e=q.getElementById(a);if(e!==null)return e}try{e=
b.querySelector(a)}catch(d){if(c.dom.debug)throw Error(d);}}return e}};var B=/\?/,M={url:"",data:"",dataType:"",success:c.nop,type:"GET",async:true,xhr:function(){return new i.XMLHttpRequest}};c.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script"))c.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=c.extend({},M,a);a.ajax=a.xhr();if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(B.test(a.url)?"&":"?")+a.data;a.data=
null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return c.xhr.httpData(a)}}};c.xhr.httpData=function(a){var b,e=null,d,f=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{e=JSON.parse(a.ajax.responseText)}catch(h){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:e};if(!b.xml||!b.xml.documentElement){b.xml=null;try{d=new DOMParser;f=d.parseFromString(a.ajax.responseText,"text/xml");if(!f.getElementsByTagName("parsererror").length)b.xml=f}catch(k){}}if(a.dataType)b=
b[a.dataType];a.success.call(a.ajax,b)}};return b};c.xhr.getJSONP=function(a,b,e){var d=q.head||q.getElementsByTagName("head")[0]||q.documentElement,f=q.createElement("script"),h=false,k=[];k=/(=)\?(?=&|$)|\?\?/;var p,v;if(!e){v=a.match(/(callback=[^&]*)/);if(v!==null&&v.length){k=v[1].split("=")[1];if(k==="?")k="jsonp";p=c.guid(k);a=a.replace(/(callback=[^&]*)/,"callback="+p)}else{p=c.guid("jsonp");if(k.test(a))a=a.replace(k,"$1"+p);k=a.split(/\?(.+)?/);a=k[0]+"?";if(k[1])a+=k[1]+"&";a+="callback="+
p}window[p]=function(w){b&&b(w);h=true}}f.addEventListener("load",function(){e&&b&&b();h&&delete window[p];d.removeChild(f)},false);f.src=a;d.insertBefore(f,d.firstChild)};c.getJSONP=c.xhr.getJSONP;c.getScript=c.xhr.getScript=function(a,b){return c.xhr.getJSONP(a,b,true)};c.util={toSeconds:function(a,b){var e=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,d,f,h;if(typeof a==="number")return a;typeof a==="string"&&!e.test(a)&&c.error("Invalid time format");e=a.split(":");d=e.length-1;f=e[d];if(f.indexOf(";")>
-1){f=f.split(";");h=0;if(b&&typeof b==="number")h=parseFloat(f[1],10)/b;e[d]=parseInt(f[0],10)+h}d=e[0];return{1:parseFloat(d,10),2:parseInt(d,10)*60+parseFloat(e[1],10),3:parseInt(d,10)*3600+parseInt(e[1],10)*60+parseFloat(e[2],10)}[e.length||1]}};c.p.cue=c.p.exec;c.protect={natives:function(a){return Object.keys?Object.keys(a):function(b){var e,d=[];for(e in b)x.call(b,e)&&d.push(e);return d}(a)}(c.p).map(function(a){return a.toLowerCase()})};c.forEach({listen:"on",unlisten:"off",trigger:"emit",
exec:"cue"},function(a,b){var e=c.p[b];c.p[b]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+b+"', "+(a==null?"do not use.":"use '"+a+"' instead."));c.p[b]=e}return c.p[a].apply(this,[].slice.call(arguments))}});i.Popcorn=c}else{i.Popcorn={isSupported:false};for(t="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);t.length;)i.Popcorn[t.shift()]=
function(){}}})(window,window.document);
(function(i){var q=function(r,l){r=r||i.nop;l=l||i.nop;return function(){r.apply(this,arguments);l.apply(this,arguments)}};i.player=function(r,l){if(!i[r]){l=l||{};var j=function(m,H,t){t=t||{};var C=new Date/1E3,A=C,I=0,x=0,D=1,L=false,z={},F=typeof m==="string"?i.dom.find(m):m,s={};Object.prototype.__defineGetter__||(s=F||document.createElement("div"));for(var u in F)if(!(u in s))if(typeof F[u]==="object")s[u]=F[u];else if(typeof F[u]==="function")s[u]=function(c){return"length"in F[c]&&!F[c].call?
F[c]:function(){return F[c].apply(F,arguments)}}(u);else i.player.defineProperty(s,u,{get:function(c){return function(){return F[c]}}(u),set:i.nop,configurable:true});var J=function(){C=new Date/1E3;if(!s.paused){s.currentTime+=C-A;s.dispatchEvent("timeupdate");setTimeout(J,10)}A=C};s.play=function(){this.paused=false;if(s.readyState>=4){A=new Date/1E3;s.dispatchEvent("play");J()}};s.pause=function(){this.paused=true;s.dispatchEvent("pause")};i.player.defineProperty(s,"currentTime",{get:function(){return I},
set:function(c){I=+c;s.dispatchEvent("timeupdate");return I},configurable:true});i.player.defineProperty(s,"volume",{get:function(){return D},set:function(c){D=+c;s.dispatchEvent("volumechange");return D},configurable:true});i.player.defineProperty(s,"muted",{get:function(){return L},set:function(c){L=+c;s.dispatchEvent("volumechange");return L},configurable:true});i.player.defineProperty(s,"readyState",{get:function(){return x},set:function(c){return x=c},configurable:true});s.addEventListener=function(c,
G){z[c]||(z[c]=[]);z[c].push(G);return G};s.removeEventListener=function(c,G){var B,M=z[c];if(M){for(B=z[c].length-1;B>=0;B--)G===M[B]&&M.splice(B,1);return G}};s.dispatchEvent=function(c){var G,B=c.type;if(!B){B=c;if(c=i.events.getInterface(B)){G=document.createEvent(c);G.initEvent(B,true,true,window,1)}}if(z[B])for(c=z[B].length-1;c>=0;c--)z[B][c].call(this,G,this)};s.src=H||"";s.duration=0;s.paused=true;s.ended=0;t&&t.events&&i.forEach(t.events,function(c,G){s.addEventListener(G,c,false)});if(l._canPlayType(F.nodeName,
H)!==false)if(l._setup)l._setup.call(s,t);else{s.readyState=4;s.dispatchEvent("loadedmetadata");s.dispatchEvent("loadeddata");s.dispatchEvent("canplaythrough")}else setTimeout(function(){s.dispatchEvent("error")},0);m=new i.p.init(s,t);if(l._teardown)m.destroy=q(m.destroy,function(){l._teardown.call(s,t)});return m};j.canPlayType=l._canPlayType=l._canPlayType||i.nop;i[r]=i.player.registry[r]=j}};i.player.registry={};i.player.defineProperty=Object.defineProperty||function(r,l,j){r.__defineGetter__(l,
j.get||i.nop);r.__defineSetter__(l,j.set||i.nop)};i.player.playerQueue=function(){var r=[],l=false;return{next:function(){l=false;r.shift();r[0]&&r[0]()},add:function(j){r.push(function(){l=true;j&&j()});!l&&r[0]()}}};i.smart=function(r,l,j){var m=typeof r==="string"?i.dom.find(r):r,H,t,C,A,I,x="HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(m){l=typeof l==="string"?[l]:l;r=0;for(I=l.length;r<I;r++){H=l[r];for(t=0;t<x.length;t++)if((A=i[x[t]])&&A._canPlaySrc(H)===
"probably"){C=A(m);l=i(C,j);setTimeout(function(){C.src=H},0);return l}for(var D in i.player.registry)if(i.player.registry.hasOwnProperty(D))if(i.player.registry[D].canPlayType(m.nodeName,H))return i[D](m,H,j)}D=i.guid("popcorn-video-");x='<video id="'+D+'" preload=auto autobuffer>';r=0;for(I=l.length;r<I;r++)x+='<source src="'+l[r]+'">';x+="</video>";m.innerHTML=x;j&&j.events&&j.events.error&&m.addEventListener("error",j.events.error,false);return i("#"+D,j)}else i.error("Specified target `"+r+"` was not found.")}})(Popcorn);
(function(i,q){var r=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(?:youtu).*(?:\/|v=)(.{11})/;i.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var j=0;j<onYouTubePlayerAPIReady.waiting.length;j++)onYouTubePlayerAPIReady.waiting[j]()};if(i.YT){i.quarantineYT=i.YT;i.YT=null}onYouTubePlayerAPIReady.waiting=[];var l=false;q.player("youtube",{_canPlayType:function(j,m){return typeof m==="string"&&r.test(m)&&j.toLowerCase()!=="video"},_setup:function(j){if(!i.YT&&!l){l=true;q.getScript("//youtube.com/player_api")}var m=
this,H=false,t=document.createElement("div"),C=0,A=true,I=false,x=0,D=false,L=100,z=q.player.playerQueue(),F=function(){q.player.defineProperty(m,"currentTime",{set:function(u){if(!j.destroyed){u=Number(u);if(!isNaN(u)){C=u;I=true;m.dispatchEvent("seeking");j.youtubeObject.seekTo(u)}}},get:function(){return C}});q.player.defineProperty(m,"paused",{get:function(){return A}});q.player.defineProperty(m,"muted",{set:function(u){if(j.destroyed)return u;if(j.youtubeObject.isMuted()!==u){u?j.youtubeObject.mute():
j.youtubeObject.unMute();D=j.youtubeObject.isMuted();m.dispatchEvent("volumechange")}return j.youtubeObject.isMuted()},get:function(){if(j.destroyed)return 0;return j.youtubeObject.isMuted()}});q.player.defineProperty(m,"volume",{set:function(u){if(j.destroyed)return u;if(j.youtubeObject.getVolume()/100!==u){j.youtubeObject.setVolume(u*100);L=j.youtubeObject.getVolume();m.dispatchEvent("volumechange")}return j.youtubeObject.getVolume()/100},get:function(){if(j.destroyed)return 0;return j.youtubeObject.getVolume()/
100}});m.play=function(){if(!j.destroyed){A=false;z.add(function(){if(j.youtubeObject.getPlayerState()!==1){I=false;j.youtubeObject.playVideo()}else z.next()})}};m.pause=function(){if(!j.destroyed){A=true;z.add(function(){j.youtubeObject.getPlayerState()!==2?j.youtubeObject.pauseVideo():z.next()})}}};t.id=m.id+q.guid();j._container=t;m.appendChild(t);var s=function(){var u,J,c,G,B=true,M=0.1,a=function(){if(!j.destroyed){var f=j.youtubeObject.getCurrentTime();if(I)if(C>=f-M&&C<=f+M){I=false;M=0.1;
m.dispatchEvent("seeked")}else{M*=2;j.youtubeObject.seekTo(C)}else C=f;m.dispatchEvent("timeupdate");setTimeout(a,200)}},b=function(f){var h=j.youtubeObject.getDuration();if(isNaN(h)||h===0)setTimeout(function(){b(f*2)},f*1E3);else{m.duration=h;m.dispatchEvent("durationchange");m.dispatchEvent("loadedmetadata");m.dispatchEvent("loadeddata");m.readyState=4;a();m.dispatchEvent("canplay");m.dispatchEvent("canplaythrough")}};j.controls=+j.controls===0||+j.controls===1?j.controls:0;j.annotations=+j.annotations===
1||+j.annotations===3?j.annotations:1;u=r.exec(m.src)[1];J=(m.src.split("?")[1]||"").replace(/v=.{11}/,"");J=J.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(f,h,k){h|=0;k|=0;x=+k+h*60;return""});J=J.replace(/&start=(\d+)?/,function(f,h){h|=0;x=h;return""});H=/autoplay=1/.test(J);J=J.split(/[\&\?]/g);c={wmode:"transparent"};for(var e=0;e<J.length;e++){G=J[e].split("=");c[G[0]]=G[1]}c.rel=c.rel||0;c.modestbranding=c.modestbranding||1;c.iv_load_policy=c.iv_load_policy||3;c.showinfo=c.showinfo||0;c.controls=
c.controls||j.controls||0;j.youtubeObject=new YT.Player(t.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:c,videoId:u,events:{onReady:function(){L=m.volume;D=m.muted;d();A=m.paused;F();j.youtubeObject.playVideo();m.currentTime=x;m.dispatchEvent("loadstart")},onStateChange:function(f){if(!(j.destroyed||f.data===-1))if(f.data===2){A=true;m.dispatchEvent("pause");z.next()}else if(f.data===1&&!B){A=false;m.dispatchEvent("play");m.dispatchEvent("playing");z.next()}else if(f.data===0)m.dispatchEvent("ended");
else if(f.data===1&&B){B=false;if(H||!m.paused)A=false;A&&j.youtubeObject.pauseVideo();b(0.025)}},onError:function(f){if([2,100,101,150].indexOf(f.data)!==-1){m.error={customCode:f.data};m.dispatchEvent("error")}}}});var d=function(){if(!j.destroyed){if(D!==j.youtubeObject.isMuted()){D=j.youtubeObject.isMuted();m.dispatchEvent("volumechange")}if(L!==j.youtubeObject.getVolume()){L=j.youtubeObject.getVolume();m.dispatchEvent("volumechange")}setTimeout(d,250)}}};onYouTubePlayerAPIReady.ready?s():onYouTubePlayerAPIReady.waiting.push(s)},
_teardown:function(j){j.destroyed=true;var m=j.youtubeObject;if(m){m.stopVideo();m.clearVideo&&m.clearVideo()}this.removeChild(document.getElementById(j._container.id))}})})(window,Popcorn);
