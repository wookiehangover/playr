/*
 * popcorn.js version c17e937
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(){document.addEventListener=document.addEventListener||function(h,o){h=h==="DOMContentLoaded"?"onreadystatechange":"on"+h;document.attachEvent(h,o)};document.removeEventListener=document.removeEventListener||function(h,o){h=h==="DOMContentLoaded"?"onreadystatechange":"on"+h;document.detachEvent(h,o)};HTMLScriptElement.prototype.addEventListener=HTMLScriptElement.prototype.addEventListener||function(h,o){h=h==="load"?"onreadystatechange":"on"+h;this.attachEvent(h,o)};HTMLScriptElement.prototype.removeEventListener=
HTMLScriptElement.prototype.removeEventListener||function(h,o){h=h==="load"?"onreadystatechange":"on"+h;this.detachEvent(h,o)};document.createEvent=document.createEvent||function(){return{type:null,target:null,currentTarget:null,cancelable:false,bubbles:false,initEvent:function(h){this.type=h},stopPropagation:function(){},stopImmediatePropagation:function(){}}};Array.prototype.forEach=Array.prototype.forEach||function(h,o){var n=Object.prototype.hasOwnProperty;if(!this||!h)return{};o=o||this;for(var k in this)n.call(this,
k)&&h.call(o,this[k],k,this);return this};if(!Array.prototype.map)Array.prototype.map=function(h,o){var n,k,s;if(this==null)throw new TypeError("this is null or not defined");var t=Object(this),y=t.length>>>0;if({}.toString.call(h)!="[object Function]")throw new TypeError(h+" is not a function");if(o)n=o;k=Array(y);for(s=0;s<y;){var w;if(s in t){w=t[s];w=h.call(n,w,s,t);k[s]=w}s++}return k};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(h){if(this==null)throw new TypeError;var o=Object(this),
n=o.length>>>0;if(n===0)return-1;var k=0;if(arguments.length>0){k=Number(arguments[1]);if(k!=k)k=0;else if(k!=0&&k!=Infinity&&k!=-Infinity)k=(k>0||-1)*Math.floor(Math.abs(k))}if(k>=n)return-1;for(k=k>=0?k:Math.max(n-Math.abs(k),0);k<n;k++)if(k in o&&o[k]===h)return k;return-1}})();
(function(h,o){function n(a){q.put.call(this,a)}function k(a){this.parent=a;this.byStart=[{start:-1,end:-1}];this.byEnd=[{start:-1,end:-1}];this.animating=[];this.endIndex=this.startIndex=0;this.previousUpdateTime=-1;Object.defineProperty(this,"count",{get:function(){return this.byStart.length}})}function s(a,b){return function(){if(c.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(e){c.plugin.errors.push({plugin:b,thrown:e,source:a.toString()});this.emit("pluginerror",
c.plugin.errors)}}}if(o.addEventListener){var t=Array.prototype,y=Object.prototype,w=t.forEach,F=t.slice,z=y.hasOwnProperty,G=y.toString,H=h.Popcorn,A=[],K=false,C={events:{hash:{},apis:{}}},B=function(){return h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||h.oRequestAnimationFrame||h.msRequestAnimationFrame||function(a){h.setTimeout(a,16)}}(),q={put:function(a){Object.getOwnPropertyNames(a).forEach(function(b){this[b]=a[b]},this)}},c=function(a,b){return new c.p.init(a,
b||null)};c.version="c17e937";c.isSupported=true;c.instances=[];c.p=c.prototype={init:function(a,b){var e,d=this;if(typeof a==="function")if(o.readyState==="complete")a(o,c);else{A.push(a);if(!K){K=true;var g=function(){o.removeEventListener("DOMContentLoaded",g,false);for(var p=0,u=A.length;p<u;p++)A[p].call(o,c);A=null};o.addEventListener("DOMContentLoaded",g,false)}}else{if(typeof a==="string")try{e=o.querySelector(a)}catch(i){throw Error("Popcorn.js Error: Invalid media element selector: "+a);
}this.media=e||a;e=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[e]=this.media;this.options=c.extend({},b)||{};this.id=this.options.id||c.guid(e);if(c.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:c.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new k(this)};c.instances.push(this);var l=function(){if(d.media.currentTime<
0)d.media.currentTime=0;d.media.removeEventListener("loadedmetadata",l,false);var p,u,x,m,f;p=d.media.duration;p=p!=p?Number.MAX_VALUE:p+1;c.addTrackEvent(d,{start:p,end:p});if(d.options.frameAnimation){d.data.timeUpdate=function(){c.timeUpdate(d,{});c.forEach(c.manifest,function(j,J){if(u=d.data.running[J]){m=u.length;for(var E=0;E<m;E++){x=u[E];(f=x._natives)&&f.frame&&f.frame.call(d,{},x,d.currentTime())}}});d.emit("timeupdate");!d.isDestroyed&&B(d.data.timeUpdate)};!d.isDestroyed&&B(d.data.timeUpdate)}else{d.data.timeUpdate=
function(j){c.timeUpdate(d,j)};d.isDestroyed||d.media.addEventListener("timeupdate",d.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return d.media.error}});d.media.readyState>=1?l():d.media.addEventListener("loadedmetadata",l,false);return this}}};c.p.init.prototype=c.p;c.byId=function(a){for(var b=c.instances,e=b.length,d=0;d<e;d++)if(b[d].id===a)return b[d];return null};c.forEach=function(a,b,e){if(!a||!b)return{};e=e||this;var d,g;if(w&&a.forEach===w)return a.forEach(b,
e);if(G.call(a)==="[object NodeList]"){d=0;for(g=a.length;d<g;d++)b.call(e,a[d],d,a);return a}for(d in a)z.call(a,d)&&b.call(e,a[d],d,a);return a};c.extend=function(a){var b=F.call(arguments,1);c.forEach(b,function(e){for(var d in e)a[d]=e[d]});return a};c.extend(c,{noConflict:function(a){if(a)h.Popcorn=H;return c},error:function(a){throw Error(a);},guid:function(a){c.guid.counter++;return(a?a:"")+(+new Date+c.guid.counter)},sizeOf:function(a){var b=0,e;for(e in a)b++;return b},isArray:Array.isArray||
function(a){return G.call(a)==="[object Array]"},nop:function(){},position:function(a){if(!a.parentNode)return null;a=a.getBoundingClientRect();var b={},e=o.documentElement,d=o.body,g,i,l;g=e.clientTop||d.clientTop||0;i=e.clientLeft||d.clientLeft||0;l=h.pageYOffset&&e.scrollTop||d.scrollTop;e=h.pageXOffset&&e.scrollLeft||d.scrollLeft;g=Math.ceil(a.top+l-g);i=Math.ceil(a.left+e-i);for(var p in a)b[p]=Math.round(a[p]);return c.extend({},b,{top:g,left:i})},disable:function(a,b){if(!a.data.disabled[b]){a.data.disabled[b]=
true;if(b in c.registryByName&&a.data.running[b])for(var e=a.data.running[b].length-1,d;e>=0;e--){d=a.data.running[b][e];d._natives.end.call(a,null,d);a.emit("trackend",c.extend({},d,{plugin:d.type,type:"trackend"}))}return a}},enable:function(a,b){if(a.data.disabled[b]){a.data.disabled[b]=false;if(b in c.registryByName&&a.data.running[b])for(var e=a.data.running[b].length-1,d;e>=0;e--){d=a.data.running[b][e];d._natives.start.call(a,null,d);a.emit("trackstart",c.extend({},d,{plugin:d.type,type:"trackstart",
track:d}))}return a}},destroy:function(a){var b=a.data.events,e=a.data.trackEvents,d,g,i,l;for(g in b){d=b[g];for(i in d)delete d[i];b[g]=null}for(l in c.registryByName)c.removePlugin(a,l);e.byStart.length=0;e.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}c.instances.splice(c.instances.indexOf(a),1)}});c.guid.counter=1;c.extend(c.p,function(){var a={};c.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(b){a[b]=function(e){var d;if(typeof this.media[b]==="function"){if(e!=null&&/play|pause/.test(b))this.media.currentTime=c.util.toSeconds(e);this.media[b]();return this}if(e!=null){d=this.media[b];this.media[b]=e;d!==e&&this.emit("attrchange",{attribute:b,previousValue:d,currentValue:e});return this}return this.media[b]}});return a}());c.forEach("enable disable".split(" "),function(a){c.p[a]=function(b){return c[a](this,b)}});c.extend(c.p,{roundTime:function(){return Math.round(this.media.currentTime)},
exec:function(a,b,e){var d=arguments.length,g="trackadded",i,l;try{l=c.util.toSeconds(a)}catch(p){}if(typeof l==="number")a=l;if(typeof a==="number"&&d===2){e=b;b=a;a=c.guid("cue")}else if(d===1)b=-1;else if(i=this.getTrackEvent(a)){this.data.trackEvents.remove(a);n.end(this,i);c.removeTrackEvent.ref(this,a);g="cuechange";if(typeof a==="string"&&d===2){if(typeof b==="number")e=i._natives.start;if(typeof b==="function"){e=b;b=i.start}}}else if(d>=2){if(typeof b==="string"){try{l=c.util.toSeconds(b)}catch(u){}b=
l}if(typeof b==="number")e=e||c.nop();if(typeof b==="function"){e=b;b=-1}}d={id:a,start:b,end:b+1,_running:false,_natives:{start:e||c.nop,end:c.nop,type:"cue"}};if(i)d=c.extend(i,d);if(g==="cuechange"){d._id=d.id||d._id||c.guid(d._natives.type);this.data.trackEvents.add(d);n.start(this,d);this.timeUpdate(this,null,true);c.addTrackEvent.ref(this,d);this.emit(g,c.extend({},d,{id:a,type:g,previousValue:{time:i.start,fn:i._natives.start},currentValue:{time:b,fn:e||c.nop},track:i}))}else c.addTrackEvent(this,
d);return this},mute:function(a){a=a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return c.position(this.media)},toggle:function(a){return c[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,b){if(c.isArray(a)){c.forEach(a,function(e){for(var d in e)this.defaults(d,
e[d])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});c.extend(this.options.defaults[a],b);return this}});c.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};
c.Events.Natives=c.Events.UIEvents+" "+c.Events.MouseEvents+" "+c.Events.Events;C.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(a,b){for(var e=C.events.apiTypes,d=a.Natives.split(/\s+/g),g=0,i=d.length;g<i;g++)b.hash[d[g]]=true;e.forEach(function(l){b.apis[l]={};for(var p=a[l].split(/\s+/g),u=p.length,x=0;x<u;x++)b.apis[l][p[x]]=true})})(c.Events,C.events);c.events={isNative:function(a){return!!C.events.hash[a]},getInterface:function(a){if(!c.events.isNative(a))return false;var b=
C.events,e=b.apiTypes;b=b.apis;for(var d=0,g=e.length,i,l;d<g;d++){l=e[d];if(b[l][a]){i=l;break}}return i},all:c.Events.Natives.split(/\s+/g),fn:{trigger:function(a,b){var e,d=this.data.events[a];if(d){if(e=c.events.getInterface(a)){e=o.createEvent(e);e.initEvent(a,true,true,h,1);this.media.dispatchEvent(e);return this}for(e=d.slice();e.length;)e.shift().call(this,b)}return this},listen:function(a,b){var e=this,d=true,g=c.events.hooks[a],i,l;if(typeof b!=="function")throw Error("Popcorn.js Error: Listener is not a function");
if(!this.data.events[a]){this.data.events[a]=[];d=false}if(g){g.add&&g.add.call(this,{},b);if(g.bind)a=g.bind;if(g.handler){l=b;b=function(p){g.handler.call(e,p,l)}}d=true;if(!this.data.events[a]){this.data.events[a]=[];d=false}}this.data.events[a].push(b);!d&&c.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(p){if(e.data.events[a])for(i=e.data.events[a].slice();i.length;)i.shift().call(e,p)},false);return this},unlisten:function(a,b){var e,d=this.data.events[a];if(d){if(typeof b===
"string"){for(e=0;e<d.length;e++)d[e].name===b&&d.splice(e--,1);return this}else if(typeof b==="function"){for(;e!==-1;){e=d.indexOf(b);e!==-1&&d.splice(e,1)}return this}this.data.events[a]=null;return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,b){var e=false;if(this.media.readyState){setTimeout(function(){b.call(this,a)}.bind(this),0);e=true}this.data.hooks.canplayall={fired:e}},handler:function(a,b){if(!this.data.hooks.canplayall.fired){b.call(this,a);this.data.hooks.canplayall.fired=
true}}}}};c.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){c.p[a[0]]=c.p[a[1]]=c.events.fn[a[0]]});n.start=function(a,b){if(b.end>a.media.currentTime&&b.start<=a.media.currentTime&&!b._running){b._running=true;a.data.running[b._natives.type].push(b);if(!a.data.disabled[b._natives.type]){b._natives.start.call(a,null,b);a.emit("trackstart",c.extend({},b,{plugin:b._natives.type,type:"trackstart",track:b}))}}};n.end=function(a,b){var e;if((b.end<=a.media.currentTime||b.start>
a.media.currentTime)&&b._running){e=a.data.running[b._natives.type];b._running=false;e.splice(e.indexOf(b),1);if(!a.data.disabled[b._natives.type]){b._natives.end.call(a,null,b);a.emit("trackend",c.extend({},b,{plugin:b._natives.type,type:"trackend",track:b}))}}};k.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(b){var e,d;if(!a)return true;for(e in a){d=a[e];if(b[e]&&b[e]===d||b._natives[e]&&b._natives[e]===d)return true}return false})};k.prototype.add=function(a){var b=
this.byStart,e=this.byEnd,d;a&&a._id&&this.parent.data.history.push(a._id);a.start=c.util.toSeconds(a.start,this.parent.options.framerate);a.end=c.util.toSeconds(a.end,this.parent.options.framerate);for(d=b.length-1;d>=0;d--)if(a.start>=b[d].start){b.splice(d+1,0,a);break}for(b=e.length-1;b>=0;b--)if(a.end>e[b].end){e.splice(b+1,0,a);break}d<=this.parent.data.trackEvents.startIndex&&a.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++;b<=this.parent.data.trackEvents.endIndex&&
a.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++};k.prototype.remove=function(a){if(a instanceof n)a=a.id;if(typeof a==="object"){this.where(a).forEach(function(m){this.removeTrackEvent(m._id)},this.parent);return this}var b,e,d;d=this.byStart.length;for(var g=0,i=0,l=[],p=[],u=[],x=[];--d>-1;){b=this.byStart[g];e=this.byEnd[g];if(!b._id){l.push(b);p.push(e)}if(b._id){b._id!==a&&l.push(b);e._id!==a&&p.push(e);if(b._id===a)i=g}g++}d=this.animating.length;
g=0;if(d)for(;--d>-1;){b=this.animating[g];b._id||u.push(b);b._id&&b._id!==a&&u.push(b);g++}i<=this.startIndex&&this.startIndex--;i<=this.endIndex&&this.endIndex--;this.byStart=l;this.byEnd=p;this.animating=u;d=this.parent.data.history.length;for(g=0;g<d;g++)this.parent.data.history[g]!==a&&x.push(this.parent.data.history[g]);this.parent.data.history=x};c.addTrackEvent=function(a,b){if(!(b instanceof n)){if((b=new n(b))&&b._natives&&b._natives.type&&a.options.defaults&&a.options.defaults[b._natives.type])b=
c.extend({},a.options.defaults[b._natives.type],b);if(b._natives){b._id=b.id||b._id||c.guid(b._natives.type);if(b._natives._setup){b._natives._setup.call(a,b);a.emit("tracksetup",c.extend({},b,{plugin:b._natives.type,type:"tracksetup",track:b}))}}a.data.trackEvents.add(b);n.start(a,b);this.timeUpdate(a,null,true);b._id&&c.addTrackEvent.ref(a,b);a.emit("trackadded",c.extend({},b,b._natives?{plugin:b._natives.type}:{},{type:"trackadded",track:b}))}};c.addTrackEvent.ref=function(a,b){a.data.trackRefs[b._id]=
b;return a};c.removeTrackEvent=function(a,b){var e=a.getTrackEvent(b);if(e){e._natives._teardown&&e._natives._teardown.call(a,e);a.data.trackEvents.remove(b);c.removeTrackEvent.ref(a,b);e._natives&&a.emit("trackremoved",c.extend({},e,{plugin:e._natives.type,type:"trackremoved",track:e}))}};c.removeTrackEvent.ref=function(a,b){delete a.data.trackRefs[b];return a};c.getTrackEvents=function(a){var b=[];a=a.data.trackEvents.byStart;for(var e=a.length,d=0,g;d<e;d++){g=a[d];g._id&&b.push(g)}return b};c.getTrackEvents.ref=
function(a){return a.data.trackRefs};c.getTrackEvent=function(a,b){return a.data.trackRefs[b]};c.getTrackEvent.ref=function(a,b){return a.data.trackRefs[b]};c.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};c.timeUpdate=function(a,b){var e=a.media.currentTime,d=a.data.trackEvents.previousUpdateTime,g=a.data.trackEvents,i=g.endIndex,l=g.startIndex,p=g.byStart.length,u=g.byEnd.length,x=c.registryByName,m,f,j;if(d<=e){for(;g.byEnd[i]&&g.byEnd[i].end<=e;){m=g.byEnd[i];
f=(d=m._natives)&&d.type;if(!d||x[f]||a[f]){if(m._running===true){m._running=false;j=a.data.running[f];j.splice(j.indexOf(m),1);if(!a.data.disabled[f]){d.end.call(a,b,m);a.emit("trackend",c.extend({},m,{plugin:f,type:"trackend",track:m}))}}i++}else{c.removeTrackEvent(a,m._id);return}}for(;g.byStart[l]&&g.byStart[l].start<=e;){m=g.byStart[l];f=(d=m._natives)&&d.type;if(!d||x[f]||a[f]){if(m.end>e&&m._running===false){m._running=true;a.data.running[f].push(m);if(!a.data.disabled[f]){d.start.call(a,b,
m);a.emit("trackstart",c.extend({},m,{plugin:f,type:"trackstart",track:m}))}}l++}else{c.removeTrackEvent(a,m._id);return}}}else if(d>e){for(;g.byStart[l]&&g.byStart[l].start>e;){m=g.byStart[l];f=(d=m._natives)&&d.type;if(!d||x[f]||a[f]){if(m._running===true){m._running=false;j=a.data.running[f];j.splice(j.indexOf(m),1);if(!a.data.disabled[f]){d.end.call(a,b,m);a.emit("trackend",c.extend({},m,{plugin:f,type:"trackend",track:m}))}}l--}else{c.removeTrackEvent(a,m._id);return}}for(;g.byEnd[i]&&g.byEnd[i].end>
e;){m=g.byEnd[i];f=(d=m._natives)&&d.type;if(!d||x[f]||a[f]){if(m.start<=e&&m._running===false){m._running=true;a.data.running[f].push(m);if(!a.data.disabled[f]){d.start.call(a,b,m);a.emit("trackstart",c.extend({},m,{plugin:f,type:"trackstart",track:m}))}}i--}else{c.removeTrackEvent(a,m._id);return}}}g.endIndex=i;g.startIndex=l;g.previousUpdateTime=e;g.byStart.length<p&&g.startIndex--;g.byEnd.length<u&&g.endIndex--};c.extend(c.p,{getTrackEvents:function(){return c.getTrackEvents.call(null,this)},
getTrackEvent:function(a){return c.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return c.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){c.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){c.removePlugin.call(null,this,a);return this},timeUpdate:function(a){c.timeUpdate.call(null,this,a);return this},destroy:function(){c.destroy.call(null,this);return this}});c.manifest={};c.registry=[];c.registryByName={};c.plugin=function(a,b,e){if(c.protect.natives.indexOf(a.toLowerCase())>=
0)c.error("'"+a+"' is a protected function name");else{var d=typeof b==="function",g=["start","end","type","manifest"],i=["_setup","_teardown","start","end","frame"],l={},p=function(m,f){m=m||c.nop;f=f||c.nop;return function(){m.apply(this,arguments);f.apply(this,arguments)}};c.manifest[a]=e=e||b.manifest||{};i.forEach(function(m){b[m]=s(b[m]||c.nop,a)});var u=function(m,f){if(!f)return this;if(f.ranges&&c.isArray(f.ranges)){c.forEach(f.ranges,function(v){v=c.extend({},f,v);delete v.ranges;this[a](v)},
this);return this}var j=f._natives={},J="",E;c.extend(j,m);f._natives.type=f._natives.plugin=a;f._running=false;j.start=j.start||j["in"];j.end=j.end||j.out;if(f.once)j.end=p(j.end,function(){this.removeTrackEvent(f._id)});j._teardown=p(function(){var v=F.call(arguments),I=this.data.running[j.type];v.unshift(null);v[1]._running&&I.splice(I.indexOf(f),1)&&j.end.apply(this,v);v[1]._running=false;this.emit("trackend",c.extend({},f,{plugin:j.type,type:"trackend",track:c.getTrackEvent(this,f.id||f._id)}))},
j._teardown);j._teardown=p(j._teardown,function(){this.emit("trackteardown",c.extend({},f,{plugin:a,type:"trackteardown",track:c.getTrackEvent(this,f.id||f._id)}))});f.compose=f.compose||[];if(typeof f.compose==="string")f.compose=f.compose.split(" ");f.effect=f.effect||[];if(typeof f.effect==="string")f.effect=f.effect.split(" ");f.compose=f.compose.concat(f.effect);f.compose.forEach(function(v){J=c.compositions[v]||{};i.forEach(function(I){j[I]=p(j[I],J[I])})});f._natives.manifest=e;if(!("start"in
f))f.start=f["in"]||0;if(!f.end&&f.end!==0)f.end=f.out||Number.MAX_VALUE;if(!z.call(f,"toString"))f.toString=function(){var v=["start: "+f.start,"end: "+f.end,"id: "+(f.id||f._id)];f.target!=null&&v.push("target: "+f.target);return a+" ( "+v.join(", ")+" )"};if(!f.target){E="options"in e&&e.options;f.target=E&&"target"in E&&E.target}if(!f._id&&f._natives)f._id=c.guid(f._natives.type);if(f instanceof n){if(f._natives){f._id=f.id||f._id||c.guid(f._natives.type);if(f._natives._setup){f._natives._setup.call(this,
f);this.emit("tracksetup",c.extend({},f,{plugin:f._natives.type,type:"tracksetup",track:f}))}}this.data.trackEvents.add(f);n.start(this,f);this.timeUpdate(this,null,true);f._id&&c.addTrackEvent.ref(this,f)}else c.addTrackEvent(this,f);c.forEach(m,function(v,I){g.indexOf(I)===-1&&this.on(I,v)},this);return this};c.p[a]=l[a]=function(m,f){var j,J;if(m&&!f)f=m;else if(j=this.getTrackEvent(m)){J=f;var E={},v;for(v in j)if(z.call(J,v)&&z.call(j,v))E[v]=j[v];if(j._natives._update){this.data.trackEvents.remove(j);
if(z.call(f,"start"))j.start=f.start;if(z.call(f,"end"))j.end=f.end;n.end(this,j);d&&b.call(this,j);j._natives._update.call(this,j,f);this.data.trackEvents.add(j);n.start(this,j)}else{c.extend(j,f);this.data.trackEvents.remove(m);j._natives._teardown&&j._natives._teardown.call(this,j);c.removeTrackEvent.ref(this,m);if(d)u.call(this,b.call(this,j),j);else{j._id=j.id||j._id||c.guid(j._natives.type);if(j._natives&&j._natives._setup){j._natives._setup.call(this,j);this.emit("tracksetup",c.extend({},j,
{plugin:j._natives.type,type:"tracksetup",track:j}))}this.data.trackEvents.add(j);n.start(this,j);this.timeUpdate(this,null,true);c.addTrackEvent.ref(this,j)}this.emit("trackchange",{id:j.id,type:"trackchange",previousValue:E,currentValue:j,track:j});return this}j._natives.type!=="cue"&&this.emit("trackchange",{id:j.id,type:"trackchange",previousValue:E,currentValue:J,track:j});return this}else f.id=m;this.data.running[a]=this.data.running[a]||[];j=c.extend({},this.options.defaults&&this.options.defaults[a]||
{},f);u.call(this,d?b.call(this,j):b,j);return this};e&&c.extend(b,{manifest:e});var x={fn:l[a],definition:b,base:b,parents:[],name:a};c.registry.push(c.extend(l,x,{type:a}));c.registryByName[a]=x;return l}};c.plugin.errors=[];c.plugin.debug=c.version==="c17e937";c.removePlugin=function(a,b){if(!b){b=a;a=c.p;if(c.protect.natives.indexOf(b.toLowerCase())>=0){c.error("'"+b+"' is a protected function name");return}var e=c.registry.length,d;for(d=0;d<e;d++)if(c.registry[d].name===b){c.registry.splice(d,
1);delete c.registryByName[b];delete c.manifest[b];delete a[b];return}}e=a.data.trackEvents.byStart;d=a.data.trackEvents.byEnd;var g=a.data.trackEvents.animating,i,l;i=0;for(l=e.length;i<l;i++){if(e[i]&&e[i]._natives&&e[i]._natives.type===b){e[i]._natives._teardown&&e[i]._natives._teardown.call(a,e[i]);e.splice(i,1);i--;l--;if(a.data.trackEvents.startIndex<=i){a.data.trackEvents.startIndex--;a.data.trackEvents.endIndex--}}d[i]&&d[i]._natives&&d[i]._natives.type===b&&d.splice(i,1)}i=0;for(l=g.length;i<
l;i++)if(g[i]&&g[i]._natives&&g[i]._natives.type===b){g.splice(i,1);i--;l--}};c.compositions={};c.compose=function(a,b,e){c.manifest[a]=e||b.manifest||{};c.compositions[a]=b};c.plugin.effect=c.effect=c.compose;var L=/^(?:\.|#|\[)/;c.dom={debug:false,find:function(a,b){var e=null;b=b||o;if(a){if(!L.test(a)){e=o.getElementById(a);if(e!==null)return e}try{e=b.querySelector(a)}catch(d){if(c.dom.debug)throw Error(d);}}return e}};var r=/\?/,D={url:"",data:"",dataType:"",success:c.nop,type:"GET",async:true,
xhr:function(){return new h.XMLHttpRequest}};c.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script"))c.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=c.extend({},D,a);a.ajax=a.xhr();if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(r.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||null);return c.xhr.httpData(a)}}};c.xhr.httpData=function(a){var b,e=null,d,g=null;a.ajax.onreadystatechange=
function(){if(a.ajax.readyState===4){try{e=JSON.parse(a.ajax.responseText)}catch(i){}b={xml:a.ajax.responseXML,text:a.ajax.responseText,json:e};if(!b.xml||!b.xml.documentElement){b.xml=null;try{d=new DOMParser;g=d.parseFromString(a.ajax.responseText,"text/xml");if(!g.getElementsByTagName("parsererror").length)b.xml=g}catch(l){}}if(a.dataType)b=b[a.dataType];a.success.call(a.ajax,b)}};return b};c.xhr.getJSONP=function(a,b,e){var d=o.head||o.getElementsByTagName("head")[0]||o.documentElement,g=o.createElement("script"),
i=false,l=[];l=/(=)\?(?=&|$)|\?\?/;var p,u;if(!e){u=a.match(/(callback=[^&]*)/);if(u!==null&&u.length){l=u[1].split("=")[1];if(l==="?")l="jsonp";p=c.guid(l);a=a.replace(/(callback=[^&]*)/,"callback="+p)}else{p=c.guid("jsonp");if(l.test(a))a=a.replace(l,"$1"+p);l=a.split(/\?(.+)?/);a=l[0]+"?";if(l[1])a+=l[1]+"&";a+="callback="+p}window[p]=function(x){b&&b(x);i=true}}g.addEventListener("load",function(){e&&b&&b();i&&delete window[p];d.removeChild(g)},false);g.src=a;d.insertBefore(g,d.firstChild)};c.getJSONP=
c.xhr.getJSONP;c.getScript=c.xhr.getScript=function(a,b){return c.xhr.getJSONP(a,b,true)};c.util={toSeconds:function(a,b){var e=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,d,g,i;if(typeof a==="number")return a;typeof a==="string"&&!e.test(a)&&c.error("Invalid time format");e=a.split(":");d=e.length-1;g=e[d];if(g.indexOf(";")>-1){g=g.split(";");i=0;if(b&&typeof b==="number")i=parseFloat(g[1],10)/b;e[d]=parseInt(g[0],10)+i}d=e[0];return{1:parseFloat(d,10),2:parseInt(d,10)*60+parseFloat(e[1],10),3:parseInt(d,
10)*3600+parseInt(e[1],10)*60+parseFloat(e[2],10)}[e.length||1]}};c.p.cue=c.p.exec;c.protect={natives:function(a){return Object.keys?Object.keys(a):function(b){var e,d=[];for(e in b)z.call(b,e)&&d.push(e);return d}(a)}(c.p).map(function(a){return a.toLowerCase()})};c.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(a,b){var e=c.p[b];c.p[b]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+b+"', "+(a==null?"do not use.":"use '"+a+"' instead."));
c.p[b]=e}return c.p[a].apply(this,[].slice.call(arguments))}});h.Popcorn=c}else{h.Popcorn={isSupported:false};for(t="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);t.length;)h.Popcorn[t.shift()]=function(){}}})(window,window.document);
(function(h){var o=function(n,k){n=n||h.nop;k=k||h.nop;return function(){n.apply(this,arguments);k.apply(this,arguments)}};h.player=function(n,k){if(!h[n]){k=k||{};var s=function(t,y,w){w=w||{};var F=new Date/1E3,z=F,G=0,H=0,A=1,K=false,C={},B=typeof t==="string"?h.dom.find(t):t,q={};Object.prototype.__defineGetter__||(q=B||document.createElement("div"));for(var c in B)if(!(c in q))if(typeof B[c]==="object")q[c]=B[c];else if(typeof B[c]==="function")q[c]=function(r){return"length"in B[r]&&!B[r].call?
B[r]:function(){return B[r].apply(B,arguments)}}(c);else h.player.defineProperty(q,c,{get:function(r){return function(){return B[r]}}(c),set:h.nop,configurable:true});var L=function(){F=new Date/1E3;if(!q.paused){q.currentTime+=F-z;q.dispatchEvent("timeupdate");setTimeout(L,10)}z=F};q.play=function(){this.paused=false;if(q.readyState>=4){z=new Date/1E3;q.dispatchEvent("play");L()}};q.pause=function(){this.paused=true;q.dispatchEvent("pause")};h.player.defineProperty(q,"currentTime",{get:function(){return G},
set:function(r){G=+r;q.dispatchEvent("timeupdate");return G},configurable:true});h.player.defineProperty(q,"volume",{get:function(){return A},set:function(r){A=+r;q.dispatchEvent("volumechange");return A},configurable:true});h.player.defineProperty(q,"muted",{get:function(){return K},set:function(r){K=+r;q.dispatchEvent("volumechange");return K},configurable:true});h.player.defineProperty(q,"readyState",{get:function(){return H},set:function(r){return H=r},configurable:true});q.addEventListener=function(r,
D){C[r]||(C[r]=[]);C[r].push(D);return D};q.removeEventListener=function(r,D){var a,b=C[r];if(b){for(a=C[r].length-1;a>=0;a--)D===b[a]&&b.splice(a,1);return D}};q.dispatchEvent=function(r){var D,a=r.type;if(!a){a=r;if(r=h.events.getInterface(a)){D=document.createEvent(r);D.initEvent(a,true,true,window,1)}}if(C[a])for(r=C[a].length-1;r>=0;r--)C[a][r].call(this,D,this)};q.src=y||"";q.duration=0;q.paused=true;q.ended=0;w&&w.events&&h.forEach(w.events,function(r,D){q.addEventListener(D,r,false)});if(k._canPlayType(B.nodeName,
y)!==false)if(k._setup)k._setup.call(q,w);else{q.readyState=4;q.dispatchEvent("loadedmetadata");q.dispatchEvent("loadeddata");q.dispatchEvent("canplaythrough")}else setTimeout(function(){q.dispatchEvent("error")},0);t=new h.p.init(q,w);if(k._teardown)t.destroy=o(t.destroy,function(){k._teardown.call(q,w)});return t};s.canPlayType=k._canPlayType=k._canPlayType||h.nop;h[n]=h.player.registry[n]=s}};h.player.registry={};h.player.defineProperty=Object.defineProperty||function(n,k,s){n.__defineGetter__(k,
s.get||h.nop);n.__defineSetter__(k,s.set||h.nop)};h.player.playerQueue=function(){var n=[],k=false;return{next:function(){k=false;n.shift();n[0]&&n[0]()},add:function(s){n.push(function(){k=true;s&&s()});!k&&n[0]()}}};h.smart=function(n,k,s){var t=typeof n==="string"?h.dom.find(n):n,y,w,F,z,G,H="HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(t){k=typeof k==="string"?[k]:k;n=0;for(G=k.length;n<G;n++){y=k[n];for(w=0;w<H.length;w++)if((z=h[H[w]])&&z._canPlaySrc(y)===
"probably"){F=z(t);k=h(F,s);setTimeout(function(){F.src=y},0);return k}for(var A in h.player.registry)if(h.player.registry.hasOwnProperty(A))if(h.player.registry[A].canPlayType(t.nodeName,y))return h[A](t,y,s)}A=h.guid("popcorn-video-");H='<video id="'+A+'" preload=auto autobuffer>';n=0;for(G=k.length;n<G;n++)H+='<source src="'+k[n]+'">';H+="</video>";t.innerHTML=H;s&&s.events&&s.events.error&&t.addEventListener("error",s.events.error,false);return h("#"+A,s)}else h.error("Specified target `"+n+"` was not found.")}})(Popcorn);
(function(h,o){var n=function(k,s){return typeof s==="string"&&o.HTMLYouTubeVideoElement._canPlaySrc(s)};o.player("youtube",{_canPlayType:n});o.youtube=function(k,s,t){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'youtube'. Please use Popcorn.HTMLYouTubeVideoElement directly.");var y=o.HTMLYouTubeVideoElement(k);k=o(y,t);setTimeout(function(){y.src=s},0);return k};o.youtube.canPlayType=n})(window,Popcorn);
